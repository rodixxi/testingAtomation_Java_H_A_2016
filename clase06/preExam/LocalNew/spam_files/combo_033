YUI.add("common-utils-performance",function(e){"use strict";function r(e){return t&&e in t}var t=window.performance,n;n=r("mark")&&r("clearMarks")&&r("now")&&r("measure")&&r("clearMeasures")&&r("getEntriesByName"),r("getEntries")&&e.once("rum:yaftFinished",function(){function e(){r("clearResourceTimings")?t.clearResourceTimings():r("webkitClearResourceTimings")&&t.webkitClearResourceTimings()}t.getEntries().length>=150&&e(),r("setResourceTimingBufferSize")?t.setResourceTimingBufferSize(250):r("webkitSetResourceTimingBufferSize")&&t.webkitSetResourceTimingBufferSize(250),r("onresourcetimingbufferfull")?t.onresourcetimingbufferfull=e:r("onwebkitresourcetimingbufferfull")&&(t.onwebkitresourcetimingbufferfull=e)}),e.mix(e.namespace("common.Utils.perf"),{startMeasurement:function(e){n&&t.mark(e)},endMeasurement:function(e){if(n){var r="perf_measure_"+t.now(),i;if(!t.getEntriesByName(e).length)return null;t.measure(r,e),i=t.getEntriesByName(r);if(i&&i.length)return t.clearMeasures(),i.pop().duration}return null},supportsMemory:function(){return r("now")&&r("memory")},sessionMemory:function(){if(this.supportsMemory()){var e=t.memory;return{heapLimit:e.jsHeapSizeLimit,heapSize:e.totalJSHeapSize,usedHeap:e.usedJSHeapSize,sessionTime:t.now()}}return{}}})});
