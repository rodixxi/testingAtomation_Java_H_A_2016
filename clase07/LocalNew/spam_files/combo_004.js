"use strict";YUI.add("tictac-base",function(a){function b(){var b=!0;try{/[\&|\?]dev=1/.test(window.location.href)&&(b=!1)}catch(b){a.Tictac.base.utils.log("tictac-base caught exception setting combo looking for dev=1:",b)}return b}function c(){return a.config.groups.tictacs.base}function d(){var b=a.config.groups.tictacs.base,c=b.split("/"),d=c[c.length-1];return b.replace(d,"zz")+"/combo?"}function e(){var b=a.config.groups.tictacs.base,c=b.split("/");return c[c.length-1]}function f(b,d,e){var f=c(),g=a.config.groups.tictacs.modules,h=g[d||"tictac-base"].path.split("/",3).join("/");return"/"!==b.substring(0,1)&&(h+="/"),e?f+h+b:h+b}function g(a){var b,c,d,e,f=!(NeoConfig.isAMT||NeoConfig.isInternal),g=window.location.search.substring(1).split("&"),h={},i=/[\&|\?]dev=1/.test(window.location.href)?"debug":"min";for(d=0,e=g.length;d<e;d++)c=g[d].split("="),2===c.length&&(f?c[0]!==a+"raw"&&c[0]!==a+"debug"&&c[0]!==a+"perf"||(h[c[0]]=c[1]):h[c[0]]=c[1]);return b=!!h[a+"perf"],i=b?"min":i,h[a+"raw"]?i="raw":h[a+"debug"]?i="debug":h[a+"min"]&&(i="min"),{enablePerf:b,filter:i,urlParams:h}}function h(f,g){g=void 0===g?b():g&&b();var h={combine:g,groups:{tictacs:{combine:g,comboBase:d(),base:c(),root:e(),modules:f}}};window.YUI_config=a.mix(window.YUI_config||{},h,!0,null,0,!0)}function i(f,g,h){h=void 0===h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,window.YUI_config=a.mix(window.YUI_config||{},i,!0,null,0,!0)}function j(f,g,h){h=void 0===h?b():h&&b();var i={combine:h,groups:{}};g.combine=h,g.comboBase=d(),g.base=c(),g.root=e(),i.groups[f]=g,a.applyConfig(i)}function k(a){return m?a.replace(/\.css$/,"_bidi.css"):a}a.namespace("Tictac.base").loader=function(){};var l=window.NeoConfig&&window.NeoConfig.lang.substring(0,2),m="ar"===l||"he"===l||"ur"===l,n=g("base"),o=f("css/");i("tictacs",{filter:n.filter,modules:{"tictac-base-formatter":{path:f("js/formatter-min.js")},"tictac-base-utils":{path:f("js/utils-min.js"),requires:["tictac-base-formatter","json","tictac-base-strings"]},"tictac-base-stats":{path:f("js/stats-min.js"),requires:["ymma-stats","json-stringify"]},"tictac-base-strings":{path:f("js/strings/lang_"+window.NeoConfig.lang+"-min.js")},"tictac-base-rollups":{path:f("js/tictac-base-rollups_"+window.NeoConfig.lang+"-min.js"),requires:["handlebars-base"]},"tictac-base-mailutils":{path:f("js/mailutils-min.js"),requires:["tictac-base-strings","json-parse"]},"tictac-base-viewutils":{path:f("js/viewutils-min.js"),requires:["tictac-base-rollups","tictac-base-strings","comms-bidi-textentry","comms-intl-bidi","base-view-css"]},"tictac-base-view":{path:f("js/view-min.js"),requires:["node","base-view-css","tictac-base-viewutils","backbone"]},"tictac-base-dialogview":{path:f("js/dialogview-min.js"),requires:["tictac-base-view","tictac-base-viewutils","tictac-base-rollups","tictac-base-strings"]},"tictac-base-model":{path:f("js/model-min.js"),requires:["backbone"]},"tictac-base-mailpreferences":{path:f("js/mailpreferences-min.js"),requires:["mail-persist-meta-data","json","tictac-base-utils"]},"tictac-base-richselect":{path:f("js/richselect-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richmenu":{path:f("js/richmenu-min.js"),requires:["base","node","tictac-base-rollups","tictac-base-viewutils","tictac-richselect-css"]},"tictac-base-richtexteditor":{path:f("js/richtexteditor-min.js"),requires:["base","node","tictac-base-utils","tictac-base-rollups","tictac-base-richselect","escape","base-bidi","tictac-base-strings","tictac-base-viewutils","tictac-richtexteditor-css","tictac-base-mailutils"]},"tictac-base-batch-transport":{path:f("js/batchtransport-min.js"),requires:["tictac-base-utils","mail-common-utils-settings"]},"tictac-base-mail-io":{path:f("js/mailio-min.js"),requires:["tictac-base-utils","io","common-net-sessionmgr","common-net-error"]},"tictac-base-assist-container":{path:f("js/assistcontainer-min.js"),requires:["node","event-custom"]},"tictac-base-prefetch-store":{path:f("js/prefetchstore-min.js"),requires:["event-custom","node","tictac-base-mail-io"]}}}),i("base_css",{filter:n.filter,modules:{"base-view-css":{type:"css",path:k(o+"view.css")},"tictac-richselect-css":{type:"css",path:k(o+"richselect.css")},"tictac-richtexteditor-css":{type:"css",path:k(o+"rte.css")}}},!0),i("tictacs_lib",{modules:{"base-bidi":{path:f("lib/bidi.js")},underscore:{path:f("lib/underscore.js")},backbone:{path:f("lib/backbone.js"),requires:["underscore"]}}},!0),a.mix(a.Tictac.base,{isRTL:m,getCombo:b,getBase:c,getComboBase:d,getComboRoot:e,getAssetURL:f,getTictacVersion:g,defineModules:h,defineModuleGroup:i,addModuleGroup:j})},"1.0.0",{requires:["node","event"]});require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=".search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-token{border:1px solid #1C89FF;border-radius:3px;box-shadow:0 1px 1px #CDCDCD;-moz-box-sizing:border-box;box-sizing:border-box;color:#1C89FF;cursor:pointer;display:inline-block;line-height:0;max-width:150px;padding:1px 10px;position:relative;zoom:1}.ui-token:not(.ui-token-selected):active .icon-close,.ui-token:not(.ui-token-selected):focus .icon-close,.ui-token:not(.ui-token-selected):hover .icon-close{opacity:1}.ui-token.ui-token-selected{background-color:#D5E8FF;border-color:#1567BF;box-shadow:none;color:#1567BF}.ui-token.ui-token-destroyable{padding-right:28px}.ui-token.ui-token-type-people{max-width:220px}.ui-token.icon{font-family:inherit;font-size:inherit;padding-left:28px}.ui-token.icon::before{font-family:mail;line-height:1;position:absolute;top:50%;margin-top:-6px;left:10px}.ui-token.icon-folder{max-width:150px}.ui-token>*{display:inline-block;line-height:20px;vertical-align:middle}.ui-token .icon-close{font-size:1em;line-height:1;opacity:.4;padding:3px;position:absolute;top:50%;margin-top:-9px;right:7px;-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.ui-token .icon-close:active,.ui-token .icon-close:focus,.ui-token .icon-close:hover{opacity:1}.ui-token-thumbnail{background-position:center;background-repeat:no-repeat;background-size:cover;border-top-left-radius:2px;border-bottom-left-radius:2px;margin:0;padding:0;position:absolute;top:0;bottom:0;left:0;width:22px}.ui-token-thumbnail+*{padding-left:20px}.ui-token-text{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.typeahead-list>li{overflow:hidden}.typeahead-list>li:hover{background-color:#E5E5E5}.tokenized-typeahead{-moz-box-sizing:border-box;box-sizing:border-box;position:relative}.tokenized-typeahead .typeahead-list li:last-child,.tokenized-typeahead .typeahead-list li:last-child .menu-active-item{background-color:#fff}#Stencil .typeahead-input{margin:0;border:0;box-shadow:none;bottom:0;left:0;width:100%;padding:6px 26px 6px 10px;font-size:1.4rem;display:inline-block;position:relative;height:32px}#Stencil .typeahead-list{border-width:1px;border-width:0;border-style:solid;border-color:#e2e2e6;box-shadow:0 5px 10px rgba(0,0,0,.36);position:absolute;background-color:#fff;left:1px;right:1px;z-index:1;margin-top:0;top:100%}#Stencil .adv-search-container .typeahead-content-box{position:relative}#Stencil .lt .typeahead-input-container{border:0 none}#Stencil .typeahead-input-container{position:relative;overflow:hidden}#Stencil .lt .typeahead-list{border-width:1px 0}#Stencil .adv-search-container .typeahead-content-box{border:0;margin:4px 0}#Stencil .adv-search-container .typeahead-input{padding:6px;font-size:1.3rem;border:1px solid #CCC;border-radius:2px}#Stencil .typeahead-input-usertext{position:relative;margin:0;background-color:transparent}#Stencil .typeahead-input-usertext:-moz-placeholder,#Stencil .typeahead-input-usertext::-moz-placeholder,#Stencil .typeahead-input-usertext::-webkit-input-placeholder{color:silver}#Stencil .typeahead-input-usertext:-ms-input-placeholder{color:silver}#Stencil .typeahead-input-grayhint{position:absolute;top:0;left:0;margin:0;color:silver;-webkit-text-fill-color:silver;background-color:transparent}#Stencil .typeahead-input-grayhint[dir=rtl]{text-align:left!important}#Stencil .tokenized-typeahead-container{border:1px solid #7590F5;background-color:#fff}#Stencil .search-autocomplete .tokenized-typeahead-container{height:32px}.tokensSelected .typeahead-input{color:transparent;text-shadow:0 0 0 #000}.typeahead-token-list{display:inline;float:left;margin:4px 0 4px 4px!important;outline:0}.typeahead-token-list li{display:inline-block;vertical-align:middle}.typeahead-token-list li+li{margin-left:5px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.search-menu{background-color:rgba(255,255,255,.95);color:#000;box-shadow:0 5px 10px rgba(0,0,0,.36);-moz-box-sizing:border-box;box-sizing:border-box;padding:10px 0;max-height:100%;overflow:auto;overflow-x:hidden;position:relative}.search-menu:hover .highlighted{background-color:rgba(255,255,255,.95)}.search-menu-group{border-bottom:1px solid #D8D8D8;padding-bottom:10px}.search-menu-group:first-child{margin-top:-10px;padding-top:10px}.search-menu-group:last-child{border-bottom:0;padding-bottom:0}.search-menu-group+.search-menu-group,.search-menu-group+.search-menuitem{margin-top:10px}.search-menu-group.search-menu-togglable .search-menuitem{position:relative;padding-left:40px}.search-menu-group.search-menu-togglable .icon{position:absolute;top:4px}.search-menu-group.search-menu-togglable .icon.icon-checkmark{left:16px}.search-menu-group-title{color:#AAA;font-weight:700}.search-menu-group-overflow{max-height:200px;overflow:auto;overflow-x:hidden;position:relative}.search-menu-group-title,.search-menuitem{line-height:2.5rem;padding:0 20px}.search-menuitem{-moz-box-sizing:border-box;box-sizing:border-box;cursor:pointer;max-width:300px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.search-menuitem:focus,.search-menuitem:hover:not([data-disabled]){background-color:rgba(0,0,0,.1)}.search-menuitem.highlighted{background-color:rgba(0,0,0,.15)}.search-menuitem:active{background-color:rgba(0,0,0,.15)}.search-menuitem.selected{font-weight:700}.search-menuitem.selected::before{content:\"\\e018\";font-family:mail;font-size:21px;font-weight:400;margin-top:-.55em;position:absolute;right:-webkit-calc(100% - 36px);right:-moz-calc(100% - 36px);right:calc(100% - 36px);top:50%}.search-menuitem[data-disabled]{color:#999;pointer-events:none}.search-menuitem kbd{float:right;font-family:inherit;margin-left:20px}.search-menuitem,.ui-token{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ui-onboarding{font-size:12px}.ui-onboarding.convstooltip .modal.tooltips-text{border:1px solid #0078ff;border-radius:3px}.ui-onboarding .modal::after,.ui-onboarding .modal::before{content:'';position:absolute;width:0;height:0;border:8px solid transparent}.ui-onboarding .modal.top-arrow::before{top:-16px;left:20px;border-bottom-color:#0078ff}.ui-onboarding .modal.top-arrow::after{top:-15px;left:20px;border-bottom-color:#fff}.ui-onboarding .modal.bottom-arrow::before{bottom:-16px;left:20px;border-top-color:#0078ff}.ui-onboarding .modal.bottom-arrow::after{bottom:-15px;left:20px;border-top-color:#fff}.ui-onboarding .modal.left-arrow::before{left:-16px;top:20px;border-right-color:#0078ff}.ui-onboarding .modal.left-arrow::after{left:-15px;top:20px;border-right-color:#fff}.ui-onboarding .modal.right-arrow::before{right:-16px;top:20px;border-left-color:#0078ff}.ui-onboarding .modal.right-arrow::after{right:-15px;top:20px;border-left-color:#fff}.ui-onboarding .hd{font-size:16px;font-weight:700;margin-bottom:7px}.ui-onboarding .bd{line-height:16px}.ui-onboarding .modal-bd{margin-top:13px}.ui-onboarding .modal.tooltips-text .modal-ft{padding:11px 20px 17px}.ui-onboarding .modal-ft .onboarding-btn{font-size:12px;line-height:12px;height:25px;padding:0;margin:0;min-width:50px;box-shadow:none}.parens::before{content:'('}.parens::after{content:')'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}.negate-font-size{font-size:0}";a("./../../../jarvis/node_modules/cssify")(d,void 0,"/var/builds/workspace/49938-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),b.exports=d},{"./../../../jarvis/node_modules/cssify":11}],2:[function(a,b,c){"use strict";var d={str_dateformat_AM_l10n:"a. m.",str_dateformat_PM_l10n:"p. m.",str_dayabbr_friday:"Vie",str_dayabbr_monday:"Lun",str_dayabbr_saturday:"Sáb",str_dayabbr_sunday:"Dom",str_dayabbr_thursday:"Jue",str_dayabbr_tuesday:"Mar",str_dayabbr_wednesday:"Mié",str_day_friday:"Viernes",str_day_monday:"Lunes",str_day_saturday:"Sábado",str_day_sunday:"Domingo",str_day_thursday:"Jueves",str_day_tuesday:"Martes",str_day_wednesday:"Miércoles",str_folder_allmail:"Todos los correos",str_folder_drafts:"Borradores",str_folder_inbox:"Buzón",str_folder_sent:"Enviados",str_folder_spam:"Spam",str_folder_trash:"Papelera",str_monthabbr_april:"Abr",str_monthabbr_august:"Ago",str_monthabbr_december:"Dic",str_monthabbr_february:"Feb",str_monthabbr_january:"Ene",str_monthabbr_july:"Jul",str_monthabbr_june:"Jun",str_monthabbr_march:"Mar",str_monthabbr_may:"Mayo",str_monthabbr_november:"Nov",str_monthabbr_october:"Oct",str_monthabbr_september:"Sept",str_month_april:"Abril",str_month_august:"Agosto",str_month_december:"Diciembre",str_month_february:"Febrero",str_month_january:"Enero",str_month_july:"Julio",str_month_june:"Junio",str_month_march:"Marzo",str_month_may:"Mayo",str_month_november:"Noviembre",str_month_october:"Octubre",str_month_september:"Septiembre",str_suggestion_other_email_plural:"{{emailAddress}} y {{number}} correos electrónicos más",str_suggestion_other_email_singular:"{{emailAddress}} y 1 correo electrónico más",last:null};b.exports=d},{}],3:[function(a,b,c){"use strict";b.exports.leftJoiner=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0847\u0848\u084A-\u084E\u0850-\u0853\u0855\u08A0-\u08A9\u08AF\u08B0\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA872]|\uD802[\uDEC0-\uDEC4\uDECD\uDED3-\uDEDC\uDEDE-\uDEE0\uDEEB-\uDEEE\uDF80\uDF82\uDF86-\uDF88\uDF8A\uDF8B\uDF8D\uDF90\uDFAD\uDFAE]/,b.exports.rightJoiner=/[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u08A0-\u08AC\u08AE-\u08B2\u1807\u1820-\u1877\u1887-\u18A8\u18AA\uA840-\uA871]|\uD802[\uDEC0-\uDEC5\uDEC7\uDEC9\uDECA\uDECE-\uDED6\uDED8-\uDEE1\uDEE4\uDEEB-\uDEEF\uDF80-\uDF91\uDFA9-\uDFAE]/},{}],4:[function(a,b,c){"use strict";b.exports="[\0-@[-`{-©«-´¶-¹»-¿×÷ʹʺ˂-ˏ˒-˟˥-˭˯-ͯʹ͵;΄΅·϶҃-҉֊֍-֏֑-ׇֽֿׁׂׅׄ؀-؇؉؊،؎-ًؚ-٬ٰۖ-ۤۧ-ۭ۰-۹ܑܰ-݊ަ-ް߫-߳߶-߹ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৲৳৻ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣ૱ଁ଼ିୁ-ୄ୍ୖୢୣஂீ்௳-௺ఀా-ీె-ైొ-్ౕౖౢౣ౸-౾ಁ಼ೌ್ೢೣഁു-ൄ്ൢൣ්ි-ුූัิ-ฺ฿็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷-༽ཱ-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟᎐-᎙᐀ ᚛᚜ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៛៝៰-៹᠀-᠎ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻᥀᥄᥅᧞-᧿ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷵᷼-᷿᾽᾿-῁῍-῏῝-῟῭-`´῾ -‍‐-\u2029 -⁤⁨⁪-⁰⁴-⁾₀-₎₠-₽⃐-⃰℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅐-⅟↉←-⌵⍻-⎔⎖-⏺␀-␦⑀-⑊①-⒛⓪-⚫⚭-⟿⤀-⭳⭶-⮕⮘-⮹⮽-⯈⯊-⯑⳥-⳪⳯-⳱⳹-⳿⵿ⷠ-⹂⺀-⺙⺛-⻳⼀-⿕⿰-⿻　-〄〈-〠〪-〭〰〶〷〽-〿゙-゜゠・㇀-㇣㈝㈞㉐-㉟㉼-㉾㊱-㊿㋌-㋏㍷-㍺㏞㏟㏿䷀-䷿꒐-꓆꘍-꘏꙯-ꙿꚟ꛰꛱꜀-꜡ꞈꠂ꠆ꠋꠥꠦ꠨-꠫꠸꠹꡴-꡷꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ﬩﴾﴿﷽︀-︙︠-︭︰-﹒﹔-﹦﹨-﹫\ufeff！-＠［-｀｛-･￠-￦￨-￮￹-�]|�[��-��-����-��-�]|�[��-����-��-�����-�]|�[�-�]|[��][��-��-��-��-����-��-��-�����-��-������-�����-��-�]|�[�-�������-������-�������-��]|�[�-��-�]|�[�-�]|�[���-�]|�[�-��-��-��-��-��-�]|�[������-�]|�[�-�]|�[��]|�[�-��-��-��-��-��-��-����-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-�]"},{}],5:[function(a,b,c){"use strict";b.exports="[־׀׃׆א-תװ-״؈؋؍؛؜؞-ي٭-ٯٱ-ەۥۦۮۯۺ-܍܏ܐܒ-ܯݍ-ޥޱ߀-ߪߴߵߺࠀ-ࠕࠚࠤࠨ࠰-࠾ࡀ-ࡘ࡞ࢠ-ࢲ‏‫‮⁧יִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-﯁ﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼ﹰ-ﹴﹶ-ﻼ]|�[�-���-�����-��-��-��-��-���-�����-��-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]"},{}],6:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"OnboardingText",propTypes:{id:e.PropTypes.string,title:e.PropTypes.node,body:e.PropTypes.node,buttonText:e.PropTypes.node,dir:e.PropTypes.string,width:e.PropTypes.string},render:function(){var a=this.props,b={width:a.width+"px"},c={modal:!0,"tooltips-text":!0};return a.dir&&(c[a.dir+"-arrow"]=!0),e.createElement("div",{className:"convstooltip yui3-tooltips ui-onboarding",id:a.id},e.createElement("div",{className:e.addons.classSet(c),style:b},e.createElement("div",{className:"modal-bd"},e.createElement("div",{className:"hd"},a.title),e.createElement("div",{className:"bd"},a.body)),e.createElement("div",{className:"modal-ft"},e.createElement("button",{className:"btn left right default onboarding-btn","data-action":"ok"},a.buttonText))))}}),b.exports=d},{"react/addons":"react/addons"}],7:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"Input",propTypes:{value:e.PropTypes.string,disabled:e.PropTypes.bool,onFocus:e.PropTypes.func,onClick:e.PropTypes.func,onSelect:e.PropTypes.func,onChange:e.PropTypes.func,onKeyUp:e.PropTypes.func,onKeyDown:e.PropTypes.func,onKeyPress:e.PropTypes.func,onCompositionStart:e.PropTypes.func,onCompositionEnd:e.PropTypes.func},shouldComponentUpdate:function(a){return!f.isEqual(this.props,a)},getDefaultProps:function(){return{className:"",value:"",onCompositionStart:f.noop,onCompositionEnd:f.noop}},componentDidMount:function(){var a=this,b=a.getDOMNode();b.addEventListener("compositionstart",a.handleCompositionStart),b.addEventListener("compositionend",a.handleCompositionEnd)},componentWillUnmount:function(){var a=this,b=a.getDOMNode();b.removeEventListener("compositionstart",a.handleCompositionStart),b.removeEventListener("compositionend",a.handleCompositionEnd)},componentDidUpdate:function(){var a=this;a.props.dir||a.getDOMNode().removeAttribute("dir")},render:function(){var a=this.props;return e.createElement("input",{className:"typeahead-input "+a.className,spellCheck:"false",autoComplete:"false",placeholder:a.placeholder,disabled:!!a.disabled&&"disabled",value:a.value,onFocus:a.onFocus,onClick:a.onClick,onSelect:a.onSelect,onChange:this.handleChange,onKeyUp:a.onKeyUp,onKeyDown:a.onKeyDown,onKeyPress:a.onKeyPress,dir:a.dir})},handleChange:function(a){a.target.value!==this.props.value&&this.props.onChange(a)},handleCompositionStart:function(){this.props.onCompositionStart()},handleCompositionEnd:function(){this.props.onCompositionEnd()},setSelectionRange:function(a,b){this.getDOMNode().setSelectionRange(a,b)},getSelectionEnd:function(){return this.getDOMNode().selectionEnd},getSelectionStart:function(){return this.getDOMNode().selectionStart},focus:function(){this.getDOMNode().focus()},blur:function(){this.getDOMNode().blur()}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],8:[function(a,b,c){"use strict";b.exports=function(){function b(a){a=a||{},this.dispatcher=new c({}),this.actionContext=this.getActionContext(),this.componentContext=this.getComponentContext()}var c=a("dispatchr")();return b.prototype.getComponentContext=function(){var a=this;return{executeAction:function(b,c){b(a.actionContext,c,function(a){})},getStore:a.dispatcher.getStore.bind(a.dispatcher)}},b.prototype.getActionContext=function(){var a=this;return{dispatch:a.dispatcher.dispatch.bind(a.dispatcher),executeAction:function(b,c,d){b(a.actionContext,c,d)},getStore:a.dispatcher.getStore.bind(a.dispatcher)}},b.prototype.dehydrate=function(){return{dispatcher:this.dispatcher.dehydrate()}},b.prototype.rehydrate=function(a){this.dispatcher.rehydrate(a.dispatcher||{})},{registerStore:c.registerStore.bind(c),contextInst:new b}}},{dispatchr:"dispatchr"}],9:[function(a,b,c){"use strict";YUI.add("tictac-lib",function(){var b=a("lodash"),c=a("AppDispatcher"),d=a("FolderStore");a("../../artifacts/css/main.css"),[d].forEach(c.registerStore),b.templateSettings.escape=/{{([\s\S]+?)}}/g,b.templateSettings.interpolate=/{{{([\s\S]+?)}}}/g,window.React=window.React||a("react/addons"),window.ReactContext=window.ReactContext||a("./context.js")()},"1.0.0",{requires:["tictac-base"]})},{"../../artifacts/css/main.css":1,"./context.js":8,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",lodash:"lodash","react/addons":"react/addons"}],10:[function(a,b,c){"use strict";var d={findJavaScriptIndexEndForUTF8ByteCount:function(a,b,c){var d,e,f=a;for(d=c;d<b.length&&f>0;d+=1)e=b.charCodeAt(d),f-=e<128?1:e<2048?2:3;return 0===f?d:-1},getNextResponsePartInfo:function(a,b){for(var c,d,e;a.indexOf("\r\n",b)===b;)b+=2;return c=a.indexOf("\r\n",b),d=a.substring(b,c),e=parseInt(d,16),{startIndex:c,endIndex:this.findJavaScriptIndexEndForUTF8ByteCount(e,a,c+2)}},parse:function(a,b){for(var c,d=b||0,e=[];d<a.length-2&&(c=this.getNextResponsePartInfo(a,d),-1!==c.endIndex);)e.push(c),d=c.endIndex;return{lastStartIndex:d,data:e.map(function(b){return a.substring(b.startIndex,b.endIndex)}).map(function(a){return JSON.parse(a)})}}};b.exports=d},{}],11:[function(a,b,c){function d(a,b,c){var d=a.getElementById(b);if(d)c(d);else{var e=a.getElementsByTagName("head")[0];d=a.createElement("style"),d.id=b,c(d),e.appendChild(d)}return d}b.exports=function(a,b,c){var e=b||document;if(e.createStyleSheet){var f=e.createStyleSheet();return f.cssText=a,f.ownerNode}return d(e,c,function(b){b.styleSheet?b.styleSheet.cssText=a:b.innerHTML=a})},b.exports.byUrl=function(a){if(document.createStyleSheet)return document.createStyleSheet(a).ownerNode;var b=document.getElementsByTagName("head")[0],c=document.createElement("link");return c.rel="stylesheet",c.href=a,b.appendChild(c),c}},{}],12:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,"."),d+f(a.split("."),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:w}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;f<q;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=k<=t?x:k>=t+y?y:k-t,!(m<n);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;i<q;++i)(p=a[i])<128&&u.push(K(p));for(d=f=u.length,f&&u.push(D);d<q;){for(j=v,i=0;i<q;++i)(p=a[i])>=b&&p<j&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;i<q;++i)if(p=a[i],p<b&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=n<=g?x:n>=g+y?y:n-g,!(m<o);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;s.global!==s&&s.window!==s&&s.self!==s||(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.4.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;a=a.split(b);var h=1e3;f&&"number"==typeof f.maxKeys&&(h=f.maxKeys);var i=a.length;h>0&&i>h&&(i=h);for(var j=0;j<i;++j){var k,l,m,n,o=a[j].replace(/\+/g,"%20"),p=o.indexOf(c);p>=0?(k=o.substr(0,p),l=o.substr(p+1)):(k=o,l=""),m=decodeURIComponent(k),n=decodeURIComponent(l),d(g,m)?e(g[m])?g[m].push(n):g[m]=[g[m],n]:g[m]=n}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],14:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],15:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":13,"./encode":14}],16:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s={javascript:!0,"javascript:":!0},t={javascript:!0,"javascript:":!0},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e);f[0]=f[0].replace(/\\/g,"/"),a=f.join(e);var g=a;if(g=g.trim(),!c&&1===a.split("#").length){var h=m.exec(g);if(h)return this.path=g,this.href=g,this.pathname=h[1],h[2]?(this.search=h[2],this.query=b?v.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var l=k.exec(g);if(l){l=l[0];var n=l.toLowerCase();this.protocol=n,g=g.substr(l.length)}if(c||l||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===g.substr(0,2);!o||l&&t[l]||(g=g.substr(2),this.slashes=!0)}if(!t[l]&&(o||l&&!u[l])){for(var w=-1,x=0;x<r.length;x++){var y=g.indexOf(r[x]);-1!==y&&(-1===w||y<w)&&(w=y)}var z,A;A=-1===w?g.lastIndexOf("@"):g.lastIndexOf("@",w),-1!==A&&(z=g.slice(0,A),g=g.slice(A+1),this.auth=decodeURIComponent(z)),w=-1;for(var x=0;x<q.length;x++){var y=g.indexOf(q[x]);-1!==y&&(-1===w||y<w)&&(w=y)}-1===w&&(w=g.length),this.host=g.slice(0,w),g=g.slice(w),this.parseHost(),this.hostname=this.hostname||"";var B="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!B)for(var C=this.hostname.split(/\./),x=0,D=C.length;x<D;x++){var E=C[x];if(E&&!E.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var F="",G=0,H=E.length;G<H;G++)E.charCodeAt(G)>127?F+="x":F+=E[G];if(!F.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var I=C.slice(0,x),J=C.slice(x+1),K=E.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);K&&(I.push(K[1]),J.unshift(K[2])),J.length&&(g="/"+J.join(".")+g),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=i.toASCII(this.hostname));var L=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+L,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!s[n])for(var x=0,D=p.length;x<D;x++){var N=p[x];if(-1!==g.indexOf(N)){var O=encodeURIComponent(N);O===N&&(O=escape(N)),g=g.split(N).join(O)}}var P=g.indexOf("#");-1!==P&&(this.hash=g.substr(P),g=g.slice(0,P));var Q=g.indexOf("?");if(-1!==Q?(this.search=g.substr(Q),this.query=g.substr(Q+1),b&&(this.query=v.parse(this.query)),g=g.slice(0,Q)):b&&(this.search="",this.query={}),g&&(this.pathname=g),u[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",R=this.search||"";this.path=L+R}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=v.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||u[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return u[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!u[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||t[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=s||r||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!u[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!v&&!w)for(;C--;C)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return v=v||c.host&&x.length,v&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":17,punycode:12,querystring:15}],17:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],18:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],AppDispatcher:[function(a,b,c){"use strict";var d,e,f,g,h=a("dispatchr")(),i=a("events").EventEmitter;d=new h({}),e={dispatch:function(){d.dispatch.apply(d,arguments)}},f={executeAction:function(){var a=[].slice.call(arguments,1);arguments[0].apply(null,[e].concat(a))},getStore:function(a){return d.getStore(a)},events:new i},g=function(a){h.registerStore.apply(null,arguments),window._stores=window._stores||{},window._stores[a.storeName]=d.getStore(a)},b.exports={registerStore:g,context:f}},{dispatchr:"dispatchr",events:"events"}],AriaStatus:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"AriaStatus",propTypes:{message:e.PropTypes.string.isRequired,ariaLive:e.PropTypes.string},getDefaultProps:function(){return{ariaLive:"polite"}},componentDidMount:function(){var a=this;a.setText(a.props.message)},componentDidUpdate:function(){var a=this;a.setText(a.props.message)},render:function(){return e.createElement("span",{className:"offscreen",ref:"notificationNode",role:"status","aria-live":this.props.ariaLive})},setText:function(a){this.refs.notificationNode.getDOMNode().textContent=a}}),b.exports=d},{"react/addons":"react/addons"}],BidiSafeFilepath:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("StringUtils");d=e.createClass({displayName:"BidiSafeFilepath",propTypes:{
filepath:e.PropTypes.string,tagName:e.PropTypes.string,className:e.PropTypes.string,title:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{tagName:"div"}},render:function(){var a,b=this.props.filepath;return"string"==typeof b?(a=f.getFileName(b),e.createElement(this.props.tagName,{className:this.props.className,title:this.props.title,dir:f.getTextDirection(a)},a,this.renderExtension(f.getFileExtension(b)))):null},renderExtension:function(a){if(a)return e.createElement("span",{ref:"extension",dir:"ltr"},a)}}),b.exports=d},{StringUtils:"StringUtils","react/addons":"react/addons"}],BidiString:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("StringUtils");d=e.createClass({displayName:"BidiString",propTypes:{str:e.PropTypes.string,tagName:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{tagName:"span"}},render:function(){var a=this.props.str;return"string"==typeof a?e.createElement(this.props.tagName,f.merge({dir:g.getTextDirection(a),children:a},f.omit(this.props,["tagName","dir"]))):null}}),b.exports=d},{StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],BodyDropdown:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Dropdown");d=e.createClass({displayName:"BodyDropdown",propTypes:{className:e.PropTypes.string,closeDropdown:e.PropTypes.func.isRequired,parentNode:e.PropTypes.instanceOf(HTMLElement),anchorNode:e.PropTypes.instanceOf(HTMLElement),coordinates:e.PropTypes.shape({x:e.PropTypes.number,y:e.PropTypes.number}),dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"])},getDefaultProps:function(){return{dropdownXOrigin:"left",dropdownYOrigin:"top"}},componentWillMount:function(){var a=this;a.container=document.createElement("div"),window.addEventListener("resize",a.props.closeDropdown,!0)},componentDidMount:function(){var a=this,b=a.props,c=a.container;a.dropdown=e.render(e.createElement(f,{className:b.className,anchorNode:b.anchorNode,parentNode:b.parentNode,closeDropdown:b.closeDropdown,onClick:b.onClick},b.children),c),document.body.appendChild(c),a.positionDropdown()},componentWillUnmount:function(){var a=this,b=a.container;e.unmountComponentAtNode(b),document.body.removeChild(b),window.removeEventListener("resize",a.props.closeDropdown,!0)},componentDidUpdate:function(){var a=this;a.dropdown.setProps({parentNode:a.props.parentNode,closeDropdown:a.props.closeDropdown,children:a.props.children})},render:function(){return e.createElement("div",null)},getRTLAwareDirection:function(a){return NeoConfig.isRTL?"left"===a?"right":"left":a},positionDropdown:function(){var a=this,b=a.container,c=a.props.coordinates,d=a.props.anchorNode;if(!c&&!d)throw new Error("Must provide coordinates or an anchorNode");c?a.positionDropdownToCoordinates(c):d&&a.positionDropdownToNode(d),b.clientHeight>=window.innerHeight&&(b.style.top="20px",b.style.bottom="20px"),b.clientWidth>=window.innerWidth&&(b.style.left="20px",b.style.right="20px")},positionDropdownToNode:function(a){var b,c,d=this,e=a.getBoundingClientRect(),f=d.container.style,g=d.getRTLAwareDirection(d.props.dropdownXOrigin),h=window.innerWidth;f.position="fixed",f.zIndex="100000",b=d.dropdown.getDOMNode().scrollWidth,"right"===g?e.right>h+window.scrollX?f.right=h-b-10+"px":e.right<b?f.right=Math.ceil(h-e.left-b)+"px":f.right=Math.ceil(h-e.right)+"px":document.body.clientWidth-window.scrollX<e.left+b?f.left=h-b-10+"px":f.left=e.left+"px",c="bottom"===d.props.dropdownYOrigin?e[d.props.dropdownYOrigin]-a.offsetHeight:e[d.props.dropdownYOrigin]+a.offsetHeight,f.top=c+"px",f.height=window.innerHeight-c-a.offsetHeight+"px"},positionDropdownToCoordinates:function(a){var b,c,d=this,e=d.container,f=e.style;f.position="fixed",f.zIndex="100000",a.x=a.x>0?a.x:0,a.y=a.y>0?a.y:0,b=e.clientWidth+a.x,c=e.clientHeight+a.y,b>window.innerWidth&&(a.x=a.x-(b-window.innerWidth)),c>window.innerHeight&&(a.y=a.y-(c-window.innerHeight)),f.left=a.x+"px",f.top=a.y+"px"}}),b.exports=d},{Dropdown:"Dropdown","react/addons":"react/addons"}],BootcampAPIUtilsV2:[function(a,b,c){"use strict";function d(a){return({keyword:"WITH_KEYWORD"}[a]||a).toUpperCase()}function e(a){return{url:q.getValue(a,["url"],!1),xTiming:q.getValue(a,["resHeaders","xTiming"],!1),status:a.status,duration:q.getValue(a,["elapsedTime"])}}function f(a){var b="desc",c=a.sortType,d=a.sortOrder;switch(c){case v.MSG_SORT_TYPE_DATE:b="down"===(d||v.MSG_SORT_ORDER_DOWN)?"desc":"asc";break;case v.MSG_SORT_TYPE_ATTACHMENT:b="attachment";break;case v.MSG_SORT_TYPE_RELEVANCE:b="relevance"}return b}function g(a,b,c){var e=q.getValue(a,"response.contentBlock",!1),f=q.getValue(a,"response.srpType"),g=q.getValue(a,"response.heroBlockType"),h=q.getValue(e,"content","");switch(f){case"PLAYING_IT_SAFE":if("NONE"===g&&e.blockType===u.MESSAGES)return!0;if((e.blockType===u.MAIN||e.blockType===g)&&(h.items||[]).length>0)return!0;break;case"LIST":if((e.blockType===u.MAIN||e.blockType===g)&&(h.items||[]).length>0)return!0;break;case"PERSON_SRP":case"people":if(e.blockType===u.MESSAGES)if(c){if(e.filter===d(b)&&(h.items||[]).length>0)return!0}else if(e.filter===d(b))return!0;break;default:if(e.blockType===u.MESSAGES)return!0}return!1}function h(a){return({MIXED:"links"}[a]||a).toLowerCase()}function i(a){return({WITH_KEYWORD:"keyword"}[a]||a||"").toLowerCase()}function j(a){var b=w.context.getStore(x);return a.forEach(function(a){var c;void 0!==a.folderNumber||void 0!==a.folderId?(c=b.findByIndex(a.folderNumber),a.fid=q.getValue(c,["folderInfo","fid"],a.folderId)):void 0!==a.mid&&(a.fid="Inbox"),"MESSAGE"===a.itemType&&(a.mid=a.mid||a.id.slice(2),a.id=a.mid),a.creationDate>21459168e5&&(a.creationDate/=1e3)}),a}function k(a,b){var c,d={metaData:e(a),data:{},error:{}},f=!1,k=!1,l=p.parse(a.text,0);return d.metaData.searchType=b.searchType,!l.data||a.status<200||a.status>=300?(d.error={status:a.status,message:a.text},d):(l.data.forEach(function(e){var l,m,n,o,p=q.getValue(e,"response.contentBlock",!1);if(200!==e.status||!p)return 401===e.status&&(f=!0),n=h(q.getValue(e,"response.blockType")),o=i(q.getValue(e,"response.filter")),l=q.getValue(e,"response.message",""),void(n&&o&&(d.error[n]||(d.error[n]={}),d.error[n][o]={status:e.status,message:l}));m=q.getValue(p,"content",""),n=h(q.getValue(p,["content","contentType"],q.getValue(p,"blockType"))),o=i(q.getValue(p,"filter")||"WITH_KEYWORD"),n&&(d.data[n]||(d.data[n]={}),d.data[n][o]={totalHits:m.totalHits,offset:(m.items||[]).length?m.offset:void 0,url:q.getValue(p,"url",""),items:j(m.items||[]),spellCorrection:q.getValue(p,"content.suggestedWords",null),resultsFromTrash:q.getValue(m,"resultsFromTrash",null),queryResponse:q.getValue(m,"queryResponse",null)},200===a.status&&n.toUpperCase()===u.MESSAGES&&o===b.defaultFilter&&(c={contentType:n,filter:b.defaultFilter,isEmpty:(m.items||[]).length<=0}),k||(k=g(e,b.defaultFilter,b.isForceUser))&&(d.metaData.hasMain=!0,d.metaData.main={contentType:n,filter:o,isEmpty:(m.items||[]).length<=0}))}),200===a.status&&!d.metaData.hasMain&&c&&(d.metaData.hasMain=!0,d.metaData.main=c,"people"===b.searchType&&q.getValue(d,["metaData","main","isEmpty"],!1)&&q.getValue(d,["data",c.contentType,"all","items"],[]).length>0&&(d.metaData.main.filter="all",d.metaData.main.isEmpty=!1)),d.metaData.reAuthenticate=f,d)}function l(a){this.wssid=a.wssid,this.mailboxId=a.mailboxId,this.lmv3Enabled=a.lmv3Enabled,this.searchGDocsEnabled=a.searchGDocsEnabled,this.searchInTrashEnabled=a.searchInTrashEnabled,this.hasMultipleAccounts=a.hasMultipleAccounts,this.bucketId=a.bucketId,this.isForceUser=a.isForceUser,this.searchResultsLinksEnabled=a.searchResultsLinksEnabled,this.searchExtractionsEnabled=a.searchExtractionsEnabled,this.clientId=a.clientId||B,this.bcHost=a.bcHost||"https://prod1.psearch.yahoo.com"}var m,l,n=a("IO"),o=a("lodash"),p=a("./BootcampResponseParser"),q=a("ObjectUtils"),r=a("Utils"),s=a("StringUtils"),t=a("GlobalConstants"),u=a("SearchConstants"),v=a("UserSettingsConstants"),w=a("AppDispatcher"),x=a("FolderStore"),y=a("EnhancedPromise"),z=a("timeUtils").getTimezone(),A=(new Date).getTimezoneOffset(),B="mailsearch",C=yui.common.Utils,D=C.features;m={SUGG_CACHE_MAX_SIZE:500,SUGG_CACHE_MAX_AGE:3e5,generateKey:function(a){return JSON.stringify(a)},buildCache:function(a,b,c){var d={},e=o.now();return o.size(a)>m.SUGG_CACHE_MAX_SIZE&&(o.each(a,function(a,b){e-a.timestamp<m.SUGG_CACHE_MAX_AGE&&(d[b]=a)}),a=d),a[b]||(a[b]={timestamp:e,data:c}),a},getDataFromCache:function(a,b){if(a[b]){if(o.now()-a[b].timestamp<m.SUGG_CACHE_MAX_AGE)return a[b].data;delete a[b]}},normalizeResponse:function(a,b,c){var d={metaData:e(a),data:{},error:{}},f=[],g=p.parse(a.text,0);return(!g.data||a.status<200||a.status>=300)&&(d.error={status:a.status,message:a.text}),f=q.getValue(g.data[0],["response","suggestions"],[]).filter(function(a){return"PEOPLE"===a.intent}).map(function(a){var b,c=o.values(a.entities)[0];if(c)return b=c.imageUrl?s.addUrlParameters(c.imageUrl,{spsize:"50X50",badge:!0,fallback_url:t.FALLBACK_XOBNI_IMG_URL}):t.FALLBACK_XOBNI_IMG_URL,o.merge({},c,{imageUrl:b,displayStr:c.name,intent:a.intent,emailAddresses:c.emailIds})}),m.buildCache(c,b,f),d.data=f,d}},l.CONSTANTS={PEOPLE_SEARCHTYPE:"people",KEYWORD_SEARCHTYPE:"keyword"},l.CONTENT_TYPES=["messages","photos","documents","links","people","extractions"],l.getSearchType=function(a){var b=l.CONSTANTS;return q.getValue(a,["emailAddresses"],!1)?b.PEOPLE_SEARCHTYPE:b.KEYWORD_SEARCHTYPE},l.prototype.getDefaultUrlParams=function(){var a={timezone:z,tzoffset:A,clientid:this.clientId,mailboxid:this.mailboxId},b=C.getMailBoxQueryParams&&C.getMailBoxQueryParams()||{};return(this.lmv3Enabled||this.hasMultipleAccounts)&&(a.lmv3=1,a.oldSearchV2Mids=1),this.searchGDocsEnabled&&(a.allowGoogleDocs=1),this.searchInTrashEnabled&&(a.searchInTrash=1),o.merge(a,b),a},l.prototype.search=function(a){var b,c,e=this.bcHost+"/v2/srp?",g=l.CONSTANTS,h=this.getDefaultUrlParams(),i=l.getSearchType(a),j=this.isForceUser,m=i===g.PEOPLE_SEARCHTYPE,p=function(b){return k(b,{defaultFilter:a.defaultFilter,searchType:i,isForceUser:j})},q={headers:{"Content-Type":"application/json"}},s=["HERO","PEOPLE_RELATED"],t=[];return h.ymreqid=a.reqId,h.bucketid=this.bucketId,h.order=f(a.sortInfo),h.query=[].concat(a.query,a.refinements||[]).join(" "),h.limit=a.limit,a.folders&&a.folders.length?h.folders=a.folders.join(","):a.accountIds&&a.accountIds.length&&(h.accountIds=a.accountIds.join(",")),this.isForceUser||m?(c=["MESSAGES","PHOTOS","DOCUMENTS"],this.searchExtractionsEnabled&&c.push("EXTRACTIONS"),this.searchResultsLinksEnabled&&c.push("LINKS")):(c=["MESSAGES"],D.enabled("searchExtractionsKeywords")&&this.searchExtractionsEnabled&&c.push("EXTRACTIONS")),m?(b=this.isForceUser?["FROM","TO","ALL"]:[d(a.defaultFilter)],a.emailAddresses?h.contentId=o.map(a.emailAddresses||[],function(a){return"smtp:"+a}).join(","):a.serviceId&&(h.contentId="x:"+a.serviceId)):(c.push("PEOPLE"),b=["WITH_KEYWORD"]),c.forEach(function(a){b.forEach(function(b){s.push(a+"_"+b)})}),h.expand=s.join(","),e=r.appendToUrl(e,h),n.get(e,t.join(""),q).then(p,p,p)},l.prototype.getSuggestions=function(a){var b,c,d=this.bcHost+"/v2/suggestions?",e=this.getDefaultUrlParams(),f=function(b){return m.normalizeResponse(b,c,a.suggestionsCache)};return c=m.generateKey({query:a.query,email:a.accountemail}),(b=m.getDataFromCache(a.suggestionsCache,c))?y.resolve({metaData:{fromCache:!0},data:b}):(e.ymreqid=a.reqId,e.query=a.query,""!==a.accountemail&&(e.accountemail=a.accountemail),a.fechnpsy&&(e.fechnpsy=a.fechnpsy),d=r.appendToUrl(d,e),n.get(d).then(f,f))},l.prototype.searchItems=function(a){var b,c=this.getDefaultUrlParams(),d=function(a){var b,c={metaData:e(a),data:{},error:{}};try{b=JSON.parse(a.text)}catch(a){}return!b||!b.items||a.status<200||a.status>=300?(c.error={status:a.status,message:a.text},c):(c.data={items:j(b.items),offset:(b.items||[]).length?b.offset:void 0},c)};return b=r.appendToUrl(a.url,c),n.get(b).then(d,d)},l.prototype.batch=function(a,b){var c,d=this.bcHost+"/v2/batch?"+a.url,f=this.getDefaultUrlParams(),g={headers:{"Content-Type":"text/plain; charset=utf-8"}},h=function(a){var b={metaData:e(a),data:{},error:{}},c=p.parse(a.text,0);return!c.data||a.status<200||a.status>=300?(b.error={status:a.status,message:a.text},b):(b.data=c.data,b)};for(d=r.appendToUrl(d,f),c=0;c<b.length;c++)b[c].url=b[c].url+"&mailboxid="+this.mailboxId;return n.post(d,b,g).then(h)},l.prototype.getShareableLink=function(a){var b="/v2/items/{id}/shareableLink",c=this.getDefaultUrlParams(),d=this.bcHost+b.replace("{id}",encodeURIComponent(a.id)),e=function(a){var b;try{b=JSON.parse(a.text)}catch(a){}return!b||!b.shareableLink||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return d=r.appendToUrl(d,c),n.get(d).then(e,e)},l.prototype.hideItems=function(a,b){var c=this.bcHost+"/v2/items/hide",d=this.getDefaultUrlParams(),e={headers:{"Content-Type":"application/json"}},f=function(a){return a},g={itemIds:a};return o.merge(d,b),c=r.appendToUrl(c,d),n.post(c,g,e).then(f)},l.prototype.getExternalAccounts=function(a){var b=this.bcHost+"/v2/contentProviders",c=this.getDefaultUrlParams(),d=function(a){var b;try{b=JSON.parse(a.text)}catch(a){}return!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return a&&(b+="/"+a),b=r.appendToUrl(b,c),n.get(b).then(d)},l.prototype.disconnectExternalAccount=function(a){var b="/v2/contentProviders/"+encodeURIComponent(a)+"/remove",c=this.bcHost+b,d=this.getDefaultUrlParams(),e={headers:{"Content-Type":"application/json"}},f=function(a){var b;try{b=JSON.parse(a.text)}catch(a){}return!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return c=r.appendToUrl(c,d),n.post(c,null,e).then(f)},l.prototype.connectExternalAccount=function(a,b){var c="/v2/contentProviders/"+encodeURIComponent(a),d=this.bcHost+c,e=this.getDefaultUrlParams(),f={headers:{"Content-Type":"application/json"}},g=function(a){var b;try{b=JSON.parse(a.text)}catch(a){}return!b||a.status<200||a.status>=300?{error:a.text,status:a.status}:{data:b,status:a.status}};return b=b||{},d=r.appendToUrl(d,e),n.post(d,b,f).then(g)},l.prototype._test_={getMetaData:e,createBootcampFilter:d,createBootcampOrder:f,isSRPMainChunk:g,normalizeContentType:h,normalizeFilter:i,normalizeItems:j,normalizeSearchResponse:k,suggestionsUtils:m},b.exports=l},{"./BootcampResponseParser":10,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash",timeUtils:"timeUtils"}],BootcampAPIUtilsV3:[function(a,b,c){"use strict";function d(a){return({keyword:"WITH_KEYWORD"}[a]||a).toUpperCase()}function e(a){return{url:s.getValue(a,["url"],!1),xTiming:s.getValue(a,["resHeaders","xTiming"],!1),status:a.status,duration:s.getValue(a,["elapsedTime"])}}function f(a){var b="time",c=a.sortType,d=a.sortOrder,e=E.enabled("searchHeroSort");switch(c){case x.MSG_SORT_TYPE_DATE:b="down"===(d||x.MSG_SORT_ORDER_DOWN)?e?"hero":"time":"time asc";break;case x.MSG_SORT_TYPE_ATTACHMENT:b="attachment";break;case x.MSG_SORT_TYPE_RELEVANCE:b="score"}return b}function g(a,b,c,e){var f=s.getValue(a,"response.srpType"),g=s.getValue(e,"content","");switch(f){case"DEFAULT_SRP":if(e.blockType===w.MESSAGES&&"WITH_KEYWORD"===e.filter)return!0;break;case"MAIN_AND_RELATED":if((g.items||[]).length>0)return!0;break;case"PERSON_SRP":case"people":if(e.blockType===w.MESSAGES)if(c){if(e.filter===d(b)&&(g.items||[]).length>0)return!0}else if(e.filter===d(b))return!0;break;default:if(e.blockType===w.MESSAGES)return!0}return!1}function h(a){return({MIXED:"web"}[a]||a).toLowerCase()}function i(a){return({WITH_KEYWORD:"keyword"}[a]||a||"").toLowerCase()}function j(a){var b=y.context.getStore(z);return a.forEach(function(a){var c;void 0!==a.folderNumber||void 0!==a.folderId?(c=b.findByIndex(a.folderNumber),a.fid=s.getValue(c,["folderInfo","fid"],a.folderId)):void 0!==a.mid&&(a.fid="Inbox"),"MESSAGE"===a.itemType&&(a.mid=a.mid||a.id.slice(2),a.id=a.mid),a.creationDate>21459168e5&&(a.creationDate/=1e3)}),a}function k(a,b,c){var d,e,f=q.find(a,{blockType:"MESSAGES",filter:b}),g=q.find(a,{blockType:"MESSAGES",filter:c}),h=[],i=null;if(f&&g){for(e=0;e<f.content.items.length;e++)f.content.items[e].isHero=!0,h.push(f.content.items[e]);for(e=0;e<g.content.items.length;e++)h.push(g.content.items[e]);d={blockType:"MESSAGES",content:{cursor:g.content.cursor,extendUrl:g.content.extendUrl,items:h,queryResponse:g.content.queryResponse,totalHits:g.content.totalHits},filter:c,status:g.status,title:"Hero Results",isHero:!0},i=[d]}return i}function l(a,b){var c,d={metaData:e(a),data:{},error:{}},f=!1,l=!1,m=r.parse(a.text,0);return d.metaData.searchType=b.searchType,d.metaData.ymreqid=b.ymreqid||"",!m.data||a.status<200||a.status>=300?(d.error={status:a.status,message:a.text},d):(m.data.forEach(function(e){var m,n,o,p,q,r=s.getValue(e,"response.verticals",!1),t=s.getValue(r,[0,"contentBlocks"],[]),u=["TO","FROM","ALL"];!G||b.isSmartSearch||b.isSubjectSearch||(q=k(t,"WITH_KEYWORD_RELEVANCE","WITH_KEYWORD"))&&(t=q),H&&u.forEach(function(a){(q=k(t,a+"_WITH_RELEVANCE",a))&&(t=q)}),t.forEach(function(k){if(200!==e.status||!k)return 401===e.status&&(f=!0),o=h(s.getValue(k,"blockType")),p=i(s.getValue(k,"filter")),m=s.getValue(e,"response.message",""),void(o&&p&&(d.error[o]||(d.error[o]={}),d.error[o][p]={status:e.status,message:m}));n=s.getValue(k,"content",""),o=h(s.getValue(k,["content","contentType"],s.getValue(k,"blockType"))),p=i(s.getValue(k,"filter")||"WITH_KEYWORD"),o&&(d.data[o]||(d.data[o]={}),d.data[o][p]={totalHits:n.totalHits,offset:(n.items||[]).length?n.cursor:void 0,url:s.getValue(n,"extendUrl",""),items:j(n.items||[]),spellCorrection:s.getValue(k,"content.suggestedWords",null),resultsFromTrash:s.getValue(n,"resultsFromTrash",null),queryResponse:s.getValue(n,"queryResponse",null)},200===a.status&&o.toUpperCase()===w.MESSAGES&&p===b.defaultFilter&&(c={contentType:o,filter:b.defaultFilter,isEmpty:(n.items||[]).length<=0}),l||(l=g(e,b.defaultFilter,b.isForceUser,k))&&(d.metaData.hasMain=!0,d.metaData.main={contentType:o,filter:p,isEmpty:(n.items||[]).length<=0}))})}),200===a.status&&!d.metaData.hasMain&&c&&(d.metaData.hasMain=!0,d.metaData.main=c,"people"===b.searchType&&s.getValue(d,["metaData","main","isEmpty"],!1)&&s.getValue(d,["data",c.contentType,"all","items"],[]).length>0&&(d.metaData.main.filter="all",d.metaData.main.isEmpty=!1)),d.metaData.reAuthenticate=f,d)}function m(a){this.wssid=a.wssid,this.mailboxId=a.mailboxId,this.searchGDocsEnabled=a.searchGDocsEnabled,this.searchInTrashEnabled=a.searchInTrashEnabled,this.hasMultipleAccounts=a.hasMultipleAccounts,this.bucketId=a.bucketId,this.isForceUser=a.isForceUser,this.clientId=a.clientId||C,this.bcHost=a.bcHost||"https://prod1psearch.mail.yahoo.com"}var n,o,m,p=a("IO"),q=a("lodash"),r=a("./BootcampResponseParser"),s=a("ObjectUtils"),t=a("Utils"),u=a("StringUtils"),v=a("GlobalConstants"),w=a("SearchConstants"),x=a("UserSettingsConstants"),y=a("AppDispatcher"),z=a("FolderStore"),A=a("EnhancedPromise"),B=a("timeUtils").getTimezone(),C="mailsearch",D=yui.common.Utils,E=D.features,F=D.settings,G=E.enabled("searchHeroResults"),H=E.enabled("searchHeroResultsPeopleWithKeyword");n={SUGG_CACHE_MAX_SIZE:500,SUGG_CACHE_MAX_AGE:3e5,generateKey:function(a){return JSON.stringify(a)},buildCache:function(a,b,c){var d={},e=q.now();return q.size(a)>n.SUGG_CACHE_MAX_SIZE&&(q.each(a,function(a,b){e-a.timestamp<n.SUGG_CACHE_MAX_AGE&&(d[b]=a)}),a=d),a[b]||(a[b]={timestamp:e,data:c}),a},getDataFromCache:function(a,b){if(a[b]){if(q.now()-a[b].timestamp<n.SUGG_CACHE_MAX_AGE)return a[b].data;delete a[b]}},normalizeResponse:function(a,b,c){var d={metaData:e(a),data:{},error:{}},f=[],g=r.parse(a.text,0);return(!g.data||a.status<200||a.status>=300)&&(d.error={status:a.status,message:a.text}),f=s.getValue(g.data[0],["response","suggestions"],[]).filter(function(a){return"PEOPLE"===a.intent}).map(function(a){var b,c=q.values(a.entities)[0];if(c)return b=c.imageUrl?u.addUrlParameters(c.imageUrl,{spsize:"50X50",badge:!0,fallback_url:v.FALLBACK_XOBNI_IMG_URL}):v.FALLBACK_XOBNI_IMG_URL,q.merge({},c,{imageUrl:b,displayStr:c.name,intent:a.intent,emailAddresses:c.emailIds})}),n.buildCache(c,b,f),d.data=f,d}},o={normalizeResponse:function(a){var b=[],c={},d=a.text||"[]",e=[];try{e=JSON.parse(d),e.map(function(a){return{query:q.unescape(a.query),count:a.frequency}}).forEach(function(a){var d,e=a.query||"";"string"==typeof e&&e.trim()&&(d=c[e],void 0===d&&(d=b.length,c[e]=d,b.push({query:e,count:0})),b[d].count+=a.count)})}catch(a){}return b}},m.CONSTANTS={PEOPLE_SEARCHTYPE:"people",KEYWORD_SEARCHTYPE:"keyword"},m.CONTENT_TYPES=["messages","images","documents","web","people","cards"],m.getSearchType=function(a){var b=m.CONSTANTS;return s.getValue(a,["emailAddresses"],!1)?b.PEOPLE_SEARCHTYPE:b.KEYWORD_SEARCHTYPE},m.prototype.getDefaultUrlParams=function(){var a={timezone:B,clientid:this.clientId,mailboxid:this.mailboxId,appid:"YahooMailNeo"},b=D.getMailBoxQueryParams&&D.getMailBoxQueryParams()||{};return this.searchInTrashEnabled&&(a.searchInTrash=1),q.merge(a,b),a},m.prototype.search=function(a){var b=this.bcHost+"/v3/srp?",c=m.CONSTANTS,d=this.getDefaultUrlParams(),e=m.getSearchType(a),g=this.isForceUser,h=e===c.PEOPLE_SEARCHTYPE,i=function(b){return l(b,{defaultFilter:a.defaultFilter,searchType:e,isForceUser:g,ymreqid:a.reqId,sortType:s.getValue(a,["sortInfo","sortType"],""),isSubjectSearch:a.isSubjectSearch,isSmartSearch:a.isSmartSearch})},j={headers:{"Content-Type":"application/json"}},k=[],n=[];return d.ui=1,d.ymreqid=a.reqId,d.bucketid=this.bucketId,d.order=f(a.sortInfo),d.query=[].concat(a.query,a.refinements||[]).join(" "),d.limit=a.limit,k=["ALL"],"hero"===d.order&&(d.herocount=F.value("searchHeroCount")||3),a.currentEmail&&(d.accountemail="smtp:"+a.currentEmail),a.folders&&a.folders.length?d.folders=a.folders.join(","):a.accountIds&&a.accountIds.length&&(d.accountIds=a.accountIds.join(",")),E.enabled("useTripodIndex")&&(d.useTripod=!0),this.isForceUser||(d.vespaUser=!0),d.multipart=!1,h&&(a.emailAddresses?d.contentId=q.map(a.emailAddresses||[],function(a){return"smtp:"+a}).join(","):a.serviceId&&(d.contentId="x:"+a.serviceId),d.n=a.name),d.expand=k.join(","),b=t.appendToUrl(b,d),p.get(b,n.join(""),j).then(i,i,i)},m.prototype.getSuggestions=function(a){var b,c,d=this.bcHost+"/v3/suggestions?",e=this.getDefaultUrlParams(),f=function(b){return n.normalizeResponse(b,c,a.suggestionsCache)};return c=n.generateKey({query:a.query,email:a.accountemail}),(b=n.getDataFromCache(a.suggestionsCache,c))?A.resolve({metaData:{fromCache:!0},data:b}):(e.ymreqid=a.reqId,e.query=a.query,e.multipart=!1,""!==a.accountemail&&(e.accountemail=a.accountemail),a.fechnpsy&&(e.fechnpsy=a.fechnpsy),d=t.appendToUrl(d,e),p.get(d).then(f,f))},m.prototype.getRecentSearches=function(){var a=this.bcHost+"/v3/recentSearches?",b=function(a){return o.normalizeResponse(a)},c=D.getMailBoxQueryParams&&D.getMailBoxQueryParams()||{};return a=t.appendToUrl(a,c),p.get(a).then(b,b)},m.prototype.searchItems=function(a){var b,c=this.getDefaultUrlParams(),d=function(a){var b,c={metaData:e(a),data:{},error:{}};try{b=JSON.parse(a.text)}catch(a){}return!b||!b.items||a.status<200||a.status>=300?(c.error={status:a.status,message:a.text},c):(c.data={items:j(b.items),offset:(b.items||[]).length?b.cursor:void 0},c)};return b=t.appendToUrl(a.url,c),p.get(b).then(d,d)},m.prototype._test_={getMetaData:e,createBootcampFilter:d,createBootcampOrder:f,isSRPMainChunk:g,normalizeContentType:h,normalizeFilter:i,normalizeItems:j,normalizeSearchResponse:l,mergeRelevantAndRecentBlocks:k,suggestionsUtils:n,recentSearchesUtils:o},b.exports=m},{"./BootcampResponseParser":10,AppDispatcher:"AppDispatcher",EnhancedPromise:"EnhancedPromise",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash",timeUtils:"timeUtils"}],Checkbox:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"Checkbox",propTypes:{disabled:e.PropTypes.bool,isMixed:e.PropTypes.bool,isSelected:e.PropTypes.bool,onChange:e.PropTypes.func,title:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{disabled:!1,isMixed:!1,isSelected:!1,onChange:function(){},title:""}},render:function(){var a=e.addons.classSet({icon:!0,"ui-checkbox":!0,"icon-checkbox-mixed":this.props.isMixed,"icon-checkbox-selected":this.props.isSelected,"icon-checkbox-empty":!(this.props.isMixed||this.props.isSelected)});return e.createElement("span",{tabIndex:this.props.tabIndex||"0",role:"checkbox",className:a,onChange:this.props.onChange,onClick:this.handleSelectionChange,onKeyDown:this.handleSelectionChange,title:this.props.title,"aria-checked":this.getAriaCheckedStatus(),"aria-label":this.props.ariaLabel||this.props.title,disabled:this.props.disabled})},getAriaCheckedStatus:function(){return this.props.isSelected?"true":this.props.isMixed?"mixed":"false"},handleSelectionChange:function(a){"click"!==a.type&&" "!==a.key||this.props.disabled||(a.preventDefault(),this.props.onChange(a))}}),b.exports=d},{"react/addons":"react/addons"}],Context:[function(a,b,c){"use strict";var d=a("react/addons");b.exports={contextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,events:d.PropTypes.object},childContextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,events:d.PropTypes.object},getContext:function(){return this.context.getStore&&this.context.executeAction&&this.context.events?this.context:this.props.context},getChildContext:function(){var a=this.getContext();return{executeAction:a.executeAction,getStore:a.getStore,events:a.events}},getStore:function(){var a=this.getContext();return a.getStore.apply(a,arguments)},executeAction:function(){var a=this.getContext();return a.executeAction.apply(a,arguments)}}},{"react/addons":"react/addons"}],CopyFunctionWrapper:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"CopyFunctionWrapper",propTypes:{copyData:e.PropTypes.string,onClick:e.PropTypes.func,setDisabled:e.PropTypes.func,setActive:e.PropTypes.func},getDefaultProps:function(){return{onClick:f.noop}},getInitialState:function(){return{classes:"",disabled:!1}},componentDidMount:function(){this.state.disabled||this._setUpClipBoard()},componentWillUpdate:function(){this.state.disabled&&this._cleanClipBoard()},componentWillUnmount:function(){this._cleanClipBoard()},render:function(){return e.createElement("div",{className:"copy-func-wrapper"},this.props.children)},_setUpClipBoard:function(){var a=this;yui.use("swfdetect","comms-ui-clipboard-plugin",function(b){if(!b.SWFDetect.isFlashVersionAtLeast(10,1,0))return void a.props.setDisabled(!0);a.clipboardTimeoutHandle=setTimeout(function(){var c,d=b.comms.ui.ClipBoard;a.isMounted()&&(c=yui.one(a.getDOMNode()),c.plug(d,{moviepath:NeoConfig.copySwfMoviePath}).on("clipboard:load",function(){this.clipboard._movie.setAttribute("data-preventClose","true"),this.on("mouseenter",function(){this.setAttribute("copy",a.props.copyData)},this),this.clipboard.setEvent("mouseOver",function(){a.props.setActive(!0)}),this.clipboard.setEvent("mouseOut",function(){a.props.setActive(!1)}),a.clipboard=this.clipboard,this.clipboard.setEvent("click",function(){c.simulate("click")},!0)}))},0)})},_cleanClipBoard:function(){var a=this;a.clipboardTimeoutHandle&&clearTimeout(a.clipboardTimeoutHandle),a.clipboard&&a.clipboard.hide()}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],DOMUtils:[function(a,b,c){"use strict";var d,e=a("lodash");d={cloneEvent:function(a){return e.clone(a,!0)},halt:function(a){a.stopPropagation(),a.preventDefault()},isDescendant:function(a,b){for(;b&&b!==a;)b=b.parentNode;return!!b},isTextInput:function(a){return a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName)}},b.exports=d},{lodash:"lodash"}],DateTimeFormatter:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("../../../../artifacts/lang");d={FULL:strings.str_cfg_dateformat_full_human_readable,COMPACT:strings.str_cfg_dateformat_compact,INFORMAL:strings.str_cfg_dateformat_informal,TIME:strings.str_cfg_dateformat_simple_time,FULL_WITH_SHORTMONTH:strings.str_cfg_dateformat_full_short_month,transform:function(a,b){var c=this;return e.template(b,null,{interpolate:/{([\s\S]+?)}/g})({F:c.getFullMonth(a.getMonth()+1),m:c.toDoubleDigit(a.getMonth()+1),M:c.getAbbrMonth(a.getMonth()+1),n:a.getMonth()+1,d:c.toDoubleDigit(a.getDate()),D:c.getAbbrDay(a.getDay()+1),j:a.getDate(),l:c.getFullDay(a.getDay()+1),y:c.toDoubleDigit(a.getYear()%100),Y:a.getFullYear(),g:c.toInformalHours(a.getHours()),G:a.getHours(),i:c.toDoubleDigit(a.getMinutes()),s:c.toDoubleDigit(a.getSeconds()),A:c.getAMPM(a)})},getAMPM:function(a){return a.getHours()>11?f.str_dateformat_PM_l10n:f.str_dateformat_AM_l10n},getFullMonth:function(a){return{1:f.str_month_january,2:f.str_month_february,3:f.str_month_march,4:f.str_month_april,5:f.str_month_may,6:f.str_month_june,7:f.str_month_july,8:f.str_month_august,9:f.str_month_september,10:f.str_month_october,11:f.str_month_november,12:f.str_month_december}[a]},getAbbrMonth:function(a){return{1:f.str_monthabbr_january,2:f.str_monthabbr_february,3:f.str_monthabbr_march,4:f.str_monthabbr_april,5:f.str_monthabbr_may,6:f.str_monthabbr_june,7:f.str_monthabbr_july,8:f.str_monthabbr_august,9:f.str_monthabbr_september,10:f.str_monthabbr_october,11:f.str_monthabbr_november,12:f.str_monthabbr_december}[a]},getFullDay:function(a){return{1:f.str_day_sunday,2:f.str_day_monday,3:f.str_day_tuesday,4:f.str_day_wednesday,5:f.str_day_thursday,6:f.str_day_friday,7:f.str_day_saturday}[a]},getAbbrDay:function(a){return{1:f.str_dayabbr_sunday,2:f.str_dayabbr_monday,3:f.str_dayabbr_tuesday,4:f.str_dayabbr_wednesday,5:f.str_dayabbr_thursday,6:f.str_dayabbr_friday,7:f.str_dayabbr_saturday}[a]},toInformalHours:function(a){return a>12?a-12:a||12},toDoubleDigit:function(a){return String(a>9?a:"0"+a)}},b.exports=d},{"../../../../artifacts/lang":2,lodash:"lodash"}],Dropdown:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("DOMUtils");d=e.createClass({displayName:"Dropdown",propTypes:{closeDropdown:e.PropTypes.func.isRequired,parentNode:e.PropTypes.instanceOf(HTMLElement)},componentDidMount:function(){var a=this;window.addEventListener("mousedown",a.handleCloseEvent,!0),window.addEventListener("keydown",a.handleKeyDown,!0),window.addEventListener("scroll",a.handleCloseEvent,!0),a.mountTime=Date.now()},componentWillUnmount:function(){var a=this;window.removeEventListener("mousedown",a.handleCloseEvent,!0),window.removeEventListener("keydown",a.handleKeyDown,!0),window.removeEventListener("scroll",a.handleCloseEvent,!0)},shouldComponentUpdate:function(a){return!f.isEqual(this.props,a)},render:function(){var a=this,b=a.props;return e.createElement("div",{className:b.className,onClick:b.onClick},b.children)},isToDebounce:function(){return Date.now()-this.mountTime<30},shouldClose:function(a){var b=this,c=b.props,d=a;if(a&&a.getAttribute&&a.getAttribute("data-preventClose"))return!1;for(;d.parentNode;){if(d.classList.contains("ui-onboarding"))return!1;d=d.parentNode}return[c.parentNode,c.anchorNode,b.getDOMNode()].filter(f.identity).every(function(b){return!g.isDescendant(b,a)})},handleCloseEvent:function(a){this.isToDebounce()||a.target&&this.shouldClose(a.target)&&this.props.closeDropdown(a)},handleKeyDown:function(a){27===a.keyCode&&(this.props.closeDropdown(a),a.stopPropagation())}}),b.exports=d},{DOMUtils:"DOMUtils",lodash:"lodash","react/addons":"react/addons"}],EnhancedPromise:[function(a,b,c){
"use strict";var d,e=a("lodash");d=function(a,b){var c=this;c._cancelFn=b,c._chainedPromises=[],c._state="pending",a instanceof Promise?c._promise=a:c._promise=new Promise(function(b,d){c._resolve=function(){c._state="resolved",b.apply(c._promise,arguments)},c._reject=function(){c._state="rejected",d.apply(c._promise,arguments)},a(c._resolve,c._reject,function(a){c._cancelFn=a}),c.canceled&&c.cancel()}),c.cancel=function(){for(var a=this,b=a;b._parent&&!b._parent.canceled;)b=b._parent;b._cancel()},c._cancel=function(){var a;if(c.canceled=!0,c._chainedPromises.forEach(function(a){a.cancel&&a.cancel()}),"pending"===c._state&&c._reject){if(c._cancelFn)try{a=c._cancelFn()}catch(a){}c._reject(a)}},c.then=function(a,b,e){var f,g=function(a,b){var c=a(b);return c instanceof d&&f._chainedPromises.push(c),c};return f=new d(c._promise.then(a?g.bind(null,a):null,b?g.bind(null,b):null)),f._parent=c,f._onProgress=e,c._chainedPromises.push(f),f},c.progress=function(){var a=arguments;c._chainedPromises.forEach(function(b){var c=a;b._onProgress&&(c=b._onProgress.apply(b,a)),void 0!==c&&b.progress.apply(b,[c])})}},d.prototype=Object.create(Promise.prototype),d.prototype.constructor=d,d.resolve=function(a){return new d(function(b){b(a)},e.noop)},d.all=function(a){var b=new d(Promise.all(a));return b._chainedPromises=a,b},b.exports=d},{lodash:"lodash"}],ExtractionUtils:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("ObjectUtils");d={hasValidExtractionCards:function(a,b){var c=b?f.getValue(a,["data","cards","keyword","items"],null):f.getValue(a,["data","extractions","keyword","items"],null);return void 0!==e.find(c||[],{mimeType:"application/vnd.yahoo.purchase"})},hasValidExtractions:function(a,b){return(this.getValidExtractions(a,b)||[]).length>0},getValidExtractions:function(a,b){var c="people"===b?f.getValue(a,["data","cards","from","items"],null):f.getValue(a,["data","cards","keyword","items"],null);return e.filter(c||[],{mimeType:"application/vnd.yahoo.purchase"})}},b.exports=d},{ObjectUtils:"ObjectUtils",lodash:"lodash"}],FolderStore:[function(a,b,c){"use strict";function d(a){this.dispatcher=a,yui.on("ds:folder:change",this.regenerateCache,this),yui.on("ds:account:add",this.regenerateCache,this),yui.on("ds:account:change",this.regenerateCache,this),yui.on("ds:account:remove",this.regenerateCache,this),this.setMaxListeners(256)}function e(a){return k?parseInt(a.id,10):a.folderInfo.index}var f=a("lodash"),g=a("events").EventEmitter,h=a("SearchConstants"),i=a("../../../artifacts/lang"),j=a("ObjectUtils"),k=NeoConfig.imapIn,l=yui.mail.model.DataStore.Folders;d.prototype={constructor:d,sortSystemFolderComparator:function(a,b){var c,d,e=h.SYSTEM_FOLDER_INDEX;return k?(c=j.getValue(a,"types.0",""),d=j.getValue(b,"types.0","")):(c=j.getValue(a,"folderInfo.fid",""),d=j.getValue(b,"folderInfo.fid","")),e[c]-e[d]},getMoveMenuSystemFolderIndex:function(a){return h.MOVE_MENU_SYSTEM_FOLDERS_INDEX[a]},sortMoveMenuSystemFolder:function(a,b){return a.sortIndex-b.sortIndex},sortByFolderNameComparator:function(a,b){var c,d=j.getValue(a,"folderInfo.name",""),e=j.getValue(b,"folderInfo.name",""),f=0,g=0;for(d=d.split("/"),e=e.split("/"),c=d.length<e.length?d.length:e.length;g<c&&0===f;g++)0===(f=d[g].toLowerCase().localeCompare(e[g].toLowerCase()))&&(f=d[g].localeCompare(e[g]));return f||d.length-e.length},getCache:function(){return this.cache||this.fetch()},all:function(){return this.getCache()},fetch:function(){return this.cache=l.get().filter(this.isNotInvisible)},regenerateCache:function(){this.fetch(),this.emit("change")},isNotInvisible:function(a){return a&&"I"!==a.type},isSearchable:function(a){return k?!f.find(a.types,function(a){return-1!==h.UNSEARCHABLE_TYPES.indexOf(a)}):-1===h.UNSEARCHABLE_FIDS.indexOf(a.folderInfo.fid)},isMoveable:function(a){return k?!f.find(a.types,function(a){return-1!==h.UNMOVEABLE_TYPES.indexOf(a)}):-1===h.UNMOVEABLE_FIDS.indexOf(a.folderInfo.fid)},isSystem:function(a){return a.isSystem},isUserCreated:function(a){return!a.isSystem},getSystemFolders:function(){return this.getCache().filter(this.isSystem)},getSearchableSystemFolders:function(){return this.getSystemFolders().filter(this.isSearchable).sort(function(a,b){return a.folderInfo.index-b.folderInfo.index})},getMoveableSystemFolders:function(){return this.getSystemFolders().filter(this.isMoveable)},getMoveableSystemFoldersInOrder:function(){return this.getMoveableSystemFolders().sort(function(a,b){return a.folderInfo.index-b.folderInfo.index})},getMoveableSystemFoldersByAccount:function(a){return f.chain(this.getMoveableFoldersByAccount(a)).filter(function(a){return a.isSystem}).sortBy(e).value()},getMoveableUserFoldersByAccount:function(a){return f.chain(this.getMoveableFoldersByAccount(a)).filter(function(a){return!a.isSystem}).value()},getSearchableUserFolders:function(){return this.getUserFolders().filter(this.isSearchable)},getUserFolders:function(){return this.getCache().filter(this.isUserCreated)},getSearchableFolders:function(){return f.chain(this.getCache()).filter(this.isSearchable).sortBy(e).value()},findByFolderId:function(a){return f.find(this.all(),function(b){return b.id===a})},findByFID:function(a){return f.find(this.all(),function(b){return b.folderInfo.fid===a})},findByName:function(a){return f.find(this.all(),function(b){return b.folderInfo.name===a})},findSystemFolderByType:function(a,b){return f.find(this.all(),function(c){return(!b||b===c.acctId)&&j.getValue(c,"types.0","")===a})},findByIndex:function(a){return f.find(this.all(),function(b){return k?b.id&&b.id.toString()===a.toString():b.folderInfo.index.toString()===a.toString()})},getPrimaryFolderByAccount:function(a){return l.getPrimaryFolderByAccount(a)},getFoldersByAccount:function(a){return f.filter(this.getCache(),function(b){return b.acctId===a})},getSearchableSystemFoldersByAccount:function(a){return f.filter(this.getSearchableFoldersByAccount(a),this.isSystem)},getSearchableUserFoldersByAccount:function(a){return f.filter(this.getSearchableFoldersByAccount(a),this.isUserCreated)},getSearchableFoldersByAccount:function(a){return f.filter(this.getFoldersByAccount(a),this.isSearchable)},getMoveableFoldersByAccount:function(a){return f.filter(this.getFoldersByAccount(a),this.isMoveable)},getFoldersByType:function(a){return f.filter(this.getCache(),function(b){return-1!==b.types.indexOf(a)})},getFoldersByTypeAndAccount:function(a,b){return f.filter(this.getCache(),function(c){return-1!==c.types.indexOf(a)&&c.acctId===b})},getLocalizedFolderName:function(a){var b=this.findByFID(a);if(!b)return a;if(j.getValue(b,"types",[]).indexOf("EXTERNAL_ALL")>-1)return i.str_folder_allmail;switch(b.folderInfo.fid){case"Inbox":return i.str_folder_inbox;case"Draft":return i.str_folder_drafts;case"Sent":return i.str_folder_sent;case"%40B%40Bulk":return i.str_folder_spam;case"Trash":return i.str_folder_trash;default:return b.folderInfo.name}},getLocalizedFolderNameById:function(a){var b=this.findByIndex(a),c=j.getValue(b,["types",0]);if(j.getValue(b,"types",[]).indexOf("EXTERNAL_ALL")>-1)return i.str_folder_allmail;switch(c){case"INBOX":return i.str_folder_inbox;case"DRAFT":return i.str_folder_drafts;case"SENT":return i.str_folder_sent;case"BULK":return i.str_folder_spam;case"TRASH":return i.str_folder_trash}return this.getLocalizedFolderName(b.folderInfo.fid)}},d.decode=function(a){return window.decodeURIComponent(window.unescape(a))},d.normalizeFid=function(a){var b=a.toLowerCase(),c=this.decode(b);return"@c@chats"===c?b="chats":"@b@bulk"===c&&(b="spam"),b},d.storeName="FolderStore",f.mixin(d.prototype,g.prototype),b.exports=d},{"../../../artifacts/lang":2,ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",events:"events",lodash:"lodash"}],GlobalActions:[function(a,b,c){"use strict";var d,e=a("GlobalConstants");d={saveSmartView:function(a,b){a.dispatch(e.SAVE_SEARCH,b)},smartviewsUpdated:function(a,b){a.dispatch(e.SMARTVIEWS_UPDATE,b)},smartviewsLoaded:function(a,b){a.dispatch(e.SMARTVIEWS_LOADED,b)},showNotification:function(a,b){a.dispatch(e.NOTIFICATION_SHOW,b)},showOnboarding:function(a,b){a.dispatch(e.ONBOARDING_SHOW,b)},dismissOnboarding:function(a,b){a.dispatch(e.METADATA_CHANGE,b),a.dispatch(e.ONBOARDING_DISMISSED,b)},setMetaData:function(a,b){a.dispatch(e.METADATA_CHANGE,b)},changeSettings:function(a,b){a.dispatch(e.SETTINGS_CHANGE,b)},searchWindowResize:function(a,b){a.dispatch(e.SEARCH_WINDOW_RESIZE,b)},searchTabActive:function(a,b){a.dispatch(e.SEARCH_TAB_ACTIVE,b)},searchTabInactive:function(a,b){a.dispatch(e.SEARCH_TAB_INACTIVE,b)},searchTabReload:function(a,b){a.dispatch(e.SEARCH_TAB_RELOAD,b)},searchTabClose:function(a,b){a.dispatch(e.SEARCH_TAB_CLOSE,b)},appChange:function(a,b){a.dispatch(e.APP_CHANGE,b)},setTabDirty:function(a,b){a.dispatch(e.SET_TAB_DIRTY,b)}},b.exports=d},{GlobalConstants:"GlobalConstants"}],GlobalConstants:[function(a,b,c){"use strict";var d;d={DEFAULT:"default",NOTIFICATION_SHOW:"NOTIFICATION_SHOW",ONBOARDING_SHOW:"ONBOARDING_SHOW",ONBOARDING_DISMISSED:"ONBOARDING_DISMISSED",METADATA_CHANGE:"METADATA_CHANGE",SETTINGS_CHANGE:"SETTINGS_CHANGE",SEARCH_WINDOW_RESIZE:"SEARCH_WINDOW_RESIZE",SAVE_SEARCH:"SAVE_SEARCH",SMARTVIEWS_LOADED:"SMARTVIEWS_LOADED",SMARTVIEWS_UPDATE:"SMARTVIEWS_UPDATE",SEARCH_TAB_ACTIVE:"SEARCH_TAB_ACTIVE",SEARCH_TAB_RELOAD:"SEARCH_TAB_RELOAD",SEARCH_TAB_INACTIVE:"SEARCH_TAB_INACTIVE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",APP_CHANGE:"APP_CHANGE",SET_TAB_DIRTY:"SET_TAB_DIRTY",MAIL_APP:"MAIL_APP",CALENDAR_APP:"CALENDAR_APP",CONTACTS_APP:"CONTACTS_APP",NOTEPAD_APP:"NOTEPAD_APP",FALLBACK_XOBNI_IMG_URL:"https://s1.yimg.com/dh/ap/social/profile/profile_a48.png"},b.exports=d},{}],IO:[function(a,b,c){"use strict";function d(a){var b=m.now(),c=new l(function(e,f,g){var h,i=new XMLHttpRequest,j={},k=!1;i.onreadystatechange=function(){var g,l,p,q=i.readyState,r=m.now()-b;if(4===q)if(k=!0,n.getValue(i,"responseURL",!1)&&i.responseURL.match(/\/v2\//)&&(j.xTiming=i.getResponseHeader("x-timing")),h&&clearTimeout(h),i.status>=200&&i.status<300)m.defer(function(){e({text:i.responseText,status:i.status,url:i.responseURL,resHeaders:j,elapsedTime:r})},1);else{try{l=JSON.parse(i.responseText)}catch(a){}if(403===i.status){if(l&&(g=n.getValue(l,"wssid")))return NeoConfig.wssid=g,yui.common.net.SessionMgr.setWssid(g),a.url=a.url.replace(/wssid=[^&]+/,"wssid="+g),void d(a).then(e,f)}else if(401===i.status)return yui.once("net:reloginSuccessful",function(){d(a).then(e,f)}),void yui.common.net.Error.simpleRelogin();if(n.getValue(l,["error","code"],!1)){try{p=JSON.parse(a.data)}catch(a){}o.statTAE({method:n.getValue(p,"method",""),ymreqid:n.getValue(a,"ymreqid",""),wssid:n.getValue(NeoConfig,"wssid","")},{error:l.error,status:i.status})}f({text:i.responseText,url:i.responseURL,resHeaders:j,status:i.status,elapsedTime:r})}else 3===q&&n.getValue(a,["options","enableStream"],!0)&&m.defer(function(){k||c.progress({text:i.responseText,url:i.responseURL,status:206,resHeaders:j,elapsedTime:r})},1)},i.open(a.method,a.url,!0),Object.keys(a.options).forEach(function(b){var c=a.options[b];"timeout"===b?void 0===i.timeout?h=setTimeout(function(){i.abort(),f({text:"timeout",status:801})},c):(i.timeout=c,i.ontimeout=function(){f({text:"timeout",status:801})}):"headers"===b?Object.keys(c).forEach(function(a){i.setRequestHeader(a,c[a])}):i[b]=c});try{a.cors&&(i.withCredentials=!0),"POST"!==a.method||a.data||(a.data=""),i.send(a.data)}catch(a){f({text:a.message,status:802})}g(function(){return i.abort(),{text:"canceled",status:800}})});return c}function e(a){var b={id:"BatchWrapper",uri:a.url,method:a.method};return(a.data||"POST"===a.method)&&(b.payload=a.data||"",b.payloadType="embedded"),b}function f(a){var b,c,d=n.getValue(yui,["common","Utils","settings"]),e=d&&d.value&&d.value("appid","YahooMailNeo")||"YahooMailNeo";return-1===a.indexOf("wssid=")&&(b=-1===a.indexOf("?")?"?":"&",a+=b+"wssid="+NeoConfig.wssid),-1===a.indexOf("ymreqid=")&&(c=yui.common.net.Session.genReqID().toString(),a+="&ymreqid="+c),-1===a.indexOf("appid=")&&(a+="&appid="+e),-1===a.indexOf("bucketid=")&&NeoConfig.expBucketId&&(a+="&bucketid="+NeoConfig.expBucketId),{url:a,ymreqid:c}}function g(a){var b=new l(function(c,d,e){yui.use("tictac-base-batch-transport",function(f){var g=f.Tictac.base.BatchTransport.send({requests:a},{success:function(a,b,d){c({isBatch:!0,response:d})},fail:function(a,b){d({isBatch:!0,error:b})},progress:function(a,c){b.progress({isBatch:!0,error:c})}},null,"&ymreqid="+yui.common.net.Session.genReqID());e&&g&&g.abort&&e(g.abort)})});return b}function h(a){var b,c,h=window.location.protocol+"\\/\\/"+window.location.hostname,i=new XMLHttpRequest,j=!1,k=/^http(s)?:\/\//i,l=a.options.crossDomainWithoutCredential,m=f(a.url);return a.url=m.url,a.ymreqid=m.ymreqid,b=a.url,k.test(b)&&(window.location.port&&(h+=":"+window.location.port),h+="($|[/?#])",c=new RegExp(h,"i"),c.test(b)||l||(j=!0,void 0!==i.withCredentials&&(a.cors=!0))),j&&!a.cors?g([e(a)]):d(a)}function i(a,b,c){return c=c||{},"object"===(void 0===b?"undefined":k(b))&&(b=JSON.stringify(b),c.headers=c.headers||{},c.headers["Content-Type"]||(c.headers["Content-Type"]="application/json")),h({method:"POST",url:a,data:b,options:c})}function j(a,b){return h({method:"GET",url:a,options:b||{}})}var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l=a("EnhancedPromise"),m=a("lodash"),n=a("ObjectUtils"),o=a("StatService");b.exports={get:j,post:i,sendBatch:g}},{EnhancedPromise:"EnhancedPromise",ObjectUtils:"ObjectUtils",StatService:"StatService",lodash:"lodash"}],ListItem:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"ListItem",propTypes:{id:e.PropTypes.any.isRequired,isHero:e.PropTypes.bool,onClick:e.PropTypes.func.isRequired,onActive:e.PropTypes.func,onContextMenu:e.PropTypes.func},getDefaultProps:function(){return{onContextMenu:f.noop,isHero:!1}},render:function(){var a,b=this,c=b.props,d={active:c.active};return c.className&&(d[c.className]=!0),a=e.addons.classSet(d),e.createElement("li",{style:c.style,title:c.title,tabIndex:c.tabIndex||"-1",key:c.key,role:c.role,className:a,onClick:b.handleItemClick,onContextMenu:b.handleItemContextMenu},c.children)},componentDidUpdate:function(){var a=this;a.props.active&&(a.props.onActive?a.props.onActive(a):a.getDOMNode().focus())},handleItemClick:function(a){var b=this;b.props.onClick(a,b.props.id,b.props.isHero)},handleItemContextMenu:function(a){var b=this;b.props.onContextMenu(a,b.props.id)}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],ListNavigation:[function(a,b,c){"use strict";var d={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(a){var b=this.minIndex||0,c=this.getItems().length-1,d=this.state.selectedIndex+a;return d>c?d=b:d<b&&(d=c),this.setState({selectedIndex:d}),d},navigateDown:function(){return this.navigate(this.DOWN_DIRECTION)},navigateUp:function(){return this.navigate(this.UP_DIRECTION)}};b.exports=d},{}],List:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"List",propTypes:{onKeyDown:e.PropTypes.func},render:function(){var a=this.props;return e.createElement("ul",{className:a.className,tabIndex:a.tabIndex,"data-title":a.dataTitle,onKeyDown:a.onKeyDown,role:a.role},a.children)},focus:function(){this.getDOMNode().focus()}}),b.exports=d},{"react/addons":"react/addons"}],MailPreferences:[function(a,b,c){"use strict";var d;d=function(){return{get:function(a,b){var c=this;return yui.use("mail-persist-meta-data",function(d){var e,f=d.mail.persist.MetaData;f&&b&&(e=c.stringToObject(f.get(a)),b(e))})},set:function(a,b,c){var d=this;return yui.use("mail-persist-meta-data",function(e){var f,g=e.mail.persist.MetaData;a&&void 0!==b&&(f=d.objectToString(b),g.set(a,f),c&&c(e))})},stringToObject:function(a){var b;try{b=JSON.parse(a)}catch(c){b=a}return b},objectToString:function(a){var b;try{b=JSON.stringify(a)}catch(c){b=a}return b}}}(),b.exports=d},{}],MenuButton:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Menu");d=e.createClass({displayName:"MenuButton",propTypes:{disabled:e.PropTypes.bool,label:e.PropTypes.node,title:e.PropTypes.string,showChevron:e.PropTypes.bool,dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"]),onOpen:e.PropTypes.func},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{showChevron:!1}},getInitialState:function(){return{isMenuOpen:!1,menuContentConfig:{}}},componentDidMount:function(){this.setState({node:this.getDOMNode()})},render:function(){var a,b=this,c={"search-menu-button":!0,opened:b.state.isMenuOpen};return c[b.props.className]=!0,a=e.addons.classSet(c),e.createElement("button",{className:a,title:b.props.title,role:"button","aria-haspopup":"true","aria-label":b.props.ariaLabel,disabled:b.props.disabled,onMouseDown:b.handleMouseDown,onKeyDown:b.handleKeyDown},b.props.label,b.renderChevron(),b.renderMenu())},renderChevron:function(){if(this.props.showChevron)return e.createElement("i",{className:"icon icon-chevron-down"})},renderMenu:function(){var a=this.props;if(this.state.isMenuOpen)return e.createElement(f,{anchorNode:this.state.node,closeMenu:this.closeMenu,menuContentConfig:this.state.menuContentConfig,keyboardNavDisabled:a.keyboardNavDisabled,ddClassName:a.ddClassName,dropdownXOrigin:a.dropdownXOrigin,dropdownYOrigin:a.dropdownYOrigin},a.children)},openMenu:function(a){var b=this;b.setState({isMenuOpen:!0,menuContentConfig:a||{}}),b.props.onOpen&&b.props.onOpen()},closeMenu:function(a){var b=this;b.setState({isMenuOpen:!1}),a&&"keydown"===a.type&&b.getDOMNode().focus()},toggleMenuVisibility:function(a){var b=this;b.state.isMenuOpen?b.closeMenu(a):b.openMenu()},handleMouseDown:function(a){this.toggleMenuVisibility(a)},handleKeyDown:function(a){a.key&&"Enter"===a.key?(this.toggleMenuVisibility(a),a.stopPropagation()):a.key&&"ArrowDown"===a.key&&(this.openMenu(),a.stopPropagation())},isMenuOpen:function(){return this.state.isMenuOpen}}),b.exports=d},{Menu:"Menu","react/addons":"react/addons"}],MenuItemGroup:[function(a,b,c){"use strict";var d,e=a("react/addons");d=e.createClass({displayName:"MenuItemGroup",propTypes:{overflow:e.PropTypes.bool,title:e.PropTypes.string,togglable:e.PropTypes.bool,value:e.PropTypes.string},mixins:[e.addons.PureRenderMixin],getDefaultProps:function(){return{overflow:!1,togglable:!1,title:"",value:""}},render:function(){var a,b=this,c=b.props,d={"search-menu-group":!0,"search-menu-togglable":c.togglable,"search-menu-group-overflow":c.overflow};return d[c.className]=c.className,a=e.addons.classSet(d),e.createElement("section",{className:a,title:c.title,key:c["data-key"],"data-value":c.value},b.renderGroupTitle(),b.props.children)},renderGroupTitle:function(){if(this.props.title)return e.createElement("header",{className:"search-menu-group-title"},this.props.title)}}),b.exports=d},{"react/addons":"react/addons"}],MenuItem:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"MenuItem",propTypes:{onClick:e.PropTypes.func.isRequired,className:e.PropTypes.string,selected:e.PropTypes.bool,title:e.PropTypes.string,disabled:e.PropTypes.bool,menuContentConfig:e.PropTypes.object},getInitialState:function(){return{active:!1,disabled:void 0}},getDefaultProps:function(){return{onClick:f.noop,menuContentConfig:{},highlighted:!1}},setDisabled:function(a){this.setState({disabled:a||void 0})},setActive:function(a){this.setState({active:a})},render:function(){var a,b=this,c=b.props,d={"search-menuitem":!0,"menu-active-item":b.state.active,selected:c.selected,highlighted:c.highlighted};return c.className&&(d[c.className]=!0),a=e.addons.classSet(d),e.createElement("div",{className:a,hidden:c.hidden,onClick:c.onClick,"data-value":c.value,"data-disabled":c.disabled||b.state.disabled||void 0,title:c.title,tabIndex:"-1"},e.Children.map(c.children,function(a){return e.isValidElement(a)?e.addons.cloneWithProps(a,{setDisabled:b.setDisabled,setActive:b.setActive,menuContentConfig:b.props.menuContentConfig,closeMenu:b.props.closeMenu}):a}))}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],MenuNavigation:[function(a,b,c){"use strict";var d={UP_DIRECTION:-1,DOWN_DIRECTION:1,navigate:function(a){var b=this,c=b.minIndex||0,d=b.state.menuItemCount-1,e=b.state.focusIndex+a;e>d?e=c:e<c&&(e=d),b.refs[b.itemPrefix+e].getDOMNode().focus(),b.setState({focusIndex:e})},navigateDown:function(){var a=this;a.navigate(a.DOWN_DIRECTION)},navigateUp:function(){var a=this;a.navigate(a.UP_DIRECTION)}};b.exports=d},{}],Menu:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("MenuNavigation"),g=a("BodyDropdown"),h=a("DOMUtils"),i=a("ObjectUtils"),j=e.addons.cloneWithProps;d=e.createClass({displayName:"Menu",propTypes:{closeMenu:e.PropTypes.func.isRequired,dropdownXOrigin:e.PropTypes.oneOf(["left","right"]),dropdownYOrigin:e.PropTypes.oneOf(["top","bottom"]),menuContentConfig:e.PropTypes.object},mixins:[e.addons.PureRenderMixin,f],getDefaultProps:function(){return{ddClassName:"",menuContentConfig:{}}},getInitialState:function(){return{focusIndex:-1,isDropdownOpen:!1,menuItemCount:this.getMenuItemCount(this.props.children)}},componentDidMount:function(){this.props.keyboardNavDisabled||window.addEventListener("keydown",this.handleKeyDown,!0),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollItemIntoView("selected"),this.scrollItemIntoView("highlighted")},componentWillUnmount:function(){this.props.keyboardNavDisabled||window.removeEventListener("keydown",this.handleKeyDown,!0)},componentDidUpdate:function(){this.setState({menuItemCount:this.getMenuItemCount(this.props.children)}),this.props.ddClassName.indexOf("right-folder-dd search-folder-dropdown")>-1&&this.scrollItemIntoView("selected")},scrollItemIntoView:function(a){var b,c,d,e=this;if(a){for(d in e.refs)if(0===d.indexOf(e.itemPrefix)&&i.getValue(e.refs[d],"props."+a,!1)){c=e.refs[d],c=c&&c.getDOMNode();break}if(c){for(b=c.parentElement;b&&b.clientHeight>=b.scrollHeight;)b=b.parentElement;b&&c.offsetTop>=b.clientHeight-100&&(b.scrollTop=c.offsetTop-25)}}},groupPrefix:"group",itemPrefix:"item",render:function(){var a=this,b=a.props,c="search-menu "+a.props.ddClassName;return e.createElement(g,{className:c,anchorNode:b.anchorNode,parentNode:b.parentNode,coordinates:b.coordinates,closeDropdown:b.closeMenu,onClick:b.closeMenu,dropdownXOrigin:b.dropdownXOrigin,dropdownYOrigin:b.dropdownYOrigin},a.addMenuItemRefs(b.children,{itemIndex:-1,groupIndex:-1}))},handleKeyDown:function(a){var b=this;switch(a.keyCode){case 13:-1!==b.state.focusIndex&&(b.refs[b.itemPrefix+b.state.focusIndex].getDOMNode().click(),h.halt(a));break;case 27:b.props.closeMenu(),h.halt(a);break;case 38:b.navigateUp(),h.halt(a);break;case 40:b.navigateDown(),h.halt(a)}},isMenuItemGroup:function(a){return"MenuItemGroup"===a.type.displayName||"MenuItemGroup"===a.props._type},isMenuItem:function(a){return"MenuItem"===a.type.displayName},isEnabled:function(a){return!a.props.disabled},addMenuItemRefs:function(a,b){var c=this;return e.Children.map(a,function(a){var d=c.isMenuItemGroup(a),e=c.isMenuItem(a),f=c.isEnabled(a);return d?(b.groupIndex+=1,j(a,{key:c.groupPrefix+b.groupIndex,ref:c.groupPrefix+b.groupIndex,menuContentConfig:c.props.menuContentConfig,children:c.addMenuItemRefs(a.props.children,b)})):e&&f?(b.itemIndex+=1,j(a,{key:c.itemPrefix+b.itemIndex,ref:c.itemPrefix+b.itemIndex,menuContentConfig:c.props.menuContentConfig,closeMenu:c.props.closeMenu})):e?a:void 0})},getMenuItemCount:function(a){var b=this,c=0;return e.Children.forEach(a,function(a){b.isEnabled(a)&&(b.isMenuItemGroup(a)?c+=b.getMenuItemCount(a.props.children):Array.isArray(a)?c+=b.getMenuItemCount(a):b.isMenuItem(a)&&(c+=1))}),c}}),b.exports=d},{BodyDropdown:"BodyDropdown",DOMUtils:"DOMUtils",MenuNavigation:"MenuNavigation",ObjectUtils:"ObjectUtils","react/addons":"react/addons"}],MessageConstants:[function(a,b,c){"use strict";a("lodash").forEach(["SPAM_TYPE_NORMAL","SPAM_TYPE_NOTMINE","SPAM_TYPE_PHISH","SPAM_TYPE_HACKED","MOVE","MOVE_SUCCESS","MOVE_FAILURE","DELETE","DELETE_SUCCESS","DELETE_FAILURE","MARK_READ","MARK_READ_SUCCESS","MARK_READ_FAILURE","MARK_UNREAD","MARK_UNREAD_SUCCESS","MARK_UNREAD_FAILURE","STAR","STAR_SUCCESS","STAR_FAILURE","UNSTAR","UNSTAR_SUCCESS","UNSTAR_FAILURE","REPORT_SPAM","REPORT_SPAM_SUCCESS","REPORT_SPAM_FAILURE","ARCHIVE","RESTORE","UNSUBSCRIBE","ARCHIVE_SUCCESS","ARCHIVE_FAILURE","PRINT","QUICK_FILTER","SET_ENCODING","UNDO","UNDO_SUCCESS","UNDO_FAILURE","MESSAGES_RESTORED","UPDATE_MESSAGES","UPDATE_CONV","PROGRESS_START","PROGRESS_SUCCESS","PROGRESS_FAILURE","PROGRESS_CANCEL","PROGRESS_UPDATE","REDIRECT_MESSAGE","NOTIFICATION_DESTROYED"],function(a){c[a]=a}),c.SPAM_FID="%40B%40Bulk",c.TRASH_FID="Trash",c.MIN_BULK_SIZE=30,c.FILL_SEARCH_RESULTS=["MOVE_SUCCESS","DELETE_SUCCESS","REPORT_SPAM_SUCCESS","ARCHIVE_SUCCESS"]},{lodash:"lodash"}],ObjectUtils:[function(a,b,c){"use strict";var d=a("lodash"),e=function(){return{getValue:function(a,b,c){var e,f,g,h=d.isString(b)?b.split("."):b;for(f=0,g=h.length;f<g;f++){if(e=h[f],!(d.isObject(a)&&e in a))return c;a=a[e]}return a},setValue:function(a,b,c){var e;d.isString(b)&&(b=b.split(".")),b.length>1?(e=b.shift(),this.setValue(a[e]=d.isObject(a[e])?a[e]:{},b,c)):a[b[0]]=c}}}();b.exports=e},{lodash:"lodash"}],Onboarding:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("Context"),g=a("BodyDropdown"),h=a("GlobalActions"),i=a("./OnboardingText.jsx");d=e.createClass({displayName:"Onboarding",mixins:[f,e.addons.PureRenderMixin],_templates:{OnboardingText:i},propTypes:{templateType:e.PropTypes.string,title:e.PropTypes.node,body:e.PropTypes.node,buttonText:e.PropTypes.node,id:e.PropTypes.string,ddClassName:e.PropTypes.string,metaDataKey:e.PropTypes.string.isRequired},getDefaultProps:function(){return{templateType:"OnboardingText",ddClassName:""}},componentDidMount:function(){var a=this;a._yuiEvents=[],a._yuiEvents.push(yui.once("tabChange",function(){setTimeout(a.dismissOnboarding,0)}),yui.once("tab:title",function(){setTimeout(a.dismissOnboarding,0)}))},componentWillUnmount:function(){this._yuiEvents.forEach(function(a){a.detach()})},render:function(){var a=this,b=a.props,c=b.ddClassName;return e.createElement(g,{className:c,anchorNode:b.anchorNode,parentNode:b.parentNode,coordinates:b.coordinates,dropdownXOrigin:b.dropdownXOrigin,dropdownYOrigin:b.dropdownYOrigin,closeDropdown:a.dismissOnboarding,onClick:a.clickOnboarding},e.createElement(a._templates[b.templateType],b))},dismissOnboarding:function(){var a=this,b={};b[a.props.metaDataKey]=!0,a.executeAction(h.dismissOnboarding,b)},clickOnboarding:function(a){-1!==a.target.className.indexOf("onboarding-btn")&&this.dismissOnboarding()}}),b.exports=d},{"./OnboardingText.jsx":6,BodyDropdown:"BodyDropdown",Context:"Context",GlobalActions:"GlobalActions","react/addons":"react/addons"}],RelativeDateFormatter:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("DateTimeFormatter");d=e.createClass({displayName:"RelativeDateFormatter",propTypes:{className:e.PropTypes.string,template:e.PropTypes.string,timestamp:function(a,b){if(a[b]&&"Invalid Date"===new Date(a[b]).toString())return new Error("Supplied value is an invalid input for Date()")}},mixins:[e.addons.PureRenderMixin],render:function(){var a=this,b=a.props.timestamp?new Date(a.props.timestamp):new Date;return e.createElement("time",{className:a.props.className,dateTime:b.toISOString(),title:a.getFullDateTimeString(b)},a.renderDateTime(b))},renderDateTime:function(a){var b=this;return b.props.template?f.transform(a,b.props.template):b.getRelativeDateTime(a)},getFullDateTimeString:function(a){return f.transform(a,f.FULL_WITH_SHORTMONTH)},getRelativeDateTime:function(a){var b=this;return b.isToday(a)?f.transform(a,f.TIME):b.isThisYear(a)?f.transform(a,f.INFORMAL):f.transform(a,f.COMPACT)},isThisYear:function(a){return(new Date).getFullYear()===a.getFullYear()},isToday:function(a){var b=new Date;return this.isThisYear(a)&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()}}),b.exports=d},{DateTimeFormatter:"DateTimeFormatter","react/addons":"react/addons"}],SearchConstants:[function(a,b,c){"use strict";var d;d={SEARCH_KEYWORD:"SEARCH_KEYWORD",RESET_SUGGESTION:"RESET_SUGGESTION",SET_QUERY:"SET_QUERY",REMOVE_QUERY:"REMOVE_QUERY",CONTACTS_TAB:"CONTACTS_TAB",CALENDAR_TAB:"CALENDAR_TAB",NOTEPAD_TAB:"NOTEPAD_TAB",OTHER_TAB:"OTHER_TAB",SEARCH_TAB:"SEARCH_TAB",FOLDER_TAB:"FOLDER_TAB",ADV_SEARCH_CONTACT_SUGGEST_TO:"ADV_SEARCH_CONTACT_SUGGEST_TO",ADV_SEARCH_CONTACT_SUGGEST_FROM:"ADV_SEARCH_CONTACT_SUGGEST_FROM",CONTACT_SUGGESTIONS_RECEIVED:"CONTACT_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_RECEIVED:"BOOTCAMP_SUGGESTIONS_RECEIVED",BOOTCAMP_SUGGESTIONS_FAILURE:"BOOTCAMP_SUGGESTIONS_FAILURE",WEB_SUGGESTIONS_RECEIVED:"WEB_SUGGESTIONS_RECEIVED",WEB_SUGGESTIONS_FAILURE:"WEB_SUGGESTIONS_FAILURE",SEARCH_START:"SEARCH_START",SEARCH_UPDATE:"SEARCH_UPDATE",SEARCH_SUCCESS:"SEARCH_SUCCESS",SEARCH_FAILURE:"SEARCH_FAILURE",SEARCH_ADS_SUCCESS:"SEARCH_ADS_SUCCESS",CONTACT_PHOTO_SOURCE:"CONTACT_PHOTO_SOURCE",GET_CONTACT_PHOTO_SOURCE:"GET_CONTACT_PHOTO_SOURCE",SEARCH:"SEARCH",LOAD_RECENT_SEARCHES:"LOAD_RECENT_SEARCHES",ADD_RECENT_SEARCH:"ADD_RECENT_SEARCH",REMOVE_RECENT_SEARCH:"REMOVE_RECENT_SEARCH",SEARCH_MESSAGE_VIEW:"SEARCH_MESSAGE_VIEW",SEARCH_PHOTO_VIEW:"SEARCH_PHOTO_VIEW",SEARCH_DOCUMENT_VIEW:"SEARCH_DOCUMENT_VIEW",SEARCH_LINK_VIEW:"SEARCH_LINK_VIEW",FETCH_MORE:"FETCH_MORE",FETCH_MORE_SUCCESS:"FETCH_MORE_SUCCESS",FETCH_MORE_FAILURE:"FETCH_MORE_FAILURE",FILL_SCREEN:"FILL_SCREEN",FILL_SCREEN_SUCCESS:"FILL_SCREEN_SUCCESS",FILL_SCREEN_FAILURE:"FILL_SCREEN_FAILURE",SET_SELECTED_ITEMS:"SET_SELECTED_ITEMS",CLOSE_CURRENT_TAB:"CLOSE_CURRENT_TAB",CHANGE_SEARCH_VIEW:"CHANGE_SEARCH_VIEW",CHANGE_SEARCH_FILTER:"CHANGE_SEARCH_FILTER",CHANGE_FILTER_FETCH_START:"CHANGE_FILTER_FETCH_START",CHANGE_FILTER_FETCH_SUCCESS:"CHANGE_FILTER_FETCH_SUCCESS",CHANGE_FILTER_FETCH_FAILURE:"CHANGE_FILTER_FETCH_FAILURE",CHANGE_VIEW_FETCH_START:"CHANGE_VIEW_FETCH_START",CHANGE_VIEW_FETCH_SUCCESS:"CHANGE_VIEW_FETCH_SUCCESS",CHANGE_VIEW_FETCH_FAILURE:"CHANGE_VIEW_FETCH_FAILURE",SEARCH_TAB_CLOSE:"SEARCH_TAB_CLOSE",CLEAN_UP_SEARCH_RESULTS:"CLEAN_UP_SEARCH_RESULTS",SEARCH_IN_ALL:"SEARCH_IN_ALL",SEARCH_IN_ACCOUNT:"SEARCH_IN_ACCOUNT",SEARCH_IN_FOLDERS:"SEARCH_IN_FOLDERS",SEARCH_IN_SMARTVIEW:"SEARCH_IN_SMARTVIEW",REGEX_IN:/(?:\s|^)in:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_IS:/(?:\s|^)is:("[^")]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_SANITIZE_HAS_IS_IN_MATCH:/(is:|has:|in:|"|')/g,REGEX_HAS_IS_IN:/(?:\s|^)(has|is|in):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_HAS_IS_IN_ACCOUNT:/(?:\s|^)(has|is|in|account):("[^"]+"|'[^']+'|\S+)(?=\s|$)/g,REGEX_AFTER_BEFORE:/(?:\s|^)(after|before):"?(\d{4}[\/-]\d{1,2}[\/-]\d{1,2})"?(?=\s|$)/g,REGEX_FROM_TO_SUBJECT:/(?:\s|^)(from|to|fromEmail|toEmail|subject):('(?:[^'\\]|\\')*'|"(?:[^"\\]|\\")*"|[^\s]*)(?=\s|$)/g,UNSEARCHABLE_FIDS:["%40B%40Bulk","%40C%40CHATS"],UNMOVEABLE_FIDS:["%40C%40Chats","Sent","Draft"],COMMON_TYPES:["INBOX","DRAFT","SENT","TRASH"],UNSEARCHABLE_TYPES:["BULK","CHAT","CHATS"],UNMOVEABLE_TYPES:["SENT","DRAFT","CHAT","CHATS"],SAVE_CURRENT_SEARCH:"SAVE_CURRENT_SEARCH",SMARTVIEW_CATEGORIES:["unread","starred","personal","shopping","financial","social","travel"],SMARTVIEW_CATEGORIES_KEYS:["important","me2me","unread","starred","personal","social","shopping","travel","financial"],SYSTEM_FOLDER_INDEX:{INBOX:0,DRAFT:1,SENT:2,ARCHIVE:3,BULK:4,"%40B%40BULK":4,TRASH:5},SYSTEM_FOLDERS_NO_FILTER:["INBOX","BULK","%40B%40BULK"],MOVE_MENU_SYSTEM_FOLDERS_INDEX:{Inbox:0,Archive:1,Spam:2,Trash:3},ONLINE_DOCS_PROVIDER:{gdocs:"gdrive"},FILL_PERMISSION_WINDOW:"FILL_PERMISSION_WINDOW",CLOSE_GDOC_PERMISSION:"CLOSE_GDOC_PERMISSION",MESSAGES:"MESSAGES",PHOTOS:"PHOTOS",DOCUMENTS:"DOCUMENTS",LINKS:"LINKS",DOCS:"DOCS",PEOPLE:"PEOPLE",MAIN:"MAIN",FILTER_ALL:"ALL",FILTER_FROM:"FROM",
FILTER_TO:"TO",FILTER_KEYWORD:"WITH_KEYWORD",FILTER_RELATED:"RELATED",CONTACT_ADD:"CONTACT_ADD",PERSON_TOKEN_FALLBACK_IMG_DATA:"'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PHBhdGggZD0iTTUuODIzIDE2Ljc5OGwxNCAuMDAydi0xLjMzNXMuMDktLjg2LTEuNzYyLTEuNjRjLS45MTMtLjM4NC0xLjk5Mi0xLjEyLTMuOTI4LTEuMzU2LjU5Ni0uNDI1Ljg1Ny0xLjMwMiAxLjM2NS0yLjUxOGwuMDIzLS4wNmMuMTE2LjAyLjIzNi4wMi4zMjItLjAzLjIzNS0uMTM4LjM3OC0uODk1LjM4Mi0xLjI2Mi4wMDYtLjU1LS4yODctLjQ5Ny0uMjg3LS40OTdsLS4wMjQtLjAwNWMuMDAyLS4wNDQuMDA1LS4wODcuMDA1LS4xMyAwLS41MTcuMTA1LTEuMzQ4LS4wMzItMS44MDQtLjIxLS43MDYtLjQ2NC0xLjQ4Ni0xLjAyMy0xLjQ4Ni0uNTIgMC0uMTY3LS42MS0uODAyLS44MTMtLjY1NS0uMjEtMS43MzYuMTYtMS45NTQuMTYtLjMxNSAwLTEuMTA4LjIzLTEuNjU1Ljc3Ni0uMzg1LjM4NS0uMzQyLjY1LS41NTQgMS4zNi0uMTQuNDY3LS4wMzIgMS4zMS0uMDMyIDEuODA4IDAgLjA0NC4wMDMuMDg4LjAwNC4xMzItLjAwOCAwLS4wMTUuMDAzLS4wMTUuMDAzcy0uMjkzLS4wNTQtLjI4Ni40OTdjLjAwNC4zNjguMTQ2IDEuMTI0LjM4MiAxLjI2LjA4My4wNS4yLjA1Mi4zMS4wMzMuMDA4LjAxOC4wMTYuMDM2LjAyLjA1NC41MDYgMS4yMDcuNzgzIDIuMDkgMS4zNzMgMi41MTctMS45NTUuMjMtMy4wNDIuOTczLTMuOTYgMS4zNTgtMS44NjMuNzc3LTEuODcgMS41MzItMS44NyAxLjUzMnYxLjQ0NHoiIGZpbGw9IiMxQzg5RkYiLz48L3N2Zz4='"},b.exports=d},{}],SlideShow:[function(a,b,c){"use strict";var d=a("react/addons"),e=d.createClass({displayName:"SlideShow",propTypes:{items:d.PropTypes.array.isRequired,activeIndex:d.PropTypes.number.isRequired,setActiveIndex:d.PropTypes.func.isRequired,visible:d.PropTypes.bool.isRequired,closeSlideShow:d.PropTypes.func.isRequired},closeEvent:null,handleIndexUpdate:function(a){this.props.setActiveIndex(a)},shouldComponentUpdate:function(a){return a.visible!==this.props.visible||a.activeIndex!==this.props.activeIndex||a.items.length!==this.props.items.length},componentDidUpdate:function(){this.props.visible?yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex}):yui.fire("close-light-document-preview")},componentDidMount:function(){var a=this;this.closeEvent=yui.on("light-document-preview:closed",function(){a.props.closeSlideShow()}),this.props.visible&&yui.fire("open-light-document-preview",{type:"DPTYPE_BootCampItems",notifyIndexUpdate:this.handleIndexUpdate,items:this.props.items,activeIndex:this.props.activeIndex})},componentWillUnmount:function(){this.closeEvent.detach(),yui.fire("close-light-document-preview")},render:function(){return null}});b.exports=e},{"react/addons":"react/addons"}],StatService:[function(a,b,c){"use strict";var d,e=a("lodash"),f=window.NeoConfig||{};d=function(){var a={},b={tags:{colo:f.colo,farm:f.farm}};return{stat:function(a){var c=a;e.isString(a)&&(c={name:a}),yui.use("ymma-stats",function(a){a.fire("util:ymstats",e.merge(c,b))})},statTAE:function(a,b,c){var d,e,g=this,h=b.error.code,i=b.status,j="prod"===f.mailEnv?f.hostName.split(".")[3]:"",k=a.method;yui.use("mail-errormap","mail-error",function(l){d=l.mail.Errormap.getErrorInfo({code:h,method:k,suppressStat:c&&c.suppressStat,suppressNotification:c&&c.suppressNotification}),2!==d.tae&&13!==d.tae||"SaveMessage"!==k&&"SendMessage"!==k||(d.customCode=l.mail.Error.getSendSaveCustomErrorCode(JSON.stringify(b))),g.stat({name:d.suppressStat?"client_error":"ue_client_error",tags:{api:k,tae:d.tae,code:d.customCode||h,farm:f.farm.substr(1),ymreqid:a.ymreqid,colo:j,httpStatusCode:i}}),g.webserviceFail(d.tae,k,h,!d.suppressStat),e={m:(d.suppressStat?"":"UE_")+"DEBUG_TAE:"+(d.tae||"null")+":"+(k||"null")+":"+(h||"null")+":"+f.farm+" ",api:(k||"null")+" ",reason:(h||"null")+" ",errinfo:d,ymreqid:a.ymreqid,wssid:a.wssid,tab:"SEARCH"},g.mailLog(e,1,"tae"+d.tae)})},lighthouseBeaconStat:function(a,b){yui.fire("lhStat:feature_latency",{message:a,duration:b})},timerStart:function(b){a[b]=Date.now()},timerCurrentDuration:function(b){return a[b]&&Date.now()-a[b]},timerComplete:function(b){var c;return a[b]&&(c=Date.now()-a[b],delete a[b]),c},getTimerStart:function(b){return a[b]},featureInvoke:function(a){yui.fire("stat:feature_invoke",e.merge({message:a,feature_group:"search"},b))},featureComplete:function(a){yui.fire("stat:feature_complete",e.merge({message:a,feature_group:"search"},b))},featureFail:function(a){yui.fire("stat:feature_fail",e.merge({message:a,feature_group:"search",api:a,visible:"yes"},b))},featureLatency:function(a,c,d){yui.fire("stat:feature_latency",e.merge({message:a,feature_group:d||"search",value:c},b))},apiLatency:function(a,b,c){yui.fire("stat:feature_latency",e.merge({message:a,feature_group:"search",value:b},c))},webserviceFail:function(a,b,c,d){yui.fire("stat:webservice_fail",{tab:"SEARCH",tae:a,api:b,message:c,visible:d?"yes":"no"})},logRapid:function(a,b){yui.use("search-ult",function(c){c.fire(a,b)})},mailLog:function(a,b,c){b&&!c&&(c="stat_service_debug"),yui.fire("MailLog",a,b,c)}}}(),b.exports=d},{lodash:"lodash"}],StringUtils:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("url"),g=a("./RTLCharactersRegExp"),h=a("./NeutralCharactersRegExp"),i=a("./ArabicShapingRegExp"),j=i.rightJoiner,k=i.leftJoiner;d={hashCode:function(a){var b,c;for(c=0;c<a.length;c++)b=31*b+a.charCodeAt(c)<<0;return b},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return(a||"").replace(/[&<>'"]/g,function(a){return b[a]})},startsWith:function(a,b,c){return c=c||0,a.lastIndexOf(b,c)===c},startsWithIgnoreCase:function(a,b,c){return this.startsWith(a.toLowerCase(),b.toLowerCase(),c)},contains:function(a,b,c){return-1!==a.indexOf(b,c)},containsIgnoreCase:function(a,b,c){return this.contains(a.toLowerCase(),b.toLowerCase(),c)},indexOfIgnoreCase:function(a,b,c){return c=c||0,a.toLowerCase().indexOf(b.toLowerCase(),c)},escapeRegExp:function(a){return a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},capitalize:function(a){return a[0].toUpperCase()+a.slice(1)},stripHTML:function(a){return a.replace(/<\/?.*?>/g,"")},overWriteQueryParam:function(a,b){var c=f.parse(a,!0);return e.size(b)<0||!c||!c.query?a:(e.forOwn(b,function(a,b){null===a||void 0===a?delete c.query[b]:c.query[b]=a}),c.search=null,f.format(c))},addUrlParameters:function(a,b){var c,d=a;return d?(-1===d.indexOf("?")?d+="?":"&"!==d.charAt(d.length-1)&&(d+="&"),c=Object.keys(b).map(function(a){return[encodeURIComponent(a),encodeURIComponent(b[a])].join("=")}),d+c.join("&")):""},stringReplace:function(a,b){var c=a.split(/({{{?.*?}}}?)/);return"function"==typeof b?c.map(function(a){var c=a.match(/{{([^}]+)}}/);return c?b(c[1].trim()):a}):c.map(function(a){var c=a.match(/{{([^}]+)}}/);return c?b[c[1].trim()]:a})},getTextDirection:function(){var a=new RegExp("^(?:"+h+")*(?:"+g+")"),b=new RegExp("^(?:"+h+")*$");return function(c){var d="ltr";return a.test(c)?d="rtl":b.test(c)&&(d=null),d}}(),getBidiString:function(a,b){var c;if("string"==typeof a){if("ltr"===(c=this.getTextDirection(a)||b))return"‪"+a+"‬";if("rtl"===c)return"‬"+a+"‫"}return a},bidiSafeConcatenate:function(a,b){return b=b||"ltr",Array.isArray(a)?e.reduce(a,function(a,c){return a+this.getBidiString(String(c),b)},"",this):a},mightNeedJoiner:function(a){return a.charCodeAt(0)>=1568},nextNeedsJoiner:function(a){return(a=a.slice(-1))&&this.mightNeedJoiner(a)&&k.test(a)},previousNeedsJoiner:function(a){return(a=a[0])&&this.mightNeedJoiner(a)&&j.test(a)},addRTLJoiners:function(a,b){return b=b||"‍",e.each(a,function(a,c,d){0!==c&&this.previousNeedsJoiner(a)&&this.nextNeedsJoiner(d[c-1])&&(d[c-1]=d[c-1]+b,d[c]=b+d[c]),d[c+1]&&this.nextNeedsJoiner(a)&&this.previousNeedsJoiner(d[c+1])&&(d[c+1]=b+d[c+1],d[c]=d[c]+b)},this),a},getFileName:function(a){return"string"==typeof a?-1!==a.lastIndexOf(".")?a.slice(0,a.lastIndexOf(".")+1):a:""},getFileExtension:function(a){return"string"==typeof a&&-1!==a.lastIndexOf(".")&&a.slice(a.lastIndexOf(".")+1)||""}},b.exports=d},{"./ArabicShapingRegExp":3,"./NeutralCharactersRegExp":4,"./RTLCharactersRegExp":5,lodash:"lodash",url:16}],Template:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"Template",mixins:[e.addons.PureRenderMixin],render:function(){var a=this,b=f.template(a.props.tmpl,null)(a.props);return e.createElement("span",{dangerouslySetInnerHTML:{__html:b}})}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],TokenUtils:[function(a,b,c){"use strict";var d,e=a("lodash"),f=a("StringUtils"),g=a("../../../artifacts/lang");d={getTokenText:function(a,b){var c,d,h,i=a||[],j=b||"";if(!i.length)return"";switch(c=e.find(i,function(a){return f.containsIgnoreCase(a,j)})||i[0],i.length){case 1:h=i[0];break;case 2:d=g.str_suggestion_other_email_singular;break;default:d=g.str_suggestion_other_email_plural}return d&&(h=e.template(d,null)({emailAddress:c,number:i.length-1})),h||""}},b.exports=d},{"../../../artifacts/lang":2,StringUtils:"StringUtils",lodash:"lodash"}],TokenizedTypeahead:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash"),g=a("DOMUtils"),h=a("List"),i=a("ListItem"),j=a("Typeahead");d=e.createClass({displayName:"TokenizedTypeahead",propTypes:{items:e.PropTypes.array.isRequired,inputValue:e.PropTypes.string,tokens:e.PropTypes.arrayOf(e.PropTypes.object),itemTemplate:e.PropTypes.func,tokenTemplate:e.PropTypes.func,onFocus:e.PropTypes.func,onKeyUp:e.PropTypes.func,onKeyDown:e.PropTypes.func,onKeyPress:e.PropTypes.func,onChange:e.PropTypes.func.isRequired,onComplete:e.PropTypes.func,getItemValue:e.PropTypes.func,getAriaCountMessage:e.PropTypes.func,getAriaSuggestionMessage:e.PropTypes.func,handleInputHint:e.PropTypes.func,handleDestroyToken:e.PropTypes.func},getInitialState:function(){return{selectedIndex:this.props.tokens?this.props.tokens.length:0}},getDefaultProps:function(){return{tokens:[],inputValue:"",onKeyDown:f.noop,onComplete:function(a,b){return b},tokenTemplate:"div"}},shouldComponentUpdate:function(a,b){return!(f.isEqual(this.props,a)&&f.isEqual(this.state,b))},componentDidUpdate:function(a){f.isEqual(this.props.tokens,a.tokens)||this.setState({selectedIndex:this.props.tokens.length})},render:function(){var a,b=this,c=b.props,d=c.tokens,f=d.length,g=b.state.selectedIndex,h=f>0&&g<f,i={"tokenized-typeahead":!0,tokensSelected:h},k={};return i[c.className]=!!c.className,a=e.addons.classSet(i),c.endPadding&&(NeoConfig.isRTL?k["padding-left"]=c.endPadding:k["padding-right"]=c.endPadding),e.createElement("div",{className:a,style:k},e.createElement("div",{className:"tokenized-typeahead-container"},b.renderTokens(),e.createElement(j,{ref:"typeahead",items:c.items,itemTemplate:c.itemTemplate,onClick:b.handleClick,onFocus:c.onFocus,onSelect:b.handleTextSelection,placeholder:c.placeholder,onKeyUp:c.onKeyUp,onKeyDown:b.handleKeyDown,onKeyPress:c.onKeyPress,onChange:b.handleChange,onComplete:b.handleComplete,getItemValue:c.getItemValue,getAriaCountMessage:c.getAriaCountMessage,getAriaSuggestionMessage:c.getAriaSuggestionMessage,handleInputHint:c.handleInputHint,inputValue:c.inputValue,ariaLabel:c.ariaLabel,onDropdownClose:c.onDropdownClose})))},renderTokens:function(){var a=this.state.selectedIndex,b=this.props.tokens;if(b.length>0)return e.createElement(h,{className:"typeahead-token-list",onKeyDown:this.handleKeyDown},b.map(function(b,c){var d=e.createElement(this.props.tokenTemplate,{index:c,data:b,isSelected:a<0||a===c,destroyFunc:this.destroyToken});return e.createElement(i,{key:c,id:c,onClick:this.handleTokenClick},d)},this))},focus:function(){this.refs.typeahead.focus()},blur:function(){this.refs.typeahead.blur()},handleComplete:function(a,b){this.props.onComplete(a,b)},handleKeyDown:function(a){var b=this,c=b.props.tokens,d=b.state.selectedIndex,e=a.target,f=0===e.selectionStart&&0===e.selectionEnd;if((a.ctrlKey||a.metaKey)&&65===a.keyCode)b.setState({selectedIndex:-1});else if(a.key&&(f||-1!==d))switch(a.key){case"ArrowLeft":f&&b.setState({selectedIndex:Math.max(d-1,0)});break;case"ArrowRight":-1===d?(b.setState({selectedIndex:c.length}),g.halt(a)):d<c.length&&(b.setState({selectedIndex:d+1}),g.halt(a));break;case"Backspace":-1===d?b.destroyAllTokens():c.length&&(d===c.length&&c.length&&f?b.setState({selectedIndex:b.state.selectedIndex-1}):d<c.length&&b.destroyToken(c[d]))}b.props.onKeyDown(a)},handleChange:function(a){var b=this,c=b.props.tokens;-1===b.state.selectedIndex?(c=[],b.destroyAllTokens()):b.state.selectedIndex<c.length&&(c=f.without(c,c[this.state.selectedIndex]),b.destroyToken(c[b.state.selectedIndex])),b.props.onChange(a,c)},handleClick:function(){var a=this;a.setState({selectedIndex:a.props.tokens.length})},handleTokenClick:function(a,b){var c=this;c.refs.typeahead.focus(),c.refs.typeahead.setSelectionRange(0,0),c.setState({selectedIndex:b})},destroyToken:function(a){this.props.handleDestroyToken(a)},destroyAllTokens:function(){var a=this;a.props.tokens.forEach(function(b){a.destroyToken(b)})},isInputFullySelected:function(a){return a.value.length>0&&0===a.selectionStart&&a.selectionEnd===a.value.length},handleTextSelection:function(a){var b=this;b.isInputFullySelected(a.target)?b.setState({selectedIndex:-1}):-1===b.state.selectedIndex&&b.setState({selectedIndex:b.props.tokens.length})}}),b.exports=d},{DOMUtils:"DOMUtils",List:"List",ListItem:"ListItem",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],Token:[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("TokenUtils");d=e.createClass({displayName:"Token",propTypes:{data:e.PropTypes.object.isRequired,index:e.PropTypes.number,destroyFunc:e.PropTypes.func,isSelected:e.PropTypes.bool,type:e.PropTypes.string},render:function(){var a,b=this,c=b.props,d={"ui-token":!0,"ui-token-selected":c.isSelected,"ui-token-destroyable":c.destroyFunc};return c.data.className&&(d[c.data.className]=!0),c.data.intent&&(d["ui-token-type-"+c.data.intent.trim().toLowerCase()]=!0),a=e.addons.classSet(d),e.createElement("span",{className:a,title:c.data.emailAddresses?f.getTokenText(c.data.emailAddresses,c.data.keyword):c.data.displayStr,"data-value":c.data.dataValue},b.renderDisplayName(),b.renderCloseButton())},renderCloseButton:function(){var a=this;if(a.props.destroyFunc)return e.createElement("span",{ref:"close",className:"icon icon-close",onClick:a.destroyToken})},renderDisplayName:function(){var a,b=this,c=b.props.data,d={"ui-token-text":!0};return c.innerClassName&&(d[c.innerClassName]=!0),a=e.addons.classSet(d),e.createElement("span",{className:a},b.renderThumbnail(),c.displayStr)},renderThumbnail:function(){var a=this,b=a.props.data,c=[];if([b.imageUrl,b.fallbackImageUrl].forEach(function(a){a&&c.push("url("+a+")")}),c.length)return e.createElement("figure",{className:"ui-token-thumbnail",style:{"background-image":c.join(", ")}})},destroyToken:function(a){var b=this;b.props.destroyFunc(b.props.data),a.stopPropagation()}}),b.exports=d},{TokenUtils:"TokenUtils","react/addons":"react/addons"}],Typeahead:[function(a,b,c){"use strict";var d,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a("react/addons"),g=a("lodash"),h=a("DOMUtils"),i=a("StringUtils"),j=a("./Input.jsx"),k=a("List"),l=a("ListItem"),m=a("Dropdown"),n=a("ListNavigation"),o=a("AriaStatus");d=f.createClass({displayName:"Typeahead",propTypes:{items:function(a,b){var c=a[b];if(!Array.isArray(c))throw new Error("The `items` prop must be an array.");if(c.some(function(a){return"object"===(void 0===a?"undefined":e(a))})){if(!a.handleInputHint)throw new Error("If an array of items containing objects is used,then you must pass in a `handleInputHint` prop.");if(!a.getItemValue)throw new Error("If an array of items containing objects is used,then you must pass in a `getItemValue` prop.")}},inputValue:f.PropTypes.string,itemTemplate:f.PropTypes.func,onFocus:f.PropTypes.func,onChange:f.PropTypes.func,onClick:f.PropTypes.func,onSelect:f.PropTypes.func,onKeyUp:f.PropTypes.func,onKeyDown:f.PropTypes.func,onKeyPress:f.PropTypes.func,onComplete:f.PropTypes.func,getItemValue:f.PropTypes.func,getAriaCountMessage:f.PropTypes.func,getAriaSuggestionMessage:f.PropTypes.func,handleInputHint:f.PropTypes.func},isComposing:!1,isInputHintVisible:!0,minIndex:-1,mixins:[n],getInitialState:function(){return{selectedIndex:-1,isDropdownOpen:!1,temporaryInputValue:""}},getDefaultProps:function(){return{inputValue:"",items:[],itemTemplate:"div",onChange:g.noop,onKeyUp:g.noop,onKeyDown:g.noop,onKeypress:g.noop,onClick:g.noop,onFocus:g.noop,getAriaCountMessage:g.noop,getAriaSuggestionMessage:g.noop}},shouldComponentUpdate:function(a,b){return!(g.isEqual(this.props,a)&&g.isEqual(this.state,b))},componentWillReceiveProps:function(a){var b,c,d=this,e=a.inputValue,f=a.items;d.state.temporaryInputValue?e!==d.props.inputValue&&d.setState({temporaryInputValue:"",selectedIndex:-1}):(d.state.isDropdownOpen&&0!==f.length?(c=d.handleInputHint(e,f),b=e+(c||"")):b=e,d.setState({fullInputValue:b}))},render:function(){var a,b=this,c=b.props,d=b.state.temporaryInputValue||c.inputValue,e=b.state.fullInputValue,g="",h=i.getTextDirection(d),k={"typeahead-content-box":!0};return b.isInputHintVisible&&e!==d&&!b.getSelectedItem()&&(g=e),"rtl"===h&&g&&(g="⇤ "+g),k[c.className]=!!c.className,a=f.addons.classSet(k),f.createElement("div",{className:a},f.createElement("div",{className:"typeahead-input-container"},f.createElement(j,{className:"typeahead-input-grayhint",disabled:!0,value:g,dir:h}),f.createElement(j,{ref:"input",className:"typeahead-input-usertext",onFocus:b.handleInputFocus,onClick:b.handleInputClick,onSelect:c.onSelect,onChange:b.handleInputChange,onKeyUp:c.onKeyUp,placeholder:c.placeholder,onKeyDown:b.handleInputKeyDown,onKeyPress:c.onKeyPress,onCompositionStart:b.handleInputCompositionStart,onCompositionEnd:b.handleInputCompositionEnd,value:d,"aria-label":c.ariaLabel||c.title,dir:h})),b.renderDropdown(),b.renderAriaSuggestionMessage(),b.renderAriaCountMessage())},renderDropdown:function(){var a=this;if(a.state.isDropdownOpen&&a.props.items.length>0)return f.createElement(m,{parentNode:a.getDOMNode().parentElement,closeDropdown:a.closeDropdown},f.createElement(k,{ref:"typeaheadList",className:"typeahead-list"},a.props.items.map(function(b,c){var d=f.createElement(a.props.itemTemplate,{data:b,inputValue:a.props.inputValue,isSelected:a.state.selectedIndex===c});return f.createElement(l,{key:c,id:c,onClick:a.handleItemClick},d)})))},renderAriaCountMessage:function(){var a=this;if(a.state.isDropdownOpen)return f.createElement(o,{message:a.getAriaCountMessage()})},renderAriaSuggestionMessage:function(){var a=this;if(a.state.isDropdownOpen)return f.createElement(o,{message:a.getAriaSuggestionMessage()})},getAriaCountMessage:function(){var a=this;return a.props.getAriaCountMessage(a.props.items.length)||""},getAriaSuggestionMessage:function(){var a=this;return a.props.getAriaSuggestionMessage(a.getSelectedItem())||""},getInputValue:function(){return this.refs.input.getDOMNode().value},getItemValue:function(a){var b=this;return b.props.getItemValue?b.props.getItemValue(a):a},getSelectedItem:function(a){var b=this,c=void 0!==a?a:b.state.selectedIndex;return b.props.items[c]},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},setSelectionRange:function(a,b){this.refs.input.setSelectionRange(a,b)},shouldDisplayHint:function(a,b){var c=this;return!c.isComposing&&c.isInputHintVisible&&b.length>0&&a.length>0},getMatchingPart:function(a,b){var c=this,d="",e=b[0];return e&&(c.props.handleInputHint?d=c.props.handleInputHint(a,e):i.startsWithIgnoreCase(e,a)&&(d=e)),d},handleInputHint:function(a,b){var c,d=this;return b=b||d.props.items,d.shouldDisplayHint(a,b)&&(c=d.getMatchingPart(a,b))?c.slice(a.length):null},handleInputChange:function(a){var b=this;a.inputValue=b.getInputValue(),b.props.onChange(a)},handleInputKeyDown:function(a){var b,c,d,e,f=this,g=a.key,j=f.refs.input,k={key:a.key,type:a.type,target:a.target,altKey:a.altKey,metaKey:a.metaKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,value:f.props.inputValue,fullInputValue:f.state.fullInputValue},l=f.props,m=f.state;switch(g){case"Enter":if(a.shiftKey)break;m.isDropdownOpen&&h.halt(a),f.isInputHintVisible=!1,d=l.inputValue.length,j.setSelectionRange(d,d),f.handleInputComplete(k),f.setState({fullInputValue:l.inputValue,isDropdownOpen:!1,selectedIndex:-1});break;case"ArrowLeft":case"ArrowRight":m.temporaryInputValue.length<1&&l.inputValue.length===j.getSelectionEnd()&&l.inputValue.length===j.getSelectionStart()&&m.fullInputValue!==l.inputValue&&-1===m.selectedIndex&&("ltr"===(e=i.getTextDirection(l.inputValue))&&"ArrowRight"===g||"rtl"===e&&"ArrowLeft"===g)&&(f.handleInputComplete(k),a.preventDefault());break;case"End":case"Tab":a.shiftKey||null===f.handleInputHint(l.inputValue)||(h.halt(a),f.handleInputComplete(h.cloneEvent(a)));break;case"Escape":break;case"ArrowUp":case"ArrowDown":a.preventDefault(),f.setState({isDropdownOpen:!0}),c="ArrowUp"===g?f.navigateUp():f.navigateDown(),c>=0?(b=f.getItemValue(l.items[c]))&&f.setState({temporaryInputValue:b,fullInputValue:b},function(){j.setSelectionRange(b.length,b.length)}):f.setState({temporaryInputValue:"",fullInputValue:l.inputValue}),a.stopPropagation();break;default:f.isInputHintVisible=!0,f.setState({isDropdownOpen:!0})}a.nativeEvent.stopPropagation(),l.onKeyDown(a)},handleInputFocus:function(){var a=this,b=a.props,c=a.handleInputHint(b.inputValue);a.isInputHintVisible=!0,a.setState({isDropdownOpen:!0,fullInputValue:b.inputValue+(c||"")},function(){b.onFocus()})},closeDropdown:function(){var a=this;a.setState({isDropdownOpen:!1,selectedIndex:-1,temporaryInputValue:"",fullInputValue:a.props.inputValue}),a.isInputHintVisible=!1,"function"==typeof a.props.onDropdownClose&&a.props.onDropdownClose()},handleInputClick:function(a){this.props.onClick(a)},handleItemClick:function(a,b){var c=this;a=h.cloneEvent(a),c.isInputHintVisible=!1,c.setState({selectedIndex:b,isDropdownOpen:!1},function(){c.handleInputComplete(a),c.setState({selectedIndex:-1})})},handleInputComplete:function(a){var b,c=this,d=c.state.selectedIndex,e=a.key;"Enter"!==e&&(d=Math.max(0,d)),b=c.getSelectedItem(d),c.props.onComplete?c.props.onComplete(a,b):"Tab"===e?c.setProps({inputValue:d>-1?b:""}):"ArrowRight"!==e&&"ArrowLeft"!==e||c.setProps({inputValue:c.state.fullInputValue})},handleInputCompositionStart:function(){this.isComposing=!0},handleInputCompositionEnd:function(){this.isComposing=!1},getItems:function(){return this.props.items}}),b.exports=d},{"./Input.jsx":7,AriaStatus:"AriaStatus",DOMUtils:"DOMUtils",Dropdown:"Dropdown",List:"List",ListItem:"ListItem",ListNavigation:"ListNavigation",StringUtils:"StringUtils",lodash:"lodash","react/addons":"react/addons"}],UserSettingsConstants:[function(a,b,c){"use strict";c.MSG_DENSITY_RELAXED=0,c.MSG_DENSITY_COMPACT=1,c.MSG_DENSITY_OPEN=2,c.TAB="tab",c.RECENT="recent",c.MSG_SORT_TYPE_DATE="date",c.MSG_SORT_TYPE_ATTACHMENT="attachmentcount",c.MSG_SORT_TYPE_RELEVANCE="relevance",c.MSG_SORT_ORDER_UP="up",c.MSG_SORT_ORDER_DOWN="down"},{}],Utils:[function(a,b,c){"use strict";function d(a){setTimeout(a,1e3/60)}var e,f,g=a("lodash"),h=a("url");f="undefined"==typeof window?d:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||d,e=function(){var a={};return{loadPromisesMap:a,loadCSS:function(a){return new Promise(function(b){var c=document.head,d=new Image;d.onerror=function(){var d=document.createElement("link");d.rel="stylesheet",d.href=a,d.onload=b,window.setTimeout(b,200),c.insertBefore(d,c.firstChild)},d.src=a})},loadJS:function(a){return new Promise(function(b){var c=document.createElement("script");c.onload=b,c.src=a,document.head.appendChild(c)})},loadTictac:function(b){return a[b]||(a[b]=yui.mail.ui.Tictacs.loadTictac(b)),a[b]},appendToUrl:function(a,b){var c=h.parse(a,!0);return g.size(b)>0&&c&&c.query?(g.each(b,function(a,b){g.isUndefined(c.query[b])&&(c.query[b]=a)}),c.search=null,h.format(c)):a},requestAnimationFrame:f.bind(window),detectDirection:function(a,b){var c=b;return yui.Intl.detectDirection&&(c=yui.Intl.detectDirection(a,c)),c}}}(),b.exports=e},{lodash:"lodash",url:16}],"context-mixin":[function(a,b,c){"use strict";var d=a("react/addons");b.exports={childContextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,extraPayload:d.PropTypes.object},getChildContext:function(){return{executeAction:this.context.executeAction,getStore:this.context.getStore,extraPayload:this.context.extraPayload}},contextTypes:{executeAction:d.PropTypes.func,getStore:d.PropTypes.func,extraPayload:d.PropTypes.object}}},{"react/addons":"react/addons"}],"dispatchr/utils/BaseStore":[function(a,b,c){"use strict";function d(a){var b=this;b.dispatcher=a,b._hasChanged=!1,b.initialize&&b.initialize()}var e=a("inherits"),f=a("events").EventEmitter;e(d,f),d.prototype.getContext=function(){return this.dispatcher.getContext()},d.prototype.addChangeListener=function(a){this.on("change",a)},d.prototype.removeChangeListener=function(a){this.removeListener("change",a)},d.prototype.shouldDehydrate=function(){return this._hasChanged},d.prototype.emitChange=function(a){var b=this;b._hasChanged=!0,b.emit("change",a||b)},b.exports=d},{events:"events",inherits:18}],"infinite-scroll":[function(a,b,c){"use strict";var d,e=a("react/addons"),f=a("lodash");d=e.createClass({displayName:"InfiniteScroll",getInitialState:function(){var a=this.props,b=a.items.length*a.itemHeight,c=Math.floor(b/a.itemHeight);return{loading:!1,scrollTop:0,loadThreshold:a.loadThreshold||5,items:a.items,hasMoreItems:a.hasMoreItems,itemHeight:a.itemHeight,itemsPerPage:c,visibleStart:0,visibleEnd:c,displayStart:0,displayEnd:Math.min(2*c,a.items.length)}},componentWillReceiveProps:function(a){var b=this,c=a.itemHeight,d=a.items.length,e=b.getScrollState(c,d);b.setState(f.merge({loading:!1,items:a.items,hasMoreItems:a.hasMoreItems},e))},componentWillMount:function(){var a=this;a.setState({itemsPerPage:15,visibleEnd:15,displayEnd:Math.min(30,a.state.items.length)})},componentDidMount:function(){var a=this,b=a.refs.scrollable.getDOMNode().offsetHeight,c=Math.floor(b/a.state.itemHeight);a.setState({itemsPerPage:c,visibleEnd:c,displayEnd:Math.min(2*c,a.state.items.length)})},getScrollState:function(a,b){var c=this,d=c.state,e=c.refs.scrollable.getDOMNode().scrollTop,f=d.itemsPerPage,g=Math.floor(e/a),h=Math.min(g+f,b);return{visibleStart:g,visibleEnd:h,displayStart:Math.max(0,g-f),displayEnd:Math.min(h+f,b),scrollTop:e}},onScroll:function(){var a=this,b=a.state,c=b.itemHeight,d=b.items.length;a.setState(a.getScrollState(c,d),a.loadMore)},_shouldLoad:function(){var a=this.state,b=a.items.length,c=a.displayStart;return!a.loading&&a.hasMoreItems&&b-c<a.loadThreshold*a.itemsPerPage},loadMore:function(){var a=this;a._shouldLoad()&&(a.setState({loading:!0}),a.props.loadMore())},render:function(){var a,b,c,d=this,f=d.props,g=d.state,h=g.itemHeight,i=g.items,j=g.displayStart,k=g.displayEnd,l=j*h,m=Math.max((i.length-1-k)*h,0),n=d.props.LoadMoreComponent,o=[];for(o.push(e.createElement("li",{key:"top",line:"top",style:{height:l}})),a=j;a<k;a++)b=i[a],c=e.createElement("li",{key:"row-"+a,className:f.itemClass,style:{height:h}},e.createElement(b.descriptor,b.props)),o.push(c);return o.push(e.createElement("li",{key:"bottom",line:"bottom",style:{height:m}})),this.state.loading&&this.props.LoadMoreComponent&&o.push(e.createElement("li",{key:"loading"},e.createElement(n,null))),e.createElement("div",{className:this.props.className,ref:"scrollable",onScroll:this.onScroll},e.createElement("ul",{className:"Reset"},o))}}),b.exports=d},{lodash:"lodash","react/addons":"react/addons"}],timeUtils:[function(a,b,c){"use strict";var d=function(){function a(){var a={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-660,1,s":"Pacific/Apia","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Africa/Casablanca","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","840,0":"Pacific/Kiritimati"},b=-1*new Date(2011,0,1,0,0,0,0).getTimezoneOffset(),c=-1*new Date(2011,5,1,0,0,0,0).getTimezoneOffset(),d=b-c,e=[];return d<0?(e.push(b),e.push(1)):d>0?(e.push(c),e.push(1),e.push("s")):(e.push(b),e.push(0)),a[e.join(",")]||""}return{getTimezone:a}}();b.exports=d},{}]},{},[9]);require=function e(t,a,r){function s(o,i){if(!a[o]){if(!t[o]){var c="function"==typeof require&&require;if(!i&&c)return c(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){var a=t[o][1][e];return s(a||e)},d,d.exports,e,t,a,r)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,a){var r='#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}#Stencil .search-folder-scope-dd,.search-content button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.suggestion-adv-search button{background:0 0;border:0;outline:0;margin:0;padding:0}.search-assist-header,.suggestion-adv-search,.suggestion-search-web,.suggestion-web-sugg-header{border-top:1px solid #E5E5E5;line-height:3rem}.suggestion-adv-search{padding-right:15px;text-align:right}.menu-active-item .suggestion-adv-search button,.suggestion-adv-search button:focus,.suggestion-adv-search button:hover{color:rgba(117,144,245,.8)}.suggestion-adv-search button:active{color:#7590F5}.suggestion-row,.suggestion-row-icon{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.suggestion-row{cursor:pointer}.suggestion-row-content,.suggestion-search-web-shortcut{color:gray}.suggestion-row-icon{width:53px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.suggestion-row-icon.icon-search-web{font-size:1.8rem;padding-right:0}.suggestion-row-content{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-overflow:ellipsis;position:relative;overflow:hidden}.suggestion-search-web-shortcut{padding-right:15px;padding-left:10px;font-family:inherit}.suggestion-row-icon,.suggestion-search-web-shortcut{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}body{background:0 0}.StencilRoot input,.StencilRoot select,.StencilRoot textarea{box-shadow:none}.StencilRoot table{margin:0}.parens::before{content:\'(\'}.parens::after{content:\')\'}.label-text{color:#7f7f7f}.button-plain{background:none repeat scroll 0 0 transparent;border:none;margin:0;outline:0;padding:0}.customview-callout .callout-default,.gdocs-custom-callout .callout-default{width:342px}#mail-search-btn,#web-search-btn{background-color:#198FFF;border:0;border-radius:2px;box-shadow:#063A93 0 2px 0 0;color:#FFF;line-height:32px;margin:0 0 0 6px;padding-top:0;padding-bottom:0;min-width:117px}#web-search-btn{background-color:#3775DD;box-shadow:#21487F 0 2px 0 0}#Stencil .bdc-g{border-color:#E5E5E5}#Stencil .c-s{color:silver}#Stencil .c-w{color:#fff}#Stencil .c-b{color:#000}#Stencil .c-bb{color:#1C89FF}#Stencil .c-bbb{color:#1567BF}#Stencil .bgc-w{background-color:#fff}#Stencil .bgc-lg{background-color:#f2f2f2}#Stencil .bgc-g{background-color:#ededed}#Stencil .c-n{color:#000}#Stencil .c-g,.icon-light{color:#999}.icon-light:hover{color:#333}#Stencil .ff-h{font-family:"Helvetica Neue","Segoe UI",Helvetica,Arial,"Lucida Grande",sans-serif}#Stencil .bgc-lb,#Stencil button.bgc-lb:active,#Stencil button.bgc-lb:hover{background-color:#198fff}#Stencil .bdrc-lb,#Stencil button.bdrc-lb:active,#Stencil button.bdrc-lb:hover{border-color:#198fff}#Stencil .bgc-db,#Stencil button.bgc-db:active,#Stencil button.bgc-db:hover{background-color:#3775DD}#Stencil .bdrc-db,#Stencil button.bdrc-db:active,#Stencil button.bdrc-db:hover{border-color:#3775DD}#Stencil .bxsh-lb{box-shadow:0 2px #063a93}#Stencil .bxsh-db{box-shadow:0 2px #21487F}#Stencil .bdrs-4{border-radius:4px}#Stencil .bxshb-1{box-shadow:0 1px 1px #CDCDCD}#Stencil .mwpx-860{max-width:860px}#Stencil .miwpx-117{min-width:117px}#Stencil .hpx-30{height:30px}#Stencil .hpx-34{height:34px}#Stencil .hpx-35{height:35px}#Stencil .hpx-36{height:36px}#Stencil .hpx-40{height:40px}#Stencil .lh-10{line-height:10px}#Stencil .lh-14{line-height:14px}#Stencil .lh-30{line-height:30px}#Stencil .lh-40{line-height:40px}#Stencil .wpx-40{width:40px}#Stencil .mt-3{margin-top:3px}#Stencil .bgr-nr{background-repeat:no-repeat}#Stencil .Py-5{padding-top:5px;padding-bottom:5px}#Stencil .pb-26{padding-bottom:26px}#Stencil .Cur-t{cursor:text}#Stencil .fz-12{font-size:1.2rem}#Stencil .fz-14,#Stencil .fz-ms{font-size:1.4rem}.search-autocomplete{-moz-box-sizing:border-box;box-sizing:border-box;z-index:3;position:relative}.search-content{display:table-row}.search-autocomplete{display:table-cell;vertical-align:middle}.search-buttons{display:table-cell}#mail-search-btn{margin-left:6px}#Stencil .adv-search-container{border:1px solid #DDD;border-radius:0 0 3px 3px;margin:0 1px}#Stencil .adv-search-container [dir]{text-align:inherit}#Stencil .lt .adv-search-container{border-width:1px 0}#Stencil #adv-search-from ul,#Stencil #adv-search-to ul{box-shadow:none;border-width:1px 1px;max-height:250px;overflow-y:auto}#Stencil .adv-search-container .typeahead-input:focus,#Stencil .adv-search-container input:focus{border-color:#7590F5;box-shadow:none}#Stencil .adv-search-container input{border-radius:2px}#Stencil .adv-search-container .custom-select::after{margin-top:8px}#Stencil .search-autocomplete .menu-active-item .icon-small-close,#Stencil .search-autocomplete li:hover .icon-small-close{display:block}.adv-search-button:hover,.search-autocomplete .menu-active-item .adv-search-button{border-radius:3px;background-color:#E5E5E5}#Stencil .custom-select select{background-color:transparent!important}#Stencil .offscreen{position:absolute;left:-9999px}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-group-overflow,#Stencil .search-folder-dropdown.right-folder-dd.advanced-search-folder-menu{padding-bottom:10px}#Stencil .search-folder-dropdown.right-folder-dd{padding:0;width:246px;background-color:#fff;margin-top:1px}#Stencil .search-folder-dropdown.right-folder-dd .search-folder-name{text-align:left;font-size:1.3rem;font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd [dir].search-folder-name{text-align:left}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group-overflow{max-height:550px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv{float:right;border-top:1px solid #D8DADE;position:relative;width:100%;padding:10px 0 10px 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv span{text-align:right;padding-right:25px}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.search-folder-scope-adv:hover{background-color:#fff;color:#555}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem{padding-left:28px;padding-right:28px}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider{position:relative;left:28px;width:20px;padding:12px 0 0 0;border-bottom:1px solid #D8DADE}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.search-menu-togglable .search-menuitem.search-in-divider:hover{cursor:auto;background-color:#fff}#Stencil .search-folder-dropdown.right-folder-dd>section.search-menu-group:last-child{padding-top:0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group{border-bottom:none;margin:0;padding:8px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-menu-group.dropdown-menu-title{padding:4px 0 0 0}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title .search-menu-group-title{padding-left:28px;padding-right:28px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .search-in-title>.search-menu-group-title{padding-bottom:7px;padding-top:7px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title:hover{background-color:#fff;cursor:auto}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-size:11px}#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title .search-menu-group-title{padding-left:40px;padding-right:40px;color:#000}#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem,#Stencil .search-folder-dropdown.right-folder-dd .account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item,#Stencil .search-folder-dropdown.right-folder-dd .all-account-menu-item.search-menuitem.selected,#Stencil .search-folder-dropdown.right-folder-dd .dropdown-menu-title{font-weight:700;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected::before{right:-webkit-calc(100% - 24px);right:-moz-calc(100% - 24px);right:calc(100% - 24px);top:60%}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem.selected{font-weight:400}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-dropdown.right-folder-dd .search-menuitem{padding-top:2px;color:#444}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu{width:100%;max-width:100%;border-radius:2px;border:solid 1px #CCC}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account{float:left;padding:0 5px 0 5px}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .token-folder-account .token-folder-account-text{color:#000}#Stencil .search-folder-scope-dd.right-folder-dd.advanced-search-folder-menu .icon.icon-small-search{display:none}#Stencil .search-menu.advanced-search-folder-menu{width:480px;border-radius:4px}#Stencil .search-menu.advanced-search-folder-menu>section.search-menu-group:last-child{display:none}#Stencil .search-menu.advanced-search-folder-menu .search-menuitem{max-width:100%}#Stencil .tokenized-typeahead.right-folder-dd .tokenized-typeahead-container{border:none}#Stencil .tokenized-typeahead.right-folder-dd .typeahead-list{margin-top:1px}#Stencil .right-folder-dd .search-box-inner{border:1px solid #7590F5}#Stencil .search-folder-scope-dd.right-folder-dd{position:relative;display:inline-block;float:left;padding:0;height:32px;max-width:140px;cursor:pointer;border-right:1px solid #D8DADE;border-top:none;border-bottom:none;border-left:none}#Stencil .search-folder-scope-dd.right-folder-dd span{padding:0;color:#B9BDC5;vertical-align:top}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account{max-width:140px;display:inline-block;padding:0 22px 0 34px;-moz-box-sizing:border-box;box-sizing:border-box}#Stencil .search-folder-scope-dd.right-folder-dd .token-folder-account .token-folder-account-text{display:block;color:#787D82;font-size:14px;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}#Stencil .search-folder-scope-dd.right-folder-dd .icon-small-search{position:absolute;left:8px;top:6px;font-size:25px;line-height:22px}#Stencil .search-folder-scope-dd.right-folder-dd .icon-chevron{position:absolute;right:8px}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected{position:relative}#Stencil .search-folder-scope-dd.right-folder-dd .search-menuitem.selected::before{position:absolute;left:10px;top:50%;font-size:20px}#Stencil .search-folder-scope-dd{background:#FFF;border:1px solid #7590F5;border-left:0;-moz-box-sizing:border-box;box-sizing:border-box;color:#000;outline:0;margin:0;padding:0 26px 0 0;position:absolute;right:0;top:0;z-index:1;height:34px;max-width:120px}#Stencil .search-folder-scope-dd::-moz-focus-inner{padding:0;border:0}#Stencil .search-folder-scope-dd .icon-chevron,#Stencil .search-folder-scope-dd .search-folder-name{color:#7590F5;line-height:34px}#Stencil .search-folder-scope-dd .search-folder-name{font-size:1.3rem;padding-left:10px;-moz-transform:translateY(-1px)}.search-content button:active .icon-chevron,.search-content button:focus .icon-chevron,.search-content button:hover .icon-chevron{opacity:1}.search-content button.opened .icon-chevron::before{content:"\\e056"}.search-content button .icon-chevron{letter-spacing:-12px;line-height:inherit;opacity:.5;padding:0;position:absolute;top:0;right:10px;-moz-transform:translateY(1px);-webkit-transition:opacity .2s ease-in-out;-moz-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.search-content button .icon-chevron::before{content:"\\e055";position:relative;left:-6px;top:1px}.search-folder-name{-moz-box-sizing:border-box;box-sizing:border-box;display:block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}@media all and (max-height:740px){#Stencil .search-menu.right-folder-dd.search-folder-dropdown .search-menu-group-overflow{max-height:none}}';e("./../../../jarvis/node_modules/cssify")(r,void 0,"/var/builds/workspace/49376-v3-package/BUILD_CONTAINER/container/label/DOCKER-LOW/app_root/artifacts/css/main.css"),t.exports=r},{"./../../../jarvis/node_modules/cssify":17}],2:[function(e,t,a){"use strict";var r={str_account_folder:"{{account}}/{{folder}}",str_advanced_mail_search:"Búsqueda avanzada de correos",str_advanced_search:"Búsqueda avanzada",str_all_accounts:"Todas las cuentas",str_all_email_types:"Todos los tipos de correo electrónico",str_all_except_trash:"Todo excepto Papelera",str_all_folders:"Todas las carpetas",str_all_mail:"Todos los correos",str_all:"Todas",str_any_time:"En cualquier momento",str_better:"mejores",str_branding_google_drive:"Google Drive",str_branding_mail:"Yahoo Correo",str_branding_sky:"Sky",str_branding:"Yahoo",str_close:"Cerrar",str_cloud_storage_providers_body:"Ahorra tiempo al buscar documentos conectando tu cuenta de Google Drive a Yahoo Correo.",str_cloud_storage_providers_header:"Incluye archivos de tu Google Drive",str_connect:"Conectarse ahora",str_contact_suggestion_onboarding_description:"Haz clic en este contacto para obtener resultados de búsqueda {{better}}.",str_contact_suggestion_onboarding_title:"Contactos inteligentes",str_contains:"Contiene",str_custom_date:"Fecha personalizada…",str_custom_view_callout_text:"Buscaste <strong>{{query}}</strong> {{count}} veces. Guarda el término para poder acceder más rápido.",str_date:"Fecha",str_drive:"Drive",str_financial:"Finanzas",str_folder_bulk:"Spam",str_folder:"Carpeta",str_folder_chats:"Mensajes instantáneos",str_folder_draft:"Borradores",str_folder_drafts:"Borradores",str_folder_inbox:"Buzón",str_folders:"Carpetas",str_folder_search_onboarding_description:"Haz clic en la flecha para buscar en las {{folders}} y para acceder a más opciones de búsqueda.",str_folder_search_onboarding_title:"Búsquedas más inteligentes",str_folder_sent:"Enviados",str_folders_lowercase:"carpetas",str_folder_spam:"Spam",str_folder_trash:"Papelera",str_from:"De",str_has_attachment:"Tiene un archivo adjunto",str_has_image:"Tiene una imagen",str_important:"Importante",str_in_the_last_30_days:"En los últimos 30 días",str_in_the_last_7_days:"En los últimos 7 días",str_later:"Quizá más tarde",str_me2me:"Yo",str_not_now:"No en este momento",str_onboarding_got_it_btn:"Entiendo",str_personal:"Gente",str_reminders:"Recordatorios",str_saved_search:"Búsqueda guardada",str_save:"Guardar",str_search_add_keyword:"Añadir palabras clave",str_search_advanced:"Presionar Intro para abrir el panel de búsqueda avanzada",str_search_assist:"Las búsquedas comunes incluyen palabras clave, personas, empresas y nombres de archivos",str_search_btn:"Buscar",str_search:"Buscar",str_search_calendar:"Buscar en la Agenda",str_search_contacts:"Buscar en Contactos",str_search_for_contact:"Buscar el contacto {{ contactName }} en el buzón de correo",str_search_for_recent:"Ejecutar la búsqueda reciente {{ keyword }} en el buzón de correo",str_search_in_account:"Buscar en {{accountName}}",str_search_in:"Buscar",str_search_in_folder:"Buscar coincidencia con la palabra clave en:",str_search_mail:"Buscar en Mail",str_search_mail_for:"Buscar la palabra clave {{ keyword }} en el buzón de correo",str_search_name_placeholder:"{{accountName}}, busca en tu buzón de correo",str_search_notepad:"Buscar en el Bloc de notas",str_search_sky:"Buscar Sky",str_search_sky_for:"Buscar Sky para \"{{keyword}}'",str_search_web:"Buscar en la Web",str_search_web_for:"Buscar en la web \"{{ keyword }}'",str_search_web_suggestion:"Buscar en la web",str_shopping:"Compras",str_smartviews:"Vistas inteligentes",str_social:"Social",str_starred:"Destacados",str_subject:"Asunto",str_suggestions_available:"Hay {{ count }} sugerencias disponibles. Usa las flechas hacia arriba y abajo para navegar.",str_suggestions_not_available:"No hay sugerencias disponibles.",str_to_lowercase:"para",str_to:"Para",str_travel:"Viajes",str_type:"Tipo",str_unread:"No leído",str_web_search:"Búsqueda en la Web",str_web_search_shortcut:"Mayús. + Intro",last:null};t.exports=r},{}],3:[function(e,t,a){"use strict";var r,s=e("react/addons"),n=e("lodash"),o=e("SearchConstants"),i=e("../mixins/DropdownMixin"),c=e("Context"),l=e("FolderStore"),d=e("SearchQuery"),u=e("./ContactTypeAhead.jsx"),h=e("../dropdown/FolderDropdownV3.jsx"),p=e("../../../../artifacts/lang"),g=e("DOMUtils");r=s.createClass({displayName:"AdvancedSearch",propTypes:{query:s.PropTypes.shape({keyword:s.PropTypes.string.isRequired}),onQuery:s.PropTypes.func.isRequired},mixins:[s.addons.LinkedStateMixin,i,c],getInitialState:function(){return{dateValue:""}},componentDidMount:function(){var e=this;e.prepopulateInputs(e.props.query),e.focusFirstElement()},render:function(){var e=this,t=s.addons.classSet({Dn:"custom"!==e.state.dateValue});return s.createElement("div",null,s.createElement("button",{className:"button-plain Fl-end Mx-14 Mt-14 Mb-6",title:p.str_close,onClick:e.props.setClosed},s.createElement("span",{className:"icon icon-small-close icon-light lh-10 Pend-0"})),s.createElement("form",{className:"c-b Bgc-w Px-20 Pt-0 pb-26 adv-search-container",onKeyDown:e.handleKeyDown,onChange:e.handleChange,onSubmit:e.handleSubmit},s.createElement("table",{className:"W-100",role:"presentation"},s.createElement("col",{width:"75px"}),s.createElement("col",null),this.renderAccountFolderSelection(),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},p.str_from),s.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-from",onKeyDown:e.handleFromKeyDown},s.createElement(u,{ref:"from",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:o.ADV_SEARCH_CONTACT_SUGGEST_FROM,onChange:e.handleChange}))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},p.str_to),s.createElement("td",{role:"presentation",className:"Pstart-0",id:"adv-search-to"},s.createElement(u,{ref:"to",peopleSuggestions:this.props.peopleSuggestions,accounts:this.props.accounts,id:o.ADV_SEARCH_CONTACT_SUGGEST_TO,onChange:e.handleChange}))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},s.createElement("label",{htmlFor:"adv-search-subject"},p.str_subject)),s.createElement("td",{role:"presentation",className:"Pstart-0"},s.createElement("input",{type:"text",ref:"subject",id:"adv-search-subject",className:"W-100 Py-6 My-4"}))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},s.createElement("label",{htmlFor:"adv-search-contains"},p.str_contains)),s.createElement("td",{role:"presentation",className:"Pstart-0"},s.createElement("input",{type:"text",ref:"contains",id:"adv-search-contains",className:"W-100 Py-6 My-4"}))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},s.createElement("label",{htmlFor:"adv-search-date"},p.str_date)),s.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},s.createElement("div",{className:"custom-select W-100"},s.createElement("select",{className:"W-100 Py-6 My-4",ref:"date",id:"adv-search-date",valueLink:e.linkState("dateValue")},s.createElement("option",{value:""},p.str_any_time),s.createElement("option",{value:"week"},p.str_in_the_last_7_days),s.createElement("option",{value:"month"},p.str_in_the_last_30_days),s.createElement("option",{value:"custom"},p.str_custom_date))))),s.createElement("tr",{role:"presentation",className:t},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0"}),s.createElement("td",{role:"presentation",className:"Pstart-0 Va-m"},s.createElement("div",null,s.createElement("div",{className:"D-ib"},s.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"fromDate"})),s.createElement("span",{className:"D-ib Mx-10"},p.str_to_lowercase),s.createElement("div",{className:"D-ib"},s.createElement("input",{className:"Py-6 My-4",type:"text",size:"12",maxLength:"10",placeholder:"YYYY/MM/DD",ref:"toDate"}))))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Pstart-0"}),s.createElement("td",{role:"presentation",className:"Pstart-0"},s.createElement("label",{className:"cbox Mt-10"},s.createElement("input",{type:"checkbox",ref:"attachment",id:"adv-search-attachment"}),s.createElement("span",{className:"icon c-b"}),s.createElement("span",{className:"text"},p.str_has_attachment)))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Pstart-0"}),s.createElement("td",{role:"presentation",className:"Pstart-0"},s.createElement("label",{className:"cbox Mt-10"},s.createElement("input",{type:"checkbox",ref:"image",id:"adv-search-image"}),s.createElement("span",{className:"icon c-b"}),s.createElement("span",{className:"text"},p.str_has_image)))),s.createElement("tr",{role:"presentation"},s.createElement("td",{role:"presentation",className:"Pstart-0"}),s.createElement("td",{role:"presentation",className:"Pstart-0"},s.createElement("button",{onKeyDown:e.handleButtonKeyDown,type:"submit",ref:"advSearchBtn",className:"Btn default miwpx-117 bgc-lb bdrc-lb Mt-14 Bgi-n c-w Mend-6 Bdrs-6 bxsh-lb Va-t Py-5 hpx-30"},p.str_search_mail))))))},renderAccountFolderSelection:function(){var e=this.props;return s.createElement("tr",{role:"presentation",onClick:g.halt},s.createElement("td",{role:"presentation",className:"Va-m Pstart-0 label-text"},p.str_search_in),s.createElement("td",null,s.createElement(h,{ref:"advancedFolderMenu",className:"advanced-search-folder-menu",query:e.query,accounts:e.accounts,currentAccount:e.currentAccount,smartViews:e.smartViews,isRTL:e.isRTL,isImapinEnabled:e.isImapinEnabled,onSelect:e.onQuery})))},handleSubmit:function(e){var t=this;t.props.handleMailSearch("search_box_adv_search"),t.props.setClosed(),g.halt(e)},handleChange:function(){var e=this,t=e.refs,a={from:t.from.getInputValue(),to:t.to.getInputValue(),subject:t.subject.getDOMNode().value,contains:t.contains.getDOMNode().value,date:t.date.getDOMNode().value,folder:t.folder&&t.folder.getDOMNode().value,type:t.type&&t.type.getDOMNode().value,attachment:t.attachment.getDOMNode().checked,image:t.image.getDOMNode().checked,fromDate:t.fromDate.getDOMNode().value,toDate:t.toDate.getDOMNode().value};e.setContainerValue(e.convertToQueryObject(a))},setContainerValue:function(e){var t=this,a=t.props.query;t.props.onQuery(new d({keyword:e.keyword,suggestion:a.suggestion,folders:e.folders?e.folders:a.folders,refinements:e.refinements?e.refinements:a.refinements,smartviews:e.smartviews?e.smartviews:a.smartviews}))},handleButtonKeyDown:function(e){"Tab"!==e.key||e.shiftKey||(this.focusFirstElement(),g.halt(e))},handleFromKeyDown:function(e){"Tab"===e.key&&e.shiftKey&&(this.refs.advSearchBtn.getDOMNode().focus(),g.halt(e))},handleKeyDown:function(e){"Escape"===e.key&&this.props.setClosed(),e.stopPropagation()},appendSearchQuery:function(e,t,a){a.match(/\s/)&&t?e.push(t+'"'+a+'"'):e.push(t+""+a)},convertToQueryObject:function(e){var t,a,r,s,n,o,i=this,c=i.getStore(l),d=yui.common.Utils.features.enabled("LMV3"),u=[];return e.from&&i.appendSearchQuery(u,"from:",e.from),e.to&&i.appendSearchQuery(u,"to:",e.to),e.subject&&i.appendSearchQuery(u,"subject:",e.subject),e.contains&&i.appendSearchQuery(u,"",e.contains),"*trash"===e.folder?r=[]:e.folder&&(t=c.findByFID(e.folder),r=[{displayName:c.getLocalizedFolderNameById(t.id||t.folderInfo.index.toString()),acctIds:null,folderIds:[t.id||t.folderInfo.index.toString()]}]),e.type&&(a=["is:"+e.type]),e.attachment&&i.appendSearchQuery(u,"has:attachment",""),e.image&&i.appendSearchQuery(u,"has:image",""),e.date&&(s=new Date,"week"===e.date?(o=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate(),s.setDate(s.getDate()-7),n=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()):"month"===e.date?(o=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate(),s.setDate(s.getDate()-30),n=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()):"custom"===e.date&&(n=e.fromDate,o=e.toDate),n&&(d?i.appendSearchQuery(u,"after:",'"'+n+'"'):i.appendSearchQuery(u,"after:",n)),o&&(d?i.appendSearchQuery(u,"before:",'"'+o+'"'):i.appendSearchQuery(u,"before:",o))),{keyword:u.join(" "),folders:r,refinements:a}},focusFirstElement:function(){this.refs.from.focus()},matchFromToSubject:function(e,t){var a=this.refs;return t.match(/\s/)&&(t=t.replace(/(['"])(.*)\1/,"$2").replace(/\\(['"])/g,"$1")),"subject"===e?a[e].getDOMNode().value=t:a[e].setInputValue(t),!0},matchDates:function(e,t){var a=this.refs;return!isNaN(new Date(t).getTime())&&(this.setState({dateValue:"custom"},function(){"after"===e?a.fromDate.getDOMNode().value=t:a.toDate.getDOMNode().value=t,this.handleChange()}),!0)},matchHas:function(e,t){var a,r=this.refs,s=[];return(a=t.match(/(["'])(.*)\1/))&&(t=a[2]),"has"===e&&(s=["attachment","image"]),s.indexOf(t)>=0&&("has"===e&&(r[t].getDOMNode().checked=!0),!0)},runRegularExpression:function(e,t,a){for(var r=e.exec(t),s=t;r;)a(r[1],r[2])&&(s=s.replace(r[0],"")),r=e.exec(t);return s},prepopulateInputs:function(e){var t,a,r=this,s=e.keyword||"",i=r.getStore(l),c=r.refs;r.props.folder&&c.folder&&(c.folder.getDOMNode().value=r.props.folder),s=r.runRegularExpression(o.REGEX_FROM_TO_SUBJECT,s,r.matchFromToSubject),s=r.runRegularExpression(o.REGEX_AFTER_BEFORE,s,r.matchDates),s=r.runRegularExpression(o.REGEX_HAS_IS_IN,s,r.matchHas),(a=n.find(e.refinements,function(e){return"is"===e.trim().split(":")[0]}))&&c.type&&(c.type.getDOMNode().value=a.trim().split(":")[1]),(t=n.find(e.folders,function(e){return!n.isEmpty(e.folderIds)}))&&c.folder&&(t=i.findByIndex(t.folderIds[0]),c.folder.getDOMNode().value=t.folderInfo.fid),c.contains.getDOMNode().value=s.replace(/\s+/," ").trim(),r.handleChange()}}),t.exports=r},{"../../../../artifacts/lang":2,"../dropdown/FolderDropdownV3.jsx":10,"../mixins/DropdownMixin":11,"./ContactTypeAhead.jsx":5,Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",lodash:"lodash","react/addons":"react/addons"}],4:[function(e,t,a){"use strict";var r,s=e("react/addons"),n=e("StringUtils");r=s.createClass({displayName:"ContactSuggestion",render:function(){var e=s.addons.classSet({Ell:!0,"menu-active-item":this.props.isSelected});return this.props.data.emailAddresses[0]?s.createElement("div",{className:e,dir:n.getTextDirection(this.props.data.displayStr)},s.createElement("span",{className:"Mx-4"},this.boldify(n.getBidiString(this.props.data.displayStr),this.props.inputValue)),s.createElement("span",{className:"Mx-4 parens",dir:"ltr"},this.boldify(this.props.data.emailAddresses[0],this.props.inputValue))):null},boldify:function(e,t){var a=n.indexOfIgnoreCase(e,t),r=a+t.length,o=e.substring(0,a),i=e.substring(a,r),c=e.substring(r),l=n.addRTLJoiners([o,i,c]);return a>=0?s.createElement("span",null,l[0],s.createElement("strong",null,l[1]),l[2]):s.createElement("span",null,e)}}),t.exports=r},{StringUtils:"StringUtils","react/addons":"react/addons"}],5:[function(e,t,a){"use strict";var r,s=e("react/addons"),n=e("lodash"),o=e("../../../../artifacts/lang"),i=e("SearchActions"),c=e("SearchQuery"),l=e("Typeahead"),d=e("./ContactSuggestion.jsx"),u=e("../../stores/PersonSuggestion"),h=e("ObjectUtils"),p=e("StringUtils"),g=e("Context");r=s.createClass({displayName:"ContactTypeahead",mixins:[g],getInitialState:function(){return{inputValue:""}},getPeopleSuggestions:function(e,t){return n.chain(e).filter(function(e){return e.emailAddresses}).map(function(e){return e.emailAddresses.map(function(t){return new u({displayStr:e.displayStr,imageUrl:e.imageUrl,emailAddresses:[t],intent:e.intent,overrrideWithEmail:!0})})}).flatten().filter(function(e){return p.containsIgnoreCase(e.displayStr,t)||p.containsIgnoreCase(e.emailAddresses[0],t)}).value()},render:function(){var e=this.props,t=this.state,a=this.getPeopleSuggestions(h.getValue(e.peopleSuggestions,[t.inputValue],[]),t.inputValue);return s.createElement(l,{ref:"typeahead",items:a,inputValue:t.inputValue,disabled:e.disabled,itemTemplate:d,onChange:this.handleChange,onComplete:this.handleComplete,getItemValue:this.getItemValue,getAriaCountMessage:this.getAriaCountMessage,getAriaSuggestionMessage:this.getAriaSuggestionMessage,handleInputHint:this.handleInputHint})},handleChange:function(e){var t=this;t.executeAction(i.fetchSuggestions,{query:new c({keyword:e.inputValue}),fechnpsy:!0,searchId:this.props.id,accounts:this.props.accounts}),t.setState({inputValue:e.inputValue},t.props.onChange)},handleInputHint:function(e,t){var a="",r=t.displayStr,s=t.emailAddresses[0],n=new RegExp("^"+p.escapeRegExp(e),"i");return n.test(r)?a=r:n.test(s)&&(a=s),a},handleComplete:function(e,t){this.handleChange({inputValue:t?t.emailAddresses[0]:e.value})},getItemValue:function(e){return e.emailAddresses[0]},getInputValue:function(){return this.state.inputValue},focus:function(){this.refs.typeahead.focus()},setInputValue:function(e){this.setState({inputValue:e},this.props.onChange)},getAriaCountMessage:function(e){return e?n.template(o.str_suggestions_available,null)({count:e}):o.str_suggestions_not_available},getAriaSuggestionMessage:function(e){if(e)return e.displayStr}}),t.exports=r},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"./ContactSuggestion.jsx":4,Context:"Context",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchQuery:"SearchQuery",StringUtils:"StringUtils",Typeahead:"Typeahead",lodash:"lodash","react/addons":"react/addons"}],6:[function(e,t,a){"use strict";function r(e,t){return o.findIndex(e||[],function(e){return"string"==typeof e&&e===t||e.query&&e.query===t})}var s,n=e("react/addons"),o=e("lodash"),i=e("Utils"),c=e("Context"),l=e("SearchConstants"),d=e("GlobalConstants"),u=e("SearchActions"),h=e("ObjectUtils"),p=e("SearchUtils"),g=e("ActionStore"),m=e("FolderStore"),f=e("../dropdown/FolderDropdownV3.jsx"),S=e("./AdvancedSearch.jsx"),y=e("./SearchButton.jsx"),_=e("Token"),b=e("TokenizedTypeahead"),v=e("./Suggestion.jsx"),E=e("Onboarding"),w=e("../../../../artifacts/lang"),C=e("DOMUtils"),A=e("StringUtils"),x=e("StatService"),T=yui.common.Utils.features.enabled("searchWebSuggestions"),I=yui.common.Utils.features.enabled("searchNamePlaceholder"),N=yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting,k=e("../../stores/PersonSuggestion"),R=e("../../stores/SearchSuggestion"),D=e("SearchQuery"),O=[c];s=n.createClass({displayName:"Container",mixins:O,showPromo:!1,getInitialState:function(){return{searchId:null,query:{},appType:d.MAIL_APP,recentSearches:[],peopleSuggestions:{},hasShownFolderSearchOnboarding:this.props.hasShownFolderSearchOnboarding,isAdvancedPaneOpen:!1,keyword:"",tokens:[],preventSuggestionHighlight:!1,contactNameText:"",currentFolder:null,scrollToSearchClicked:!1}},componentDidMount:function(){var e=this,t=e.getContext();this.getStore(g).on("changed",this.onAction),t.events.on("search:advancedSearch:open",e.showAdvancedPane),t.events.on("search:advancedSearch:close",e.handleClose),t.events.on("search:advancedSearch:toggle",e.toggleAdvancedPane),e._yuiEvents.push(yui.on("search:jumpToSearch",e.handleJumpToSearch)),e._yuiEvents.push(yui.on("search:jumpToAdvancedSearch",e.handleJumpToAdvSearch)),e._yuiEvents.push(yui.on("search:setSmartView",e.handleSmartViews)),e._yuiEvents.push(yui.on("search:fireSearch",e.handleStormSearch)),e._yuiEvents.push(yui.on("search:fireBootcampSearch",e.handleFireBootcampSearch)),e._yuiEvents.push(yui.on("search:focus",e.refs.typeahead.focus)),e._yuiEvents.push(yui.on("ui:currentFolder",e.setCurrentFolder)),e.fetchSuggestionsThrottled=o.debounce(e.fetchSuggestions,200),e.fetchWebSuggestionsThrottled=o.debounce(e.fetchWebSuggestions,200)},componentWillUnmount:function(){var e=this,t=e.getContext();this.getStore(g).removeListener("changed",this.onAction),t.events.removeListener("search:advancedSearch:open",e.showAdvancedPane),t.events.removeListener("search:advancedSearch:close",e.handleClose),e._yuiEvents.forEach(function(e){e.detach()})},setCurrentFolder:function(e){var t,a=this.getContext().getStore(m);e&&e.fid&&(t=a.findByFID(e.fid))&&this.setState({currentFolder:t.id||t.folderInfo.index.toString()})},addRecentSearch:function(e,t){var a,s=e,n=r(s,t);return"string"!=typeof t||t.trim()?(n>-1?((a=o.pullAt(s,n)[0]).count+=1,s.unshift(a)):s.unshift({query:t,count:1}),s=o.uniq(s).slice(0,NeoConfig.maxSearchHistory),t&&x.stat({name:"search_sugg_add_recent"}),s):s},onAction:function(){var e,t=this.getStore(g).getActionInfo(),a=h.getValue(t,["data"],{}),r={},s="",n=this.props.xobniContactsStore,i=n&&n.cache,c={};switch(t.action){case d.SMARTVIEWS_LOADED:case d.SETTINGS_CHANGE:case d.METADATA_CHANGE:case d.ONBOARDING_SHOW:case d.APP_CHANGE:case d.SEARCH_TAB_ACTIVE:this.setState(a);break;case d.SEARCH_TAB_INACTIVE:this.state.searchId===a.searchId&&this.setState(a);break;case l.SEARCH_START:case l.SET_QUERY:this.setState({query:a.query});break;case l.LOAD_RECENT_SEARCHES:this.setState({recentSearches:[].concat(this.state.recentSearches,a.data)});break;case l.ADD_RECENT_SEARCH:if(!N){this.setState({recentSearches:a.data});break}this.setState({recentSearches:this.addRecentSearch(this.state.recentSearches,a.data)});break;case l.REMOVE_RECENT_SEARCH:this.setState({recentSearches:a.data});break;case l.BOOTCAMP_SUGGESTIONS_RECEIVED:h.getValue(a,["query","keyword"])&&a.data&&a.data.length&&(r[s=a.query.keyword.toLowerCase()]=a.data,this.props.searchCacheContacts&&!this.state.peopleSuggestions[s]&&i&&(e=i.search(s,p.getCurrentAccountEmail(a.query)),this.logRankingDifference(r[s],e,{compareKey:"serviceId",matchStatKey:"contact_search_ranking_same",unMatchStatKey:"contact_search_ranking_different"}),this.measureCacheSuggestionQuality(r[s],e,{compareKey:"serviceId",keyForGoodQuality:"contact_suggestion_relevant_shown",keyForBadQuality:"contact_suggestion_relevant_not_shown"})),this.setState({peopleSuggestions:o.merge({},this.state.peopleSuggestions,r)}));break;case l.WEB_SUGGESTIONS_RECEIVED:a.data&&(c=h.getValue(a.data,["r"],[]),this.setState({webSuggestions:c}))}},measureCacheSuggestionQuality:function(e,t,a){var r=e&&e[0];(r||t.length)&&(o.some(t,{serviceId:r.serviceId})?x.stat(a.keyForGoodQuality):x.stat(a.keyForBadQuality))},logRankingDifference:function(e,t,a){var r=e.length&&e[0],s=t.length&&t[0],n=a.compareKey;n&&(r=r&&r[n],s=s&&s[n]),(r||s)&&(r===s?x.stat(a.matchStatKey):x.stat(a.unMatchStatKey))},renderSearchInputArea:function(){var e,t,a,r,s=this,i=[],c=this.getPeopleSuggestions(this.state.query.keyword),l=this.getWebSuggestions(this.state.query.keyword),d=this.getRecentSearches(this.state.query.keyword),u=new R({intent:"ADVANCED_SEARCH",displayStr:""}),p=new R({intent:"SEARCH_PROMO",displayStr:""}),g=this.generateTokens(this.state.query),m=this.state.query.keyword||"",f="",S=[];return 0===g.length&&(I&&s.isMailApp()?(e=h.getValue(NeoConfig,["userDataObj","userSendPref","firstName"],""),t=h.getValue(NeoConfig,["userDataObj","userSendPref","defaultFromName"],""),f=(a=e||t.split(" ")[0])&&(r=o.template(w.str_search_name_placeholder)({accountName:a}))&&r.length<=50?r:w.str_search):f=w.str_search),s.state.isAdvancedPaneOpen||(i=s.isMailApp()?[].concat(c,d,l):[],s.state.query.keyword&&!T&&i.push(new R({intent:"SEARCH_WEB",displayStr:[h.getValue(this.state.query,["suggestion","displayStr"],""),h.getValue(this.state.query,["keyword"],"")].join(" ").trim()})),!m&&this.shouldShowSearchPromo()&&i.push(p),(this.shouldShowSearchPromo()||m||this.state.query.suggestion)&&i.push(u)),s.props.searchKeywordPlaceholderEnabled&&g.length>0&&(f=w.str_search_add_keyword),S.push(n.createElement(b,{ref:"typeahead",className:"right-folder-dd",inputValue:m,items:i,tokens:g,tokenTemplate:_,itemTemplate:v,placeholder:o.unescape(f),onFocus:s.handleFocus,onChange:s.handleChange,onComplete:s.handleComplete,onKeyUp:s.handleKeyUp,onKeyPress:s.handleKeyPress,getItemValue:s.getItemValue,getAriaCountMessage:s.getAriaCountMessage,getAriaSuggestionMessage:s.getAriaSuggestionMessage,handleInputHint:s.handleInputHint,handleDestroyToken:s.handleDestroyToken})),this.showPromo=!1,n.createElement("div",{className:""},S)},render:function(){var e=this;return n.createElement("div",{className:"search-content"},n.createElement("div",{className:"search-autocomplete Fz-s Mend-6 W-100 ff-h Bgc-t c-n right-folder-dd"},n.createElement("div",{className:"search-box-inner"},e.renderFolderDropdown(),e.renderSearchInputArea()),e.renderAdvancedSearch()),e.renderButtons(),e.renderFolderSearchOnboarding())},renderAdvancedSearch:function(){if(this.state.isAdvancedPaneOpen&&this.isMailApp())return n.createElement(S,{query:this.getQuery(),onQuery:this.setQuery,setClosed:this.handleClose,handleMailSearch:this.handleMailSearch,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,peopleSuggestions:this.state.peopleSuggestions,accounts:this.props.accounts,currentAccount:this.props.currentAccount})},renderButtons:function(){var e=this;return n.createElement("div",{className:"search-buttons"},n.createElement(y,{searchLabel:e.getSearchBtnText(),handleSearch:e.handleMailSearch}),n.createElement(y,{searchLabel:"sky"===NeoConfig.partnerType?w.str_search_sky:w.str_search_web,handleSearch:e.handleWebSearchBtn,id:"web-search-btn"}))},shouldRenderFolderSearchOnboarding:function(){return!this.state.hasShownFolderSearchOnboarding},_hasPeopleSuggestion:function(){return(this.getPeopleSuggestions(this.state.query.keyword)||[]).length},renderFolderSearchOnboarding:function(){var e,t,a,r=this;if(r.shouldRenderFolderSearchOnboarding()&&r.refs.folderMenu)return e=r.refs.folderMenu.getDOMNode(),t=e.getBoundingClientRect(),a={x:t.left-16,y:t.top+45},n.createElement(E,{templateType:"OnboardingText",metaDataKey:"hasShownFolderSearchOnboarding",id:"folderSearchOB",width:240,dir:"top",title:w.str_folder_search_onboarding_title,body:A.stringReplace(w.str_folder_search_onboarding_description,{folders:n.createElement("b",null,w.str_folders_lowercase)}),buttonText:w.str_onboarding_got_it_btn,coordinates:a})},renderFolderDropdown:function(){if(this.shouldFolderDropdownRender())return n.createElement(f,{ref:"folderMenu",query:this.getQuery(),accounts:this.props.accounts,currentAccount:this.props.currentAccount,currentFolder:this.state.currentFolder,smartViews:this.state.smartViews,isRTL:this.props.isRTL,isImapinEnabled:this.props.isImapinEnabled,onSelect:this.setQuery,executeSearch:this.executeSearch,openAdvancedSearch:this.showAdvancedPane})},generateTokens:function(e){var t=[];return e.suggestion&&t.push(o.assign(e.suggestion,{type:"bootcamp",fallbackImageUrl:l.PERSON_TOKEN_FALLBACK_IMG_DATA})),t},handleDestroyToken:function(e){"bootcamp"===e.type&&(this.setState({query:o.merge({},this.state.query,{suggestion:null})}),x.logRapid("mt:click",{action:"search_box_token_close",append:{mTknTyp:"people"}}))},shouldFolderDropdownRender:function(){return this.state.appType===d.MAIL_APP},getAriaCountMessage:function(e){return e?o.template(w.str_suggestions_available,null)({count:e}):w.str_suggestions_not_available},getAriaSuggestionMessage:function(e){var t;switch(e?e.intent:""){case"RECENT_SEARCH":return o.template(w.str_search_for_recent,null)({keyword:e.displayStr});case"PEOPLE":return o.template(w.str_search_for_contact,null)({contactName:e.displayStr});case"SEARCH_WEB":return t="sky"===NeoConfig.partnerType?w.str_search_sky_for:w.str_search_web_for,o.template(t,null)({keyword:e.displayStr});case"SEARCH_MAIL":return o.template(w.str_search_mail_for,null)({keyword:e.displayStr});case"ADVANCED_SEARCH":return w.str_search_advanced}},getItemValue:function(e){return"ADVANCED_SEARCH"===e.intent?this.getQuery().keyword:e.displayStr},getSearchBtnText:function(){var e;switch(this.state.appType){case d.NOTEPAD_APP:e=w.str_search_notepad;break;case d.CALENDAR_APP:e=w.str_search_calendar;break;case d.CONTACTS_APP:e=w.str_search_contacts;break;default:e=w.str_search_mail}return e},appendAndDedupContacts:function(e,t){var a={};return(e=o.uniq(e,!1,function(e){return e.serviceId})).forEach(function(e,t){a[e.serviceId]=t}),t.forEach(function(t){var r=a[t.serviceId];r>=0&&(t.imageUrl&&(e[r].imageUrl=t.imageUrl),t.emailAddresses&&t.emailAddresses.length>0&&(e[r].emailAddresses=t.emailAddresses))}),o.uniq(e.concat(t),!1,function(e){return e.serviceId})},getPeopleSuggestions:function(e){var t,a,r,s,n,i=this.props.xobniContactsStore,c=i&&i.cache,l=this.getQuery(),d=p.getCurrentAccountEmail(l),u=[];return e?(a=(e||"").toLowerCase(),s=this.state.peopleSuggestions[a],this.props.searchCacheContacts&&c?(n=c.search(a,d),u=this.appendAndDedupContacts(n,s||[])):u=s,u&&u.length||(t=o.keys(this.state.peopleSuggestions)||[],r=a,t.forEach(function(e){a.indexOf(e)>-1&&e.length>r.length&&(r=e)}),s=this.state.peopleSuggestions[r],this.props.searchCacheContacts&&c?(n=c.search(r,d),u=this.appendAndDedupContacts(n,s||[])):u=s),o.uniq(u||[]).slice(0,3).map(function(e){return new k(e)})):[]},getWebSuggestions:function(e){var t;return e&&T?((t=o.uniq(this.state.webSuggestions||[]).map(function(e){return new R({intent:"WEB_SEARCH",displayStr:e.k,keyword:e.k})})).length&&t.unshift(new R({intent:"WEB_SEARCH_HEADER",displayStr:l.str_search_web_suggestion})),t):[]},isQueryInRecentSearch:function(e,t){return"string"==typeof t?!!t.trim()&&!!e&&(!e.trim()||A.containsIgnoreCase(t,e)):t.query&&!!t.query.trim()&&!!e&&(!e.trim()||A.containsIgnoreCase(t.query,e))},getRecentSearches:function(e){var t=this;return o.uniq(this.state.recentSearches||[]).filter(function(a){return t.isQueryInRecentSearch(e,a)}).slice(0,3).map(function(e){return new R({intent:"RECENT_SEARCH",displayStr:e.query?e.query:e,keyword:e.query?e.query:e})})},handleInputHint:function(e,t){return"SEARCH_MAIL"===t.intent?e:t.getMatchAndRemainder(e)},handleJumpToAdvSearch:function(e){var t=this,a=t.getStore(m).findByFID(h.getValue(e,"folders.0.fid"));a&&t.setState({query:new D({folders:[{acctIds:[a.acctId],displayName:h.getValue(a,"folderInfo.name"),folderIds:a.id}]})}),t.showAdvancedPane()},handleJumpToSearch:function(e){var t={keyword:e.keyword};e.showPromo?(this.showPromo=e.showPromo,this.setState({query:t,scrollToSearchClicked:!0})):this.setState({query:t}),this.refs.typeahead.focus()},shouldShowSearchPromo:function(){return this.props.scrollToSearchV2Enabled&&this.showPromo},handleOpen:function(){this.fetchSuggestionsThrottled()},handleFocus:function(){return this.handleOpen()},handleClose:function(){this.setState({isAdvancedPaneOpen:!1})},getDefaultPeopleSuggestion:function(){var e,t=this.getQuery(),a=t.suggestion;a||((e=this.getPeopleSuggestions(this.state.contactNameText)||[]).length>0&&(a=e[0],this.setState({query:o.merge({},t,{suggestion:a})})),this.cleanContactNameText())},cleanContactNameText:function(){this.setState({contactNameText:""}),this.refs.typeaheadWords.focus()},handleChangeContacts:function(e,t){var a=o.merge({},this.getQuery(),{suggestion:t.length?t[0]:null});this.setState({contactNameText:e.inputValue,query:a}),this.fetchSuggestionsThrottled()},handleChangeWords:function(e){var t=o.merge({},this.state.query,{keyword:e.inputValue});this.setState({query:t})},handleChange:function(e,t){var a=o.merge({},this.state.query,{keyword:e.inputValue,suggestion:t.length?t[0]:null});this.fetchSuggestionsThrottled(),this.fetchWebSuggestionsThrottled(),this.setState({query:a})},handleShiftEnter:function(e){"Enter"===e.key&&e.shiftKey&&(x.stat({name:"search_sugg_web_shortcut"}),this.handleWebSearch(this.state.query,!1),C.halt(e))},handleKeyUp:function(e){this.handleShiftEnter(e)},handleKeyPress:function(e){this.handleShiftEnter(e)},handleComplete:function(e,t){var a=this,r="Enter"===e.key||"click"===e.type,s=a.getQuery(),n=s.keyword||"";if(!a.isMailApp())return a.doNonMailSearch(),a.refs.typeahead.blur(),n;switch(t||(t={intent:"SEARCH_MAIL",displayStr:n,keyword:n}),t.intent){case"ADVANCED_SEARCH":r&&a.showAdvancedPane();break;case"SEARCH_WEB":r&&(x.stat({name:"search_sugg_web_click"}),a.handleWebSearch(this.state.query,!0));break;case"RECENT_SEARCH":r&&(x.stat({name:"search_sugg_search_recent",tags:{count:(a.getQuery().keyword||"").length}}),a._triggerUHEvent(!0),n=t.displayStr,a.executeSearch(new D({keyword:n,typeTag:"search_box_suggestion_recent"})));break;case"WEB_SEARCH":r&&a.handleWebSuggestionSearch(t.keyword);break;case"WEB_SEARCH_HEADER":case"SEARCH_PROMO":break;case"SEARCH_MAIL":a.executeSearch(new D({keyword:s.keyword,refinements:s.refinements,folders:s.folders,smartviews:s.smartviews,suggestion:s.suggestion,typeTag:"search_box_enter"})),a._triggerUHEvent(!0);break;default:r?(a.executeSearch(new D({keyword:"",suggestion:t,view:s.view,folders:s.folders,smartviews:s.smartviews,refinements:s.refinements,typeTag:"search_box_suggestion_people"})),a._triggerUHEvent(!0),x.stat({name:"search_sugg_people_click",tags:{bkt:NeoConfig.expBucketId}})):"ArrowRight"===e.key?this.setState({query:o.merge({},this.state.query,{keyword:e.fullInputValue})}):"Tab"===e.key&&(x.stat({name:"search_sugg_tab_lozenge",tags:{count:s.keyword&&s.keyword.length}}),this.setState({query:o.merge({},this.state.query,{keyword:"",suggestion:t})}))}},handleMailSearch:function(e){var t=this.state.query;this.isMailApp()?(this.executeSearch(new D({keyword:t.keyword,suggestion:t.suggestion,folders:t.folders,refinements:t.refinements,smartviews:t.smartviews,typeTag:e||t.typeTag,displayName:t.displayName,isSavedSearch:t.isSavedSearch})),x.logRapid("mt:click",{action:"mail_search",spid:"search_results"}),this._triggerUHEvent(!1)):(this.doNonMailSearch(),this.refs.typeahead.blur())},handleWebSearchBtn:function(){x.stat({name:"search_sugg_web_btn"}),this.handleWebSearch(this.state.query,!1)},handleWebSearch:function(e,t){var a=document.getElementById("UHSearchWeb"),r=document.getElementById("UHSearchBox"),s=document.getElementById("fr"),n=[h.getValue(e,["suggestion","displayStr"],""),h.getValue(e,["keyword"],"")].join(" ").trim();a&&r&&n&&(s&&s.setAttribute("data-sa",t?"1":"0"),r.value=n,a.click(),x.stat({name:"search_sugg_search_web"}))},handleWebSuggestionSearch:function(e){var t=yui.common.Utils.settings,a=t.value("searchLink"),r=A.addUrlParameters(a+e,{frCode:t.value("searchWebSuggestionsFrCode"),fr2Code:t.value("searchWebSuggestionsFr2Code")});this.refs.typeahead.blur(),window.open(r),x.stat("search_web_suggestion")},getQuery:function(){return this.state.query},setQuery:function(e){this.setState({query:e})},executeSearch:function(e){this.state.scrollToSearchClicked&&(x.stat({name:"click_search_by_scroll_to_search"}),this.setState({scrollToSearchClicked:!1})),i.loadTictac("tictac-searchresults").then(function(){u.customLimit=0,this.executeAction(u.executeSearch,{query:e}),this.refs.typeahead.blur()}.bind(this))},fetchSuggestions:function(){var e=this,t=e.getQuery();!e.state.isAdvancedPaneOpen&&t.keyword&&e.executeAction(u.fetchSuggestions,{query:t,searchId:e.getSearchId(),accounts:this.props.accounts})},fetchWebSuggestions:function(){var e=this,t=e.getQuery();T&&!e.state.isAdvancedPaneOpen&&t.keyword&&e.executeAction(u.fetchWebSuggestions,{query:t})},toggleAdvancedPane:function(){var e=this;e.state.isAdvancedPaneOpen?e.handleClose():e.showAdvancedPane()},showAdvancedPane:function(){this.setState({isAdvancedPaneOpen:!0}),x.stat({name:"search_sugg_adv_search_open"})},doNonMailSearch:function(){var e={query:{keyword:this.state.query.keyword||""}};switch(this.state.appType){case d.NOTEPAD_APP:this.executeAction(u.doNotepadSearch,e);break;case d.CALENDAR_APP:this.executeAction(u.doCalendarSearch,e);break;case d.CONTACTS_APP:this.executeAction(u.doContactsSearch,e)}},handleSmartViews:function(e,t){var a,r=t&&t.categoryName||"";(a=o.filter(this.state.smartViews,function(e){return e.displayName===t.displayName||e.displayName===t.view})).length&&this.executeSearch(new D({smartviews:a[0].query.smartviews,folders:h.getValue(t,"folders",[]),typeTag:t.typeTag||"smartview_"+r}))},handleStormSearch:function(e){this.executeSearch(new D(e))},handleFireBootcampSearch:function(e){"msglist_search_from"!==e.typeTag&&"hovercard_search_email"!==e.typeTag||this.executeSearch(new D({keyword:"",suggestion:{intent:"PEOPLE",displayStr:e.name||e.email,emailAddresses:[e.email]},typeTag:e.typeTag}))},isMailApp:function(){return this.state.appType===d.MAIL_APP},_yuiEvents:[],_triggerUHEvent:function(e){var t=new yui.EventTarget,a=e?"ucs:mailSearchSugg":"ucs:mailSearch";t.publish(a,{broadcast:2,emitFacade:!0}),t.fire(a)},getSearchId:function(){return this.state.searchId}}),t.exports=s},{"../../../../artifacts/lang":2,"../../stores/PersonSuggestion":14,"../../stores/SearchSuggestion":15,"../dropdown/FolderDropdownV3.jsx":10,"./AdvancedSearch.jsx":3,"./SearchButton.jsx":7,"./Suggestion.jsx":8,ActionStore:"ActionStore",Context:"Context",DOMUtils:"DOMUtils",FolderStore:"FolderStore",GlobalConstants:"GlobalConstants",ObjectUtils:"ObjectUtils",Onboarding:"Onboarding",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",SearchUtils:"SearchUtils",StatService:"StatService",StringUtils:"StringUtils",Token:"Token",TokenizedTypeahead:"TokenizedTypeahead",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],7:[function(e,t,a){"use strict";var r,s=e("react/addons");r=s.createClass({displayName:"SearchButton",getDefaultProps:function(){return{className:"",handleSearch:function(){},searchLabel:"",id:"mail-search-btn"}},render:function(){var e,t=this,a={};return a[t.props.className]=!0,e=s.addons.classSet(a),s.createElement("button",{type:"button",className:e,id:t.props.id,onClick:t.props.handleSearch.bind(null,"search_box_click")},t.props.searchLabel)}}),t.exports=r},{"react/addons":"react/addons"}],8:[function(e,t,a){"use strict";var r,s=e("react/addons"),n=e("lodash"),o=e("DOMUtils"),i=e("StringUtils"),c=e("Context"),l=e("../../../../artifacts/lang"),d=e("SearchActions"),u=e("GlobalConstants"),h=e("TokenUtils");r=s.createClass({displayName:"Suggestion",mixins:[c],render:function(){var e=this,t=s.addons.classSet({"menu-active-item":e.props.isSelected});return s.createElement("div",{className:t},e.renderMap[e.props.data.intent].call(e))},boldify:function(e,t){var a=i.indexOfIgnoreCase(e,t),r=e.substr(0,a),n=e.substr(a+t.length),o=e.substr(a,t.length),c=i.addRTLJoiners([r,o,n]);return a>=0?s.createElement("span",null,c[0],s.createElement("b",{className:"Fw-b"},c[1]),c[2]):s.createElement("span",{className:"Va-m"},e)},renderMap:{PEOPLE:function(){var e=this,t=e.props.data,a=e.props.inputValue,r={backgroundImage:"url("+(t.imageUrl?i.addUrlParameters(t.imageUrl,{spsize:"72X72",badge:!0,fallback_url:u.FALLBACK_XOBNI_IMG_URL}):u.FALLBACK_XOBNI_IMG_URL)+")"},n={backgroundColor:e.getRandomPersonColor(t.displayStr)};return s.createElement("div",{className:"Mx-4 Py-2 W-100 Bxz-bb Pos-r Cur-p Bfc","data-id":t.displayStr,ref:"suggestion",onClick:e.handlePersonClick},s.createElement("div",{className:"D-ib wpx-40 hpx-40 Pend-10 Va-m Fl-start"},s.createElement("span",{style:r,className:"bgr-nr wpx-40 hpx-40 Bgz-cv Pos-a Z-1 Bdrs"}),s.createElement("span",{style:n,className:"fz-ms wpx-40 lh-40 c-w Pos-a Z-0 Start-0 Ta-c Bdrs"},t.getInitials())),s.createElement("div",{className:"mt-3"},s.createElement("div",{className:"fz-ms Ell",ref:"name"},e.boldify(t.displayStr,a)),s.createElement("div",{"aria-label":"contact suggestion",className:"c-g Fz-s Ell",ref:"email"},e.boldify(h.getTokenText(e.props.data.emailAddresses,a),a))))},RECENT_SEARCH:function(){var e=this,t=yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting;return s.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},s.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-recent"}),t?null:s.createElement("div",{className:"Mend-1 Fl-end"},s.createElement("span",{className:"icon icon-small-close icon-light D-n lh-40",onClick:e.handleRemoveRecentSearch})),s.createElement("div",{"aria-label":"recent search",className:"lh-40 Ell","data-action":"search-recent"},e.boldify(e.props.data.displayStr,e.props.inputValue)))},WEB_SEARCH:function(){var e=this;return s.createElement("div",{className:"Mx-4 Py-2 Pos-r Cur-p Bfc fz-ms"},s.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-search-web"}),s.createElement("div",{"aria-label":"web search",className:"lh-40 Ell","data-action":"search-web-sugg"},e.boldify(e.props.data.displayStr,e.props.inputValue)))},WEB_SEARCH_HEADER:function(){return s.createElement("div",{className:"suggestion-web-sugg-header Pstart-14 "},s.createElement("div",{"aria-label":l.str_search_web_suggestion,"data-action":"search-web-sugg-header",className:"suggestion-row-content"},s.createElement("strong",null,l.str_search_web_suggestion)))},SEARCH_WEB:function(){var e=this,t="sky"===NeoConfig.partnerType?l.str_search_sky_for:l.str_search_web_for,a=n.template(t)({keyword:e.props.data.displayStr});return s.createElement("div",{className:"suggestion-row suggestion-search-web"},s.createElement("div",{className:"suggestion-row-icon icon icon-search-web"}),s.createElement("div",{"aria-label":a,"data-action":"search-web",className:"suggestion-row-content"},i.stringReplace(t,{keyword:s.createElement("strong",null,e.props.data.displayStr)})),s.createElement("kbd",{className:"suggestion-search-web-shortcut"},l.str_web_search_shortcut))},SEARCH_MAIL:function(){return s.createElement("div",{className:"Mx-4 Py-2 Bxz-bb Pos-r Cur-p Bfc"},s.createElement("div",{className:"Ta-c wpx-40 lh-40 Pend-10 Fl-start icon icon-search"}),s.createElement("div",{"aria-label":"search mail for",className:"lh-40 Ell fz-ms","data-action":"search-mail"},this.props.data.displayStr))},ADVANCED_SEARCH:function(){return s.createElement("div",{className:"suggestion-adv-search"},s.createElement("button",{onClick:this.props.showAdvancedPane},l.str_advanced_mail_search))},SEARCH_PROMO:function(){return s.createElement("div",{className:"search-assist-header Pstart-14"},s.createElement("div",{className:"suggestion-row-content"},l.str_search_assist))}},renderShiftEnterLabel:function(){if(0===this.props.data.typeIndex)return s.createElement("span",{className:"c-g"},l.str_web_search_shortcut)},getRandomPersonColor:function(e){var t=["#940050","#CC008C","#BE0067","#F80E5D","#FE4E4D","#FD6867","#FF1032","#FF8C13","#FF530E","#FA0027"];return t[function(e,t){return(e%t+t)%t}(i.hashCode(e),t.length)]},renderWebSearchHeader:function(){if(0===this.props.data.typeIndex)return s.createElement("div",{className:"D-b Us-n c-g bgc-lg lh-30 Pstart-14 Fw-b",onClick:o.halt},l.str_web_search)},handleRemoveRecentSearch:function(e){var t=this,a=t.props.data.displayStr;t.executeAction(d.removeRecentSearch,a),e.stopPropagation()}}),t.exports=r},{"../../../../artifacts/lang":2,Context:"Context",DOMUtils:"DOMUtils",GlobalConstants:"GlobalConstants",SearchActions:"SearchActions",StringUtils:"StringUtils",TokenUtils:"TokenUtils",lodash:"lodash","react/addons":"react/addons"}],9:[function(e,t,a){"use strict";function r(){return new u(function(e,t){yui.use("tictac-simple-query","mail-persist-meta-data",function(){var a=[],r=[],s=yui.mail.persist.MetaData,n=yui.Tictac.simple,o=s.get("simpleCustomViews");if(n&&n.Query&&"function"==typeof n.Query.fetchSmartViewQuery){try{o&&l.each(JSON.parse(o.json)||[],function(e){var t=-1!==e.name.indexOf(" "),a=E.getValue(e,["query","smartviews"],[]),s={displayName:e.name,account:e.account,query:{smartviews:[{displayName:e.name,name:t?'is:"'+e.name+'"':"is:"+e.name,keyword:E.getValue(e,["query","keyword"],""),suggestion:e.email?{emailAddresses:[e.email]}:{},folders:E.getValue(e,"query.folders",[])}]}};a.length&&(s.query.smartviews=[].concat(s.query.smartviews,a)),r.push(s)})}catch(e){t("custom smartview parse error")}l.each(S.SMARTVIEW_CATEGORIES_KEYS,function(e){a.push(n.Query.fetchSmartViewQuery(e))}),u.all(a).then(function(t){var a=[];l.each(t||[],function(e){var t=e.displayName||e.view,r=-1!==t.indexOf(" "),s={displayName:t};s.query={smartviews:[{displayName:t,name:r?'is:"'+t+'"':"is:"+t,keyword:E.getValue(e,["keyword"],""),suggestion:e.email?{emailAddresses:[e.email]}:{}}]},a.push(s)}),e([].concat(a||[],r||[]))})}})})}var s,n,o,i,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=e("lodash"),d=window.React||e("react/addons"),u=e("EnhancedPromise"),h=e("../autocomplete/Container.jsx"),p=e("ActionStore"),g=e("SearchQuery"),m=e("FolderStore"),f=e("GlobalConstants"),S=e("SearchConstants"),y=e("MessageConstants"),_=e("SearchActions"),b=e("GlobalActions"),v=e("StatService"),E=e("ObjectUtils"),w=e("ExtractionUtils"),C=e("../../utils/AccountUtils"),A=e("Utils"),x=e("BootcampAPIUtilsV2"),T=yui.mail.model.DataStore.Accounts,I=yui.mail.Tabs,N=yui.common.Utils.features,k=yui.common.Utils.settings,R=N.enabled("customViewsCallout"),D=N.enabled("searchNoPVBeacon",!1),O=N.enabled("searchNoLeftRailFolderChange"),U=N.enabled("searchHeroResultsPeopleWithKeyword"),V=NeoConfig.multipleAccounts,F=k.value("imapSyncTime",20),M=e("../../../../artifacts/lang"),P=!!NeoConfig.archive,q=window.performance,B=NeoConfig.forceDS,L=NeoConfig.imapIn&&NeoConfig.accounts&&NeoConfig.accounts.imapInAccounts,H=!!NeoConfig.isRTL,G=yui.UA&&yui.UA.ie,j=["startTime","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd"],z=k.value("searchCacheExpiredHours"),Q=k.value("searchCacheStoreLimit"),W=!1;yui.use("mail-persist-meta-data"),i=d.createClass({displayName:"StormBridge",getInitialState:function(){return this.adCache={},this.permissionWindow=null,{searchTabs:[],activeSearchId:"FOLDER_TAB",cache:{},_searchTabsExtractionStatus:[]}},_getSearchTabDimension:function(){var e=yui.common.Utils.getCachedWindowSize(),t=NeoConfig.hasAds?200:0;return{width:e.width-(190+t),height:e.height-170}},_getEnabledAccounts:function(){return T.get().filter(function(e){return"DISABLED"!==e.status})},_getAccounts:function(){return this._getEnabledAccounts().reduce(function(e,t){return e[t.id]=t,e},{})},_hasNonActiveAccount:function(){return T.get().some(function(e){return"DISABLED"===e.status})},_getCurrentAccount:function(){var e=T.getCurrentAccount();return{id:e.id,description:e.description}},_getSyncingAccounts:function(e){var t,a,r,s=[];return NeoConfig.multipleAccounts&&e&&((t=l.chain(l.pluck(e.folders,"acctIds")).compact().flatten().uniq().value())&&t.length>0?(a=T.get(),r=l.map(t,function(e){return l.find(a,function(t){return t.id===e})})):r=T.get(),s=C.findAccountsInSyncing(r,F)),s},renderEmailHistory:function(e){var t=E.getValue(e,"folders.0.acctIds.0"),a=this._getAccounts(),r=l.size(a),s=!0;return N.enabled("imapInGA")&&a&&r>1&&(s=!!l.find(a,function(e){return e.id===t&&e.isPrimary})),N.enabled("emailHistory")&&s},onSearchTabClose:function(e,t){var a,r,s=Date.now()-36e5*z,n=l.clone(this.state.cache),o=t.main||{},i=0;for(r in this.state.cache)this.state.cache[r]&&this.state.cache[r].cachedTimestamp<s&&(n[r]=null);n[e.searchId]=l.assign(t,{cachedTimestamp:Date.now()},{contentType:o.contentType||t.contentType,filter:o.filter||t.filter});for(r in n)n[r]&&((!a||n[r].cachedTimestamp<n[a].cachedTimestamp)&&(a=r),i++);i>Q&&(n[a]=null),this.setState({cache:n})},_isSearchExtractionsKeywordsEnabled:function(){return N.enabled("searchExtractionsKeywords")},_openSearchTab:function(t,a){var n,o,i,u,h=this,p=t.query,g=t.searchId,m=new yui.mail.ui.BaseWidget,f=t.searchId,S=E.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return s||(s=A.loadTictac("tictac-searchresults")),(u=l.find(this.state.searchTabs,{tabId:f}))||(n=I.getActiveTab(),m.render=function(r){s.then(function(){var s=e("SearchTabContent"),o=e("AppDispatcher"),i=r.getDOMNode(),m=this.state.cache[g]||{},f=h._showRightRail(t,a);d.render(d.createElement(s,c({},m,{searchId:g,query:t.query,searchType:a,sortType:t.sortType,sortOrder:t.sortOrder,context:o.context,imapInEnabled:L,hasMultipleAccounts:V,showEmailHistory:S.get("showEmailHistory"),isArchive:P,snippetsEnabled:-1!==parseInt(S.get("neo.pref.general.snippets"),10),messageDensity:NeoConfig.msgListDensity,simpleEnabled:N.enabled("simple"),unsubscribrEnabled:N.enabled("unsubscribr"),searchGDocsEnabled:N.enabled("searchCloudGoogleLinks"),bootcampV3Enabled:N.enabled("searchBootcampV3"),searchHeroResultsEnabled:N.enabled("searchHeroResults"),searchHeroResultsDuplicatesEnabled:N.enabled("searchHeroResultsDuplicates"),searchHeroResultsPeopleWithKeywordEnabled:U,searchAdFaviconHoverEnabled:N.enabled("searchAdHoverFavicon"),searchAdFlipLabelAndRatingEnabled:N.enabled("searchAdSponsoredRating"),searchAdHoverHighlightEnabled:N.enabled("searchAdHoverHighlight"),searchAdThemeColorEnabled:N.enabled("searchAdThemeColor"),searchExtractionsKeywordsEnabled:this._isSearchExtractionsKeywordsEnabled(),scrollToSearchV2Enabled:N.enabled("scrollToSearchV2"),hideGDocsCallout:this.hideGDocsCallout,searchDemoLink:N.enabled("searchDemoLink"),isForceUser:B,ieVersion:G,hasRightRail:f,lmv3Enabled:N.enabled("LMV3"),isEmailHistoryEnabled:this.renderEmailHistory(p),defaultFilterAll:N.enabled("defaultFilterAll"),filterOrder:k.value("filterOrder"),cardOrder:k.value("cardOrder"),recipientNameInSRP:N.enabled("recipientNameInSRP"),searchResultsLinks:N.enabled("searchResultsLinks"),searchCacheNoFlash:N.enabled("searchCacheNoFlash"),confirmBeforeDelete:N.enabled("confirmBeforeDelete"),searchTabDimension:this._getSearchTabDimension(),syncingAccounts:this._getSyncingAccounts(p),accounts:this._getAccounts(),hasNonActiveAccount:this._hasNonActiveAccount(),currentAccount:this._getCurrentAccount(),isRTL:H,rightRailSearchAdEnabled:this._showRightRailInTravel(t,a),searchHeroExp1Enabled:N.enabled("searchHeroExp1"),searchHeroExp2Enabled:N.enabled("searchHeroExp2"),hideHoverDeleteEnabled:N.enabled("hideHoverDelete"),changeSizeInV3Thumbnail:N.enabled("changeSizeInV3Thumbnail"),onClose:this.onSearchTabClose})),i),u.on("closeChange",function(){d.unmountComponentAtNode(i),this.setState({searchTabs:l.reject(this.state.searchTabs,{tabId:u.tabId}),_searchTabsExtractionStatus:l.reject(this.state._searchTabsExtractionStatus,{tabId:u.tabId})})}.bind(this)),n&&n.widget&&"search"===n.widget.type&&n.set("close",1),this.setState({searchTabs:this.state.searchTabs.concat(u)}),this.state.searchTabs.length>4&&this.state.searchTabs[3].set("close",1)}.bind(this))}.bind(this),o=l.escape(p.toHumanReadableString()),V&&!E.getValue(p,"folders.0.folderIds",null)&&(i=l.escape(p.getHumanReadableAccountsString(this._getAccounts())))&&(o=p.smartviews&&p.smartviews.length?l.template(M.str_account_folder,null)({account:i,folder:o}):[i,o].join(" ")),m.type=m.widgetType="search",m.query=p,m.searchId=g,m.set("title",o),u=yui.mail.ui.Workspace.addContentWidget({p_label:M.str_search,s_label:o,hideToolbar:!0,reuse:!0,widget:m,isRemovable:!0}),this._isSearchExtractionsKeywordsEnabled()&&this.setState({_searchTabsExtractionStatus:this.state._searchTabsExtractionStatus.concat({tabId:f,extraction:!1})}),this._toggleRightRail(a,p),u.set("hideToolbar",!0),u.tabId=f,u.on("closeChange",function(){l.defer(function(){this.setState({activeSearchId:"FOLDER_TAB"}),this.props.context.executeAction(b.searchTabClose,{searchId:g,query:{}})}.bind(this),1)}.bind(this)),u.on("activeChange",function(e){1===e.newVal?(this.setState({activeSearchId:g}),l.defer(function(){this.props.context.executeAction(b.searchTabActive,{searchId:g,searchType:a,query:p})}.bind(this))):(this.setState({activeSearchId:"FOLDER_TAB"}),l.defer(function(){this.props.context.executeAction(b.searchTabInactive,{searchId:g,searchType:a,query:{}})}.bind(this)))}.bind(this))),l.defer(function(){this.props.context.executeAction(b.searchTabActive,{searchId:g,searchType:a,query:p})}.bind(this)),r().then(function(e){this.props.context.executeAction(b.smartviewsLoaded,{searchId:g,smartViews:e})}.bind(this)),I.switchToTab(u),u},_closeSearchTab:function(){var e=I.getActiveTab();this._isSearchExtractionsKeywordsEnabled()&&this.setState({_searchTabsExtractionStatus:l.reject(this.state._searchTabsExtractionStatus,{tabId:e.tabId})}),e&&e.widget&&"search"===e.widget.type&&e.set("close",1)},_reloadActiveSearchTab:function(){var e=I.getActiveTab();e&&e.widget&&"search"===e.widget.type&&this.props.context.executeAction(b.searchTabReload,{searchId:e.tabId})},_showRightRail:function(e,t){var a=this._showRightRailInTravel(e,t);return"people"===t||a},_showRightRailInTravel:function(e,t){var a=this._showPartnerSearch(e.query,t),r=this._showBingAdModule(e.query,t);return a||r},_showPartnerSearch:function(e,t){var a,r=N.enabled("partnersearch");if(e)return a=l.map(e.smartviews,"name")[0],"keyword"===t&&"is:travel"===a&&r},_renderPartnerSearch:function(){n.then(function(){var t,a,r,s=e("PartnerSearch"),n=I.getActiveTab();n&&n.widget&&"search"!==n.widget.type||(t=n.elContent.getDOMNode(),(a=t.getElementsByClassName("hipmunk-right-rail"))&&(r=a[0],n.on("closeChange",function(){d.unmountComponentAtNode(r),a=null,r=null}.bind(this)),d.render(d.createElement(s,{context:this.props.context,defaultTravelFilter:void 0}),r)))}.bind(this))},tabChange:function(e){var t;switch(e.type){case"notepadtab":t=f.NOTEPAD_APP;break;case"contactstab":t=f.CONTACTS_APP;break;case"calendartab":t=f.CALENDAR_APP;break;default:t=f.MAIL_APP}l.defer(function(){this.props.context.executeAction(b.appChange,{appType:t})}.bind(this))},showGDocsCallout:function(){var e=this;yui.use("mail-ui-onboarding",function(t){t.mail.ui.Onboarding.registerDefaultOnboarding({name:"showGDocsCallout",node:'.tab-content:not(.offscreen) .srp-filters-type [data-action="documents"]',pointer:"top",hdText:M.str_cloud_storage_providers_header,bdText:M.str_cloud_storage_providers_body,btnPrimaryText:M.str_connect,btnCancelText:M.str_later,offset:[-125,35],onSuccess:function(){e.openCloudStorageSetting(),e.hideGDocsCallout()},onCancel:function(){e.hideGDocsCallout()},onShow:function(){W=!0},onUnmount:function(){W=!1},classNames:["gdocs-custom-callout"]},!0)})},hideGDocsCallout:function(){N.enabled("searchCloudGoogle")&&W&&yui.mail.ui.Onboarding.closeDefaultOnboarding("showGDocsCallout")},_shouldHideAdForUnknownEntity:function(e){var t,a=!1,r=!!N.enabled("hideAdsUnknownEntities");if(e)for(t in e)"PERSON"===e[t].type&&(a=a||!e[t].knownEntity);return r&&a},_rotateDisplayAd:function(e,t){var a=I.getActiveTab();a&&a.widget&&"search"!==a.widget.type||(this._toggleRightRail(e,t),A.requestAnimationFrame(function(){yui.fire("darlaEvent",{action:"people"===e?"search_people":"search_results"})}))},_toggleRightRail:function(e,t){var a=this._showPartnerSearch(t,e),r=this._showBingAdModule(t,e);yui.fire("darlaEvent",{action:"people"===e||r||a||this._shouldDisableRightRailAd()?"disableRightRailAdForActiveTab":"enableRightRailAdForActiveTab"})},_shouldDisableRightRailAd:function(){var e=I.getActiveTab(),t=null,a=!1;return this._isSearchExtractionsKeywordsEnabled()&&(t=l.find(this.state._searchTabsExtractionStatus,{tabId:e.tabId}),a=E.getValue(t,["extraction"],!1)),a},_getAdKeyword:function(e){var t={"is:unread":"read","is:starred":"star","is:Important":"address","is:personal":"people","is:social":"social","is:travel":"travel","is:shopping":"shopping","is:financial":"finance"},a=l.pluck(e.smartviews,"name")[0],r=e.keyword&&e.keyword.trim(),s=e.suggestion;if(NeoConfig.dmEnabled||NeoConfig.ssOpt){if(s)return s.displayStr;if(r)return r;if(t[a])return t[a]}return""},_showBingAdModule:function(e,t){var a,r=N.enabled("bingads");if(e)return a=l.map(e.smartviews,"name")[0],"keyword"===t&&"is:travel"===a&&r},_attachAds:function(t){o.then(function(){var a,r,s,n=e("BingAdsRightRail"),o=I.getActiveTab();o&&o.widget&&"search"!==o.widget.type||(o.on("closeChange",function(){d.unmountComponentAtNode(a),s=null,a=null}.bind(this)),r=o.elContent.getDOMNode(),(s=r.getElementsByClassName("searchds-right-rail"))&&(a=s[0],d.render(d.createElement(n,{context:this.props.context,searchId:t.searchId,data:this.adCache[t.searchId],startIndex:N.enabled("bingads2to6")?1:0,endIndex:k.value("dm_max_listings")}),a)))}.bind(this))},renderSearchAds:function(e){l.defer(function(){this.props.context.executeAction(_.searchAdsSuccess,{searchId:e.searchId,data:this.adCache[e.searchId]})}.bind(this))},_collectSearchAdStats:function(e){v.stat({name:"srp_search_ad",unit:"ms",type:"duration",dataum:v.timerComplete("srp_search_ad"),tags:{status:e}})},_fetchSearchAds:function(e){var t=this,a=e.query,r=a.suggestion,s=r&&r._rawObj&&r._rawObj.entities;v.timerStart("srp_search_ad"),s&&t._shouldHideAdForUnknownEntity(s)||this.adCache[e.searchId]?this.adCache[e.searchId]&&this.state.cache&&this.state.cache[e.searchId]&&(t._collectSearchAdStats(!0),t.renderSearchAds(e)):yui.use("mail-ui-dmsearch-controller").then(function(r){var s=new r.mail.ui.dmsearchController({seedTerm:t._getAdKeyword(a||{}),partner:a.partner||NeoConfig.dmSrcTag,typeTag:a.typeTag||""});s.once("responseChange",function(a){a.newVal&&a.newVal.length&&(t.adCache[e.searchId]=a.newVal,t.renderSearchAds(e))}),s.process(function(e){t._collectSearchAdStats(!(!e||!e.length))})})},_loadPartnerSearch:function(){if(!n)return n=A.loadTictac("tictac-partnersearch")},_loadBingAds:function(){if(!o)return o=A.loadTictac("tictac-bingads")},_fireRapidSearchStart:function(e){e.typeTag&&v.logRapid("mt:click",{action:e.typeTag,append:{mSrchId:e.searchId,mSrchQry:e.query.toString()}})},_fireYamasSearchStart:function(e){e.typeTag&&v.stat({name:e.typeTag})},_fireSplunkStats:function(e){var t="keyword"===e.searchType?E.getValue(e,["data","documents","keyword","items"],""):E.getValue(e,["data","documents","all","items"],"");l.find(t,function(e){if(e.online)return e.online})&&N.enabled("searchCloudGoogleLinks")&&v.mailLog({m:"srp_gdocs_rendered",searchType:e.searchType},!1,"srp_gdocs_rendered")},onMessageChange:function(){this.props.context.executeAction(b.setTabDirty,{})},_initSettings:function(){yui.use("mail-persist-meta-data",function(){var e=yui.mail.persist.MetaData;this.props.context.executeAction(b.changeSettings,{messageDensity:NeoConfig.msgListDensity,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown(),snippetsEnabled:-1!==parseInt(e.get("neo.pref.general.snippets"),10),showEmailHistory:"false"!==e.get("showEmailHistory")})}.bind(this)),yui.on("messageDensityChange",function(e){this.props.context.executeAction(b.changeSettings,{messageDensity:e.density})}.bind(this)),yui.on("simple:rendered",function(){r().then(function(e){this.props.context.executeAction(b.smartviewsLoaded,{smartViews:e})}.bind(this))}.bind(this)),yui.on("simple:customViewsChanged",function(){r().then(function(e){this.props.context.executeAction(b.changeSettings,{smartViews:e})}.bind(this))}.bind(this)),yui.on("imapin:currentAccountSet",this.setQueryAccountScope),N.enabled("searchMsgStatusSync")&&(yui.on("ds:conv:change",this.onMessageChange),yui.on("ds:msg:change",this.onMessageChange)),yui.on("ui:currentFolder",this.setQueryFolderScope),yui.on("tabChange",this.tabChange),yui.on("initCallout:folderSearchOnboarding",function(){this.props.context.executeAction(b.showOnboarding,{hasShownFolderSearchOnboarding:0}),yui.fire("callout:action",{name:"folderSearchOnboarding",action:"shown",keyValue:"1"})}.bind(this)),yui.on("closeCallout:folderSearchOnboarding",function(){this.props.context.executeAction(b.dismissOnboarding,{hasShownFolderSearchOnboarding:1})}.bind(this)),yui.on("xobni:contactChanged",function(){this._reloadActiveSearchTab()}.bind(this)),this.props.context.executeAction(_.loadRecentSearches,{}),window.addEventListener("resize",function(){l.defer(function(){this.props.context.executeAction(b.searchWindowResize,this._getSearchTabDimension)}.bind(this))}.bind(this),!0)},getSearchId:function(){return this.state.activeSearchId},setQuery:function(e){l.defer(function(){this.props.context.executeAction(_.setQuery,{searchId:this.getSearchId(),query:e})}.bind(this))},shouldShowFolderToken:function(e){var t=this.props.context.getStore(m).findByFID(e),a=L?E.getValue(t,"types.0",e):e;return!a||-1===S.SYSTEM_FOLDERS_NO_FILTER.indexOf(a.toUpperCase())},setQueryAccountScope:function(){var e,t,a=this;L?(t=[],e=this._getCurrentAccount(),t.push({displayName:e.description,acctIds:[e.id]})):t=null,a.setQuery(new g({folders:t}))},setQueryFolderScope:function(e){var t,a,r,s,n,o=this,i=o.props.context.getStore(m),c=this._getAccounts();e&&e.fid&&o.shouldShowFolderToken(e.fid)?O?o.setQueryAccountScope():(s=i.findByFID(e.fid))&&(a=s.id||s.folderInfo.index.toString(),n=i.getLocalizedFolderNameById(a),t=c[s.acctId],L&&t&&(n=l.template(M.str_account_folder,null)({account:t.description,folder:n})),r=[{displayName:n,acctIds:L?[s.acctId]:null,folderIds:[a]}],o.setQuery(new g({folders:r}))):o.setQueryAccountScope()},_folderSearchOnboardingShown:function(){var e=E.getValue(yui.mail,["persist","MetaData"],{get:function(){}});return this.props.folderSearchTutorial?0:N.enabled("folderSearchOnboarding")?N.enabled("scout")||e.get("hasShownFolderSearchOnboarding"):1},_showNotfication:function(e){yui.use("common-ui-notification-v2",function(t){t.common.ui.NotificationV2.notify(d.renderToString(e.component),{type:e.failure?"error":"info",duration:e.duration||4e3,speed:"show-fast",close:e.close,cbkOnDestroy:!0,cbk:function(t,a){"undo"===a&&e.undoHandler&&e.undoHandler()}})})},_collectResourceTimingStats:function(e,t){var a,r,s,n="";E.getValue(e,"apiJSDuration",!1)&&v.featureLatency("bootcamp_api_js_"+t,e.apiJSDuration),E.getValue(e,"url")&&q&&q.getEntriesByName&&(a=q.getEntriesByName(e.url,"resource"),(s=E.getValue(a,[0],!1))&&s.duration&&(r=Math.round(s.duration),v.featureLatency("bootcamp_api_perf_"+t,r),j.forEach(function(e){n+=e+"="+s[e]+" ; "}),e.xTiming&&(n+=e.xTiming),v.apiLatency("bootcamp_metrics_"+t+" "+n,r,{api:"bootcamp"}))),e.error?v.stat({name:"search",tags:{result:"failure"}}):v.stat({name:"search",tags:{result:"success"}})},_statMainDuration:function(e,t){var a,r;e.isMain&&(a=v.getTimerStart("doSearch"),r=e.duration-a,v.featureLatency("srp_bootcamp_api_list_"+t,r))},_statFailure:function(e,t){var a="failure";e&&800===e.status&&(a="abort"),v.featureInvoke("srp_search_"+a+"_"+t),v.stat({name:"search",tags:{result:a}})},_collectStats:function(e){var t,a=E.getValue(e,["searchId"]),r=E.getValue(e,["searchType"]),s=E.getValue(e,["metaData","ymreqid"]),n=E.getValue(e,["metaData","duration"]),o=E.getValue(e,["metaData","main","contentType"],"messages"),i=E.getValue(e,["metaData","main","filter"]),c=E.getValue(e,["metaData","status"]),d=E.getValue(e,["data",o,i],[]),u=E.getValue(e,["data","contacts","keyword","items"]),h=E.getValue(e,"error"),p=x.CONTENT_TYPES,g=E.getValue(e,["error",o,i]),m=E.getValue(e,["error",o,i,"status"]),f=m&&200!==m;c&&200!==c||!0!==E.getValue(e,["metaData","hasMain"])||f?800===c?v.featureInvoke("srp_search_abort_"+r):(v.featureInvoke("srp_search_failure_"+r),v.statTAE({message:"search_failed_tae20_"+r,method:f?"bootcamp_srp_chunk":"bootcamp_srp",ymreqid:s},{status:f?m||"":c,error:{code:"SearchProgramFailed"}}),E.getValue(e,["metaData","hasMain"],!1)&&!f||(v.featureInvoke("srp_search_failure_"+r+"_nomain"),v.mailLog({m:"srp_search_main_chunk_error",status:m||"",body:g&&g.message||"",searchType:r,contentType:o,filter:i,ymreqid:s,apiLatency:n},!1,"srp_search_mailog")),c&&v.featureInvoke("srp_search_failure_"+r+"_"+c),i&&v.featureInvoke("srp_search_errorfilter_"+i+"_"+r),h&&h.status&&v.mailLog({m:"srp_search_failed",status:h.status,body:h.text,searchType:r,contentType:o,searchFilter:i,ymreqid:s,apiLatency:n},!1,"srp_search_mailog")):(E.getValue(e,["metaData","main","isEmpty"])&&(v.featureInvoke("srp_search_empty_"+r),i&&v.featureInvoke("srp_search_emptyfilter_"+i+"_"+r)),v.featureInvoke("srp_search_success_"+r)),c&&200===c&&(h&&l.size(h)>0&&l.each(p,function(e){h[e]&&l.each(h[e],function(t,a){t&&(v.mailLog({m:"srp_search_chunk_failed",status:t.status,body:t.message,searchType:r,contentType:e,filter:a,ymreqid:s},!1,"srp_search_mailog"),v.featureInvoke("srp_search_chunk_failed_"+r),v.featureInvoke("srp_search_chunk_failmeta_"+t.status+"_"+e+"_"+a))})}),v.logRapid("mt:view",{action:"srp_msg_list_display",append:{mSrchId:a,mSrchQry:e.query,mSrtTyp:E.getValue(e,["sortInfo","sortType"]),mSrtOrd:E.getValue(e,["sortInfo","sortType"]),mSrchSpl:E.getValue(d,"spellCorrection")?1:0,mSrchTtl:d.totalHits||0,mSrchRes:o,mSrchMid:d.items&&d.items.slice(0,50).map(function(e){return e.mid})}}),N.enabled("searchExtractions")&&this._collectExtractionsStats(e),N.enabled("emailHistory")&&u&&E.getValue(u,"0.relationshipHistory")&&v.logRapid("mt:view",{action:"srp_emailhistory"}),"people"===r&&(t=(N.enabled("searchBootcampV3")?E.getValue(e,"data.people.keyword.items.0.payload.is_known_entity"):E.getValue(e,"data.contacts.keyword.items.0.payload.is_known_entity"))?"entity":"human",v.featureInvoke("srp_search_entity_"+t),v.stat({name:"srp_search_entity",tags:{type:t}})))},_collectExtractionsStats:function(e){var t,a=E.getValue(e,["searchType"]),r=E.getValue(e,"data.people.keyword.items.0.payload.name.source");r&&((t=(w.getValidExtractions(e,a)||[]).length)>0?v.stat({name:"srp_extractions_success",tags:{count:t,provider:r,type:a}}):v.stat({name:"srp_extractions_failure",tags:{provider:r,type:a}}))},_collectSuggestionStats:function(e){e.fromCache?v.featureComplete("search_sugg_fetch_bootcamp_cache"):(v.featureInvoke("search_sugg_fetch_bootcamp"),200===e.status?(v.featureLatency("bootcamp_fetch",e.duration),v.featureComplete("search_sugg_fetch_bootcamp")):(800===e.status?v.featureInvoke("bootcamp_fetch_err_abort"):v.featureLatency("bootcamp_fetch_err",e.duration),v.featureFail("search_sugg_fetch_bootcamp")))},_reAuthenticate:function(e){yui.once("net:reloginSuccessful",function(){this.props.context.executeAction(_.executeSearch,{query:e.query})}.bind(this)),yui.common.net.Error.simpleRelogin()},_getPhoto:function(e){var t=this,a=e&&e.data,r=a&&a.contacts,s=r&&r[0],n=function(e){!1!==e&&["facebook","twitter","linkedin","flickr","corpdir"].indexOf(e)>-1&&t.props.context.executeAction(_.photoSource,{contact:s,phtotoSource:e})};yui.use("xobni-contacts-search-api",function(e){e.xobniContacts&&s&&e.xobniContacts.searchAPI.photo({id:s.id.slice(2),updated:s.payload.updated},n)})},_setUserData:function(e){yui.use("mail-persist-meta-data",function(){var t=yui.mail.persist.MetaData;Object.keys(e).forEach(function(a){t.set(a,e[a])})})},componentDidMount:function(){var e=document.getElementById("yucs-search"),t=document.createElement("div"),a="StencilRoot search-container Mt-10 Mx-0 W-45 Whs-nw mwpx-860";N.enabled("searchresults")&&this.props.context.getStore(p).on("changed",this.handleAction),e||(e=document.getElementById("UHSearch"),a="StencilRoot search-container M-0 Whs-nw mwpx-860"),e&&(t.className=a,e.parentNode.insertBefore(t,e),d.render(d.createElement(h,{context:this.props.context,accounts:this._getAccounts(),currentAccount:this._getCurrentAccount(),isImapinEnabled:L,xobniContactsStore:this.props.xobniContactsStore,searchKeywordPlaceholderEnabled:N.enabled("searchKeywordPlaceholder"),searchCacheContacts:N.enabled("searchCacheContacts"),scrollToSearchV2Enabled:N.enabled("scrollToSearchV2"),isRTL:H,hasShownFolderSearchOnboarding:this._folderSearchOnboardingShown()}),t)),this._initSettings()},saveCustomView:function(e){e.autoSaved?l.defer(function(){this.props.context.executeAction(b.saveSmartView,e)}.bind(this)):this.props.context.executeAction(b.saveSmartView,e)},showAskToSaveCallout:function(e,t,a){var r=this;yui.use("mail-ui-onboarding","common-utils",function(s){var n,o=s.mail.ui.Onboarding;o.showDefaultOnboarding({name:"showCustomViewsCallout",node:".srp-save-smartview",pointer:"top",bdText:s.common.Utils.ezSub(M.str_custom_view_callout_text,{query:s.Escape.html(t),count:s.Escape.html(a)}),btnPrimaryText:M.str_save,btnCancelText:M.str_not_now,offset:[-155,30],onSuccess:r.saveCustomView.bind(null,e),onShow:function(){n=s.one(document).on("click",function(e){!e.target||e.target.hasClass("callout-default")||e.target.ancestor("callout-default")||(n.detach(),o.closeDefaultOnboarding("showCustomViewsCallout"))})},onClose:function(){n&&n.detach()},onUnmount:function(){n&&n.detach()},classNames:["customview-callout"]},!0)})},showCustomViewsCallout:function(e){var t,a,r,s=e.query,n=E.getValue(s,["keyword"],""),o=E.getValue(s,["folders",0,"displayName"],""),i=this._getCurrentAccount(),c=yui.mail.persist.MetaData.get("neo.pref.savedSearch"),d=yui.mail.persist.MetaData.get("simpleCustomViews"),u=N.enabled("customViewsAutoSave"),h=k.value("customViewsAutoSaveCount",10),p=this;try{t=l.find(JSON.parse(c)||[],function(e){var t=e.count&&parseInt(e.count,10);return e.query&&e.query===n&&(u&&t===h||3===t||10===t)})}catch(e){}if(t){if(d)try{a=l.find(JSON.parse(d.json)||[],function(t){return t.account&&t.account===i.id&&t.searchId&&l.isEqual(t.searchId,e.searchId)})}catch(e){}a||document.getElementsByClassName("onboardtip").length||(r={name:((o||"")+" "+n).trim()||M.str_saved_search,query:{keyword:n||"",folders:s.folders||[],smartviews:s.smartviews||[]},account:i.id,searchId:e.searchId},u&&t.count===h?(r.autoSaved=!0,p.saveCustomView(r)):p.showAskToSaveCallout(r,n,t.count))}},componentWillUnmount:function(){N.enabled("searchresults")&&this.props.context.getStore(p).removeListener("changed",this.handleAction)},shouldComponentUpdate:function(){return!1},openCloudStorageSetting:function(){yui.fire("openOptions",{view:"accounts"})},_updateSearchTabsExtractionStatus:function(e){var t,a=I.getActiveTab(),r=null,s=E.getValue(e,["searchType"]);w.hasValidExtractions(e,s)&&(t=l.clone(this.state._searchTabsExtractionStatus),null!=(r=l.find(t,{tabId:a.tabId}))&&E.setValue(r,["extraction"],!0),this.setState({_searchTabsExtractionStatus:t}))},handleAction:function(){var e=this.props.context.getStore(p).getActionInfo(),t=E.getValue(e,["data"],{}),a=E.getValue(t,["metaData"],{}),r=yui.mail.persist.MetaData.get("typeTag");switch(e.action){case f.NOTIFICATION_SHOW:this._showNotfication(e.data);break;case f.METADATA_CHANGE:this._setUserData(t),r&&v.logRapid("mt:click",{action:r});break;case f.SAVE_SEARCH:yui.use("tictac-simple",function(e){e.fire("simple:registerCustomView",t)}.bind(this));break;case y.PROGRESS_SUCCESS:case y.PROGRESS_FAILURE:yui.fire("search:bulk:complete");break;case S.FILL_PERMISSION_WINDOW:this.permissionWindow&&this.permissionWindow.location.replace(t.permissionUrl);break;case S.CLOSE_GDOC_PERMISSION:this.permissionWindow&&this.permissionWindow.close();break;case S.SEARCH_START:v.featureInvoke("srp_search_session_"+t.searchType),this._openSearchTab(t,t.searchType),this._fetchSearchAds(t),this._fireRapidSearchStart(t),this._fireYamasSearchStart(t),this._showPartnerSearch(t.query,t.searchType)&&this._loadPartnerSearch(),this._showBingAdModule(t.query,t.searchType)&&this._loadBingAds();break;case S.SEARCH_UPDATE:this._statMainDuration(a,t.searchType);break;case S.SEARCH_SUCCESS:a.reAuthenticate&&this._reAuthenticate(t),this._showPartnerSearch(t.query,t.searchType)&&this._renderPartnerSearch(),NeoConfig.hasAds&&(!this.adCache[t.searchId]||this.state.cache&&this.state.cache[t.searchId]||this.renderSearchAds(t),this._showBingAdModule(t.query,t.searchType)&&this._attachAds(t)),this._collectStats(t),this._collectResourceTimingStats(a,t.searchType),this._isSearchExtractionsKeywordsEnabled()&&this._updateSearchTabsExtractionStatus(t),D&&!this._shouldDisableRightRailAd()||this._rotateDisplayAd(t.searchType,t.query),this.showGDocsCallout(),R&&t.searchType&&"keyword"===t.searchType&&this.showCustomViewsCallout(t),this._fireSplunkStats(t);break;case S.SEARCH_FAILURE:a&&a.reAuthenticate&&this._reAuthenticate(t),this._statFailure(a,t.searchType),this._rotateDisplayAd(t.searchType,t.query);break;case f.SEARCH_TAB_ACTIVE:case S.FETCH_MORE_SUCCESS:case S.CHANGE_SEARCH_FILTER:this._rotateDisplayAd(t.searchType,t.query);break;case S.CHANGE_SEARCH_VIEW:this._rotateDisplayAd(t.searchType,t.query),this.adCache&&this.adCache[t.searchId]&&this.renderSearchAds(t);break;case S.BOOTCAMP_SUGGESTIONS_RECEIVED:case S.BOOTCAMP_SUGGESTIONS_FAILURE:this._collectSuggestionStats(a);break;case S.CLOSE_CURRENT_TAB:this._closeSearchTab(e.data);break;case S.CONTACT_ADD:yui.fire("addContact",e.data.name,e.data.email);break;case S.GET_CONTACT_PHOTO_SOURCE:this._getPhoto(e.data);break;case y.PRINT:yui.use("mail-ui-print",function(t){var a=e.data;t.mail.ui.print({fid:a.fid,msg:a})});break;case y.UNSUBSCRIBE:yui.use("mail-ui-unsubscribe",function(e){e.mail.ui.Unsubscribe.handle(t)});break;case y.QUICK_FILTER:yui.use("mail-ui-messagesview-quickfilter",function(t){var a=e.data;t.mail.ui.QuickFilter.createDialog({msgHeader:a})});break;case y.SET_ENCODING:yui.use("mail-ui-message-encodings",function(t){var a=e.data;t.mail.ui.MessageEncodings.setMessageEncoding(a.messages,a.messages[0].fid)});break;case y.REDIRECT_MESSAGE:yui.use("mail-ui-messageevents",function(t){t.mail.ui.MessageEvents.redirectMsgFromSearch({fid:e.data.fid,selectedItems:e.data.selectedItems})});break;case f.ONBOARDING_DISMISSED:t.hasShownFolderSearchOnboarding&&yui.fire("callout:action",{name:"folderSearchOnboarding",action:"close"})}},render:function(){return d.createElement("span",{key:"bridgeComponent"})}}),t.exports=i},{"../../../../artifacts/lang":2,"../../utils/AccountUtils":16,"../autocomplete/Container.jsx":6,ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",BingAdsRightRail:"BingAdsRightRail",BootcampAPIUtilsV2:"BootcampAPIUtilsV2",EnhancedPromise:"EnhancedPromise",ExtractionUtils:"ExtractionUtils",FolderStore:"FolderStore",GlobalActions:"GlobalActions",GlobalConstants:"GlobalConstants",MessageConstants:"MessageConstants",ObjectUtils:"ObjectUtils",SearchActions:"SearchActions",SearchConstants:"SearchConstants",SearchQuery:"SearchQuery",StatService:"StatService",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],10:[function(e,t,a){"use strict";var r,s=e("react/addons"),n=e("lodash"),o=e("Context"),i=e("FolderStore"),c=e("SearchQuery"),l=e("MenuItem"),d=e("MenuButton"),u=e("MenuItemGroup"),h=e("Utils"),p=e("StringUtils"),g=e("ObjectUtils"),m=e("../../../../artifacts/lang"),f=e("StatService");r=s.createClass({displayName:"FolderDropdown",statName:"folder_dropdown",mixins:[s.addons.PureRenderMixin,o],propTypes:{query:s.PropTypes.object,onSelect:s.PropTypes.func,executeSearch:s.PropTypes.func,openAdvancedSearch:s.PropTypes.func},getDefaultProps:function(){return{query:{},isImapinEnabled:!1,onSelect:n.noop,executeSearch:n.noop,openAdvancedSearch:n.noop}},render:function(){var e=this.props,t={"right-folder-dd":!0,"search-folder-scope-dd":!0},a={"right-folder-dd":!0,"search-folder-dropdown":!0},r=n.size(e.accounts)>1?m.str_all_accounts:m.str_all_mail,o=this.getSelectionInfo();return t[e.className]=e.className,a[e.className]=e.className,t=s.addons.classSet(t),a=s.addons.classSet(a),s.createElement(d,{ref:"menu",className:t,ddClassName:a,label:this.renderMenuTokenAndChevron(o),name:this.statName,dropdownXOrigin:"left",onOpen:this.handleMenuOpen},s.createElement(u,{title:m.str_search_in,overflow:!0,togglable:!0,className:"search-in-title"},s.createElement(l,{value:"search_in_all_account",title:r,selected:"all"===o.type,className:"all-account-menu-item",onClick:this.handleUserSelection.bind(this,"all",this.props.accounts)},s.createElement("span",null,s.createElement("span",null,r))),this.renderAccounts(o)),s.createElement(u,null,s.createElement(l,{className:"search-folder-scope-adv",title:m.str_advanced_mail_search,onClick:this.handleAdvSearchClick},s.createElement("span",{className:"search-folder-name"},m.str_advanced_search))))},renderMenuTokenAndChevron:function(e){var t=h.detectDirection(e.name||"",this.props.isRTL?"rtl":"ltr"),a=e.name,r=a.substring(a.lastIndexOf("/")+1,a.length);return s.createElement("span",null,s.createElement("span",{className:"icon icon-small-search"}),s.createElement("span",{className:"token-folder-account"},s.createElement("span",{title:a,"data-value":r,dir:t,className:"token-folder-account-text"},r)),s.createElement("span",{className:"icon icon-chevron"}))},renderAccounts:function(e){var t=this.getStore(i),a=n.size(this.props.accounts);return n.map(this.props.accounts,function(r){var o=n.chain(t.getSearchableSystemFoldersByAccount(r.id)).sort(t.sortSystemFolderComparator).value(),i=n.chain(t.getSearchableUserFoldersByAccount(r.id)).sort(t.sortByFolderNameComparator).value(),c=this.props.smartViews,l=[];return a>1&&l.push(this.renderAccountTitle(r,e)),l=n.compact(l.concat([this.renderFolders(r,o,e,a>1?2:1),this.renderSmartViewsGroup(this.renderSmartViews(r,c,e,a>1?3:2)),this.renderUserFoldersGroup(this.renderFolders(r,i,e,a>1?3:2))])),s.createElement(u,null,l)}.bind(this))},renderAccountTitle:function(e,t){return s.createElement(l,{value:e.description,title:e.description,selected:"account"===t.type&&t.id===e.id,className:"account-menu-item",onClick:this.handleUserSelection.bind(this,"account",e)},s.createElement("span",null,e.description))},renderUserFoldersGroup:function(e){return n.size(e)<=0?null:s.createElement(u,{value:m.str_folders,title:m.str_folders,className:"dropdown-menu-title"},e)},renderFolders:function(e,t,a,r){var o=this.getStore(i),c=this.props.isRTL?"padding-right":"padding-left";return n.map(t,function(e){var t=o.getLocalizedFolderNameById(e.id||e.folderInfo.index.toString()),n=t,i=t.substring(t.lastIndexOf("/")+1,t.length),d=(t.match(/\//g)||[]).length+r,u=d?12*d+"px":"",h={};return h[c]=u,s.createElement(l,{value:i,title:n,selected:"folder"===a.type&&a.id===e.id,highlighted:this.shouldHighlightFolder(e,a),onClick:this.handleUserSelection.bind(this,"folder",e)},s.createElement("span",{className:"search-folder-name",style:h,dir:p.getTextDirection(i)},i))}.bind(this))},shouldHighlightFolder:function(e,t){return this.props.currentFolder===e.id&&(!t.type||"account"===t.type||"all"===t.type)},renderSmartViewsGroup:function(e){if(e&&e.length)return s.createElement(u,{value:m.str_folders,title:m.str_smartviews,className:"dropdown-menu-title"},e)},renderSmartViews:function(e,t,a,r){var o={},i=this.props.isRTL?"padding-right":"padding-left",c=t,d=e.id;return o[i]=12*r+"px",n.size(this.props.accounts)>1&&(c=n.filter(c,function(e){return void 0===e.account||e.account===d})),n.map(c,function(e){var t=m["str_"+e.displayName]||e.displayName,r=void 0===e.account?n.merge({},{acctId:d},e):e;return s.createElement(l,{value:t,title:t,selected:a.id===e.displayName&&(!a.acctId||a.acctId===d),onClick:this.handleUserSelection.bind(this,"smartview",r)},s.createElement("span",{className:"search-folder-name",style:o},t))}.bind(this))},getSmartView:function(){var e=g.getValue(this.props.query,["smartviews"],[]),t=this.props.smartViews||[];return n.filter(t,function(t){return JSON.stringify(t.query.smartviews)===JSON.stringify(e)})},getSelectionInfo:function(){var e,t,a=this.getSmartView(),r=this.getStore(i),s=g.getValue(this.props.query,["folders"],[]).filter(function(e){return e.folderIds&&e.folderIds.length}),o=g.getValue(this.props.query,["folders"],[]).filter(function(e){return e.acctIds&&e.acctIds.length}),c={type:"all",id:m.str_all,name:m.str_all};return a.length>0?(e=m["str_"+a[0].displayName]||a[0].displayName,c={type:"smartview",id:a[0].displayName,name:e,acctId:g.getValue(o,"0.acctIds.0")}):s.length>0?(e=r.getLocalizedFolderNameById(s[0].folderIds),t=n.find(this.props.accounts,function(e){return e.id===g.getValue(s,"0.acctIds.0")}),n.size(this.props.accounts)>1&&(e=t.description+"/"+e),c={type:"folder",id:g.getValue(s,"0.folderIds.0",""),name:e}):o.length>0&&n.size(this.props.accounts)>1&&(c={type:"account",id:g.getValue(o,"0.acctIds.0",null),name:o[0].displayName}),c},handleUserSelection:function(e,t){var a,r,s,o=this.props.query,l=this.getStore(i),d=!(!(o.keyword||"").trim()&&!o.suggestion);switch(e){case"all":a=new c({keyword:o.keyword,refinements:o.refinements,suggestion:o.suggestion}),f.mailLog({m:"search_"+this.statName+"_allMail_click",yid:NeoConfig.loginId});break;case"account":a=new c({keyword:o.keyword,refinements:o.refinements,suggestion:o.suggestion,folders:[{displayName:t.description,acctIds:[t.id],folderIds:null}]});break;case"folder":r=l.getLocalizedFolderNameById(t.id),s=this.props.accounts&&this.props.accounts[t.acctId],this.props.isImapinEnabled&&s&&(r=n.template(m.str_account_folder,null)({account:s.description,folder:r})),a=new c({keyword:o.keyword,refinements:o.refinements,suggestion:o.suggestion,folders:[{displayName:r,acctIds:[t.acctId],folderIds:t.id}]}),t.isSystem&&f.mailLog({m:"search_"+this.statName+"_folder_click",folder:t.folderInfo.name,yid:NeoConfig.loginId});break;case"smartview":a=new c({keyword:o.keyword,refinements:o.refinements||t.refinements,suggestion:o.suggestion||t.suggestion,smartviews:t.query.smartviews,folders:t.acctId?[{acctIds:[t.acctId],folderIds:null}]:[]})}this.props.onSelect(a),d&&this.props.executeSearch(a),this.refs.menu.closeMenu(),f.mailLog({action:"search_box_filter_select",append:{mSrchQry:o.toString()}})},handleAdvSearchClick:function(){var e=this;e.props.openAdvancedSearch(),f.logRapid("mt:click",{action:"search_box_adv_search_fld_dd"}),f.mailLog({m:"react_search_"+e.statName+"_advSearch_click",yid:NeoConfig.loginId})},handleMenuOpen:function(){f.mailLog({m:"react_search_menu_"+this.statName+"_open",yid:NeoConfig.loginId}),f.stat("search_box_folder_dd_open"),f.logRapid("mt:click",{action:"search_box_filter_dd"})}}),t.exports=r},{"../../../../artifacts/lang":2,Context:"Context",FolderStore:"FolderStore",MenuButton:"MenuButton",MenuItem:"MenuItem",MenuItemGroup:"MenuItemGroup",ObjectUtils:"ObjectUtils",SearchQuery:"SearchQuery",StatService:"StatService",StringUtils:"StringUtils",Utils:"Utils",lodash:"lodash","react/addons":"react/addons"}],11:[function(e,t,a){"use strict";var r={componentDidMount:function(){window.addEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},componentWillUnmount:function(){window.removeEventListener("mousedown",this.DropdownMixin_handleWindowClick,!0)},DropdownMixin_handleWindowClick:function(e){var t,a=this.props.parentNode||this.getDOMNode();for(t=e.target;t;t=t.parentNode){if(t&&(t.hasAttribute&&t.hasAttribute("data-preventclose")||t.className&&-1!==t.className.split(" ").indexOf("advanced-search-folder-menu")))return;if(t===a)break}t||this.props.setClosed()}};t.exports=r},{}],12:[function(e,t,a){"use strict";YUI.add("tictac-search",function(t){function a(){window.React=window.React||e("react/addons");var a=e("AppDispatcher"),r=e("ActionStore"),s=e("./components/bridge/StormBridge.jsx"),n=e("./stores/ProgressStore"),o=document.createElement("div"),i=yui.common.Utils,c=i.settings,l=i.features,d={};[r,n].forEach(a.registerStore),o.id="storm-bridge",document.body.appendChild(o),window.React.render(window.React.createElement(s,{context:a.context,xobniContactsStore:d,folderSearchTutorial:-1!==window.location.search.indexOf("folderSearchTutorial")&&NeoConfig.isInternal}),o),l.enabled("searchCacheContacts")&&t.use("tictac-base-prefetch-store",function(e){d.cache=e.Tictac.base.PrefetchStoreManager.getStore({endPoint:yui.xobniContacts.Utils.getXobniBaseURL().url+"/v4/endpoints/important",count:c.value("autosuggestPrefetchSize")||150})}),yui.fire("search:loaded")}t.namespace("Tictac").search={loader:function(){var t=e("lodash");e("../../artifacts/css/main.css"),t.defer(a,5),yui.detach("search:input")},isSearchResultsReallyEnabled:function(e){e(!0)}}},"1.0.0",{requires:["common-utils","mail-persist-meta-data","tictac-base","tictac-lib","xobni-utilities"]})},{"../../artifacts/css/main.css":1,"./components/bridge/StormBridge.jsx":9,"./stores/ProgressStore":"ProgressStore",ActionStore:"ActionStore",AppDispatcher:"AppDispatcher",lodash:"lodash","react/addons":"react/addons"}],13:[function(e,t,a){"use strict";function r(e,t){return n.findIndex(e||[],function(e){return"string"==typeof e&&e===t||e.query&&e.query===t})}var s,n=e("lodash"),o=e("StatService");s={get:function(){return yui.use("mail-persist-meta-data").then(function(e){var t=e.mail.persist.MetaData.get("neo.pref.savedSearch"),a=[];o.stat({name:"search_sugg_fetch_recent"});try{a=JSON.parse(t)}catch(e){}return a})},add:function(e){return!yui.common.Utils.features.enabled("searchresults")||"string"==typeof e&&!e.trim()?this.get():yui.use("mail-persist-meta-data").then(function(t){var a,s=t.mail.persist.MetaData.get("neo.pref.savedSearch"),i=s?JSON.parse(s):[],c=r(i,e);return c>-1?((a=n.pullAt(i,c)[0]).count?a.count=parseInt(a.count,10)+1:a=yui.common.Utils.features.enabled("customViewsCallout")?{query:e,count:2}:e,i.unshift(a)):i.unshift(e),i=n.uniq(i).slice(0,NeoConfig.maxSearchHistory),e&&(t.mail.persist.MetaData.set("neo.pref.savedSearch",JSON.stringify(i)),o.stat({name:"search_sugg_add_recent"})),i})},remove:function(e){return yui.use("mail-persist-meta-data").then(function(t){var a=n.uniq(JSON.parse(t.mail.persist.MetaData.get("neo.pref.savedSearch"))).slice(0,NeoConfig.maxSearchHistory),s=r(a,e);return s>-1&&(a.splice(s,1),t.mail.persist.MetaData.set("neo.pref.savedSearch",JSON.stringify(a))),o.stat({name:"search_sugg_remove_recent"}),a})}},t.exports=s},{StatService:"StatService",lodash:"lodash"}],14:[function(e,t,a){"use strict";function r(e){n.call(this,e)}var s=e("lodash"),n=e("./SearchSuggestion");r.prototype=s.extend(Object.create(n.prototype),{constructor:r,getMatchAndRemainder:function(e){var t=[this.displayStr].concat(this.emailAddresses),a=s.find(t,function(t){return this.getRemainingPart(t,e)},this);return this.getRemainingPart(a||"",e)},getInitials:function(){var e=this.displayStr.split(" ");return[].concat(e.shift()||[]).concat(e.pop()||[]).map(function(e){return(e.charAt(0)||"").toUpperCase()}).join("")},getAdvancedSearchQuery:function(){return this.displayStr.indexOf(" ")>-1?'from:"'+this.displayStr+'" ':"from:"+this.displayStr+" "}}),t.exports=r},{"./SearchSuggestion":15,lodash:"lodash"}],15:[function(e,t,a){"use strict";function r(e){s.merge(this,e)}var s=e("lodash"),n=e("StringUtils");r.prototype={getOverrideText:function(){return"SEARCH_WEB"===this.intent?"":this.overrrideWithEmail?this.emailAddresses[0]:this.displayStr},getRemainingPart:function(e,t){var a,r,s;return a=n.escapeRegExp(t),r=new RegExp("(^|\\s)"+a+"(.*)","i"),s=r.exec(e),s?t+s[2]:""},getMatchAndRemainder:function(){return""}},t.exports=r},{StringUtils:"StringUtils",lodash:"lodash"}],16:[function(e,t,a){"use strict";var r=e("lodash"),s={};s.findAccountsInSyncing=function(e,t){var a=this,s=[];return r.each(e,function(e){a.isAccountSyncing(e,t)&&s.push(e)}),s},s.isAccountSyncing=function(e,t){return!!(e&&"ENABLED"===e.status&&"IMAPIN"===e.type&&e.createTime&&(r.now()/1e3-e.createTime)/60<=t)},t.exports=s},{lodash:"lodash"}],17:[function(e,t,a){function r(e,t,a){var r=e.getElementById(t);if(r)a(r);else{var s=e.getElementsByTagName("head")[0];(r=e.createElement("style")).id=t,a(r),s.appendChild(r)}return r}t.exports=function(e,t,a){var s=t||document;if(s.createStyleSheet){var n=s.createStyleSheet();return n.cssText=e,n.ownerNode}return r(s,a,function(t){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e})},t.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],a=document.createElement("link");return a.rel="stylesheet",a.href=e,t.appendChild(a),a}},{}],ActionStore:[function(e,t,a){"use strict";function r(e){this.dispatcher=e,this.payload={},this.setMaxListeners(256)}var s=e("lodash"),n=e("events").EventEmitter,o=e("GlobalConstants"),i={};r.prototype=s.merge({constructor:r,getActionInfo:function(){return this.payload},_onAction:function(e,t){this.payload={action:t,data:e},this.emit("changed")}},n.prototype),i[o.DEFAULT]="_onAction",r.storeName="ActionStore",r.handlers=i,t.exports=r},{GlobalConstants:"GlobalConstants",events:"events",lodash:"lodash"}],ProgressStore:[function(e,t,a){"use strict";function r(e){this.dispatcher=e,this._clearBulkProgress(),this.setMaxListeners(4)}var s=e("lodash"),n=e("events").EventEmitter,o=e("MessageConstants"),i={},c={from:0,size:0,total:0,title:"",progressing:!1,success:!1,errorMsgsInfo:"",promise:null};r.prototype=s.merge({constructor:r,getData:function(){return this.data},_clearBulkProgress:function(){this.data=s.clone(c)},_processUpdate:function(e){this.data=s.assign({},this.data,e)},_progressStart:function(e){this._clearBulkProgress(),this._processUpdate({progressing:!0,success:!1,promise:e.promise,title:e.title}),this.emit("changed")},_progressSuccess:function(e){this._processUpdate({progressing:!1,success:!0,total:e.total}),this.emit("changed")},_progressFailure:function(e){this._processUpdate({progressing:!1,success:!1,total:e.total,errorMsgsInfo:e.errorMsgsInfo}),this.emit("changed")},_progressUpdate:function(e){this._processUpdate({progressing:!0,success:!1,from:e.from,size:e.size,total:e.total,progress:e.progress,promise:e.promise||this.data.promise}),this.emit("changed")}},n.prototype),i[o.PROGRESS_START]="_progressStart",i[o.PROGRESS_SUCCESS]="_progressSuccess",i[o.PROGRESS_FAILURE]="_progressFailure",i[o.PROGRESS_UPDATE]="_progressUpdate",r.storeName="ProgressStore",r.handlers=i,t.exports=r},{MessageConstants:"MessageConstants",events:"events",lodash:"lodash"}],SearchActions:[function(e,t,a){"use strict";function r(){return new y({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:A,searchGDocsEnabled:yui.common.Utils.features.enabled("searchCloudGoogleLinks"),searchInTrashEnabled:yui.common.Utils.features.enabled("searchInTrash"),searchResultsLinksEnabled:yui.common.Utils.features.enabled("searchResultsLinks"),searchExtractionsEnabled:yui.common.Utils.features.enabled("searchExtractions"),lmv3Enabled:yui.common.Utils.features.enabled("LMV3"),bcHost:T})}function s(){return l=l||new _({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,imapInEnabled:NeoConfig.imapIn,hasMultipleAccounts:A,bcHost:T,searchInTrashEnabled:yui.common.Utils.features.enabled("searchInTrash")})}function n(e,t){var a,r=e.split("&"),s={};return u.size(t)>0&&(u.each(r,function(e,n){(a=e.split("="))[0]&&!u.isUndefined(t[a[0]])&&(r[n]=a[0]+"="+t[a[0]],s[a[0]]=!0)}),u.each(t,function(e,t){s[t]||r.push(t+"="+e)})),r.join("&")}function o(e,t,a){(x?s():r()).searchItems({url:a.url}).then(function(r){e.dispatch(t.SUCCESS,{data:r.data,metaData:r.metaData,error:r.error,searchId:a.searchId,filter:a.filter||a.currentFilter,type:a.type||a.currentView,contentType:a.contentType,searchType:a.searchType}),a.callback&&a.callback(r.data)},function(r){800!==r.metaData.status&&e.dispatch(t.FAILURE,{data:r.data,metaData:r.metaData,error:r.error,searchId:a.searchId,filter:a.currentFilter,type:a.type||a.currentView,contentType:a.contentType,searchType:a.searchType})})}function i(e){var t={};return u.each(e,function(e,a){u.each(e,function(r,s){r.items.length>0&&(t[a]||(t[a]={}),t[a][s]=e[s])})}),t}function c(e){var t=u.chain(u.pluck(e,"acctIds")).compact().flatten().uniq().value(),a=!1;return A&&!t.length&&(t=u.map((h.get()||[]).filter(function(e){return"ENABLED"!==e.status&&(a=!0),"ENABLED"===e.status}),"id"),a||(t=null)),t}var l,d,u=e("lodash"),h=yui.mail.model.DataStore.Accounts,p=e("StatService"),g=e("SearchConstants"),m=e("UserSettingsConstants"),f=e("Utils"),S=e("ObjectUtils"),y=e("BootcampAPIUtilsV2"),_=e("BootcampAPIUtilsV3"),b=yui.common.Utils.features,v=yui.mail.persist.MetaData,E=e("SearchUtils"),w=e("../services/RecentSearchService"),C={},A=NeoConfig.multipleAccounts,x=b.enabled("searchBootcampV3"),T=yui.common.Utils.getBootcampURL(),I=e("StringUtils"),N=e("IO");d={setQuery:function(e,t){e.dispatch(g.SET_QUERY,{query:t.query,searchId:t.searchId})},changeSearchView:function(e,t){var a=S.getValue(t,["resultCount","count"],0),r={searchId:t.searchId,searchType:t.searchType,contentType:t.contentType,filter:t.filter,url:t.url},s={SUCCESS:g.CHANGE_VIEW_FETCH_SUCCESS,FAILURE:g.CHANGE_VIEW_FETCH_FAILURE};e.dispatch(g.CHANGE_SEARCH_VIEW,r),(!a||a<=0)&&r.url&&(e.dispatch(g.CHANGE_VIEW_FETCH_START,r),o(e,s,r))},changeSearchFilter:function(e,t){var a=S.getValue(t,["resultCount","count"],0),n=t.query,o={sortOrder:t.sortOrder,sortType:t.sortType},c=t.filter?t.filter:t.newFilter;e.dispatch(g.CHANGE_SEARCH_FILTER,t),t.isForceUser||a&&!(a<=0)||(e.dispatch(g.CHANGE_FILTER_FETCH_START,t),(x?s():r()).search({reqId:yui.common.net.Session.genReqID(),query:n.keyword,serviceId:S.getValue(n,"suggestion.serviceId"),emailAddresses:S.getValue(n,"suggestion.emailAddresses"),defaultFilter:c,sortInfo:o,refinements:n.refinements,folders:u.chain(u.pluck(n.folders,"folderIds")).compact().flatten().uniq().value(),accountIds:u.chain(u.pluck(n.folders,"acctIds")).compact().flatten().uniq().value(),limit:50}).then(function(a){var r=i(a.data);e.dispatch(g.SEARCH_UPDATE,{data:r,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:c,contentType:t.contentType,searchType:t.searchType}),e.dispatch(g.CHANGE_FILTER_FETCH_SUCCESS,{data:r,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:c,contentType:t.contentType,searchType:t.searchType})},function(a){e.dispatch(g.CHANGE_FILTER_FETCH_FAILURE,{data:a.data,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:c,contentType:t.contentType,searchType:t.searchType})},function(a){var r=i(a.data);e.dispatch(g.SEARCH_UPDATE,{data:r,metaData:a.metaData,error:a.error,searchId:t.searchId,filter:c,contentType:t.contentType,searchType:t.searchType})}))},executeSearch:function(t,a){var n,o,i,l=a.query,h=l.refinements,_=m.MSG_SORT_TYPE_DATE,w=a.sortType,C=e("FolderStore"),A=yui.common.Utils.settings.value("defaultFilter"),T=u.find(l.folders,function(e){var t=C.prototype.findByIndex(S.getValue(e,"folderIds.0","")),a=S.getValue(t,"types.0","")||S.getValue(t,"folderInfo.fid","");return"DRAFT"===(a=a.toUpperCase())||"SENT"===a}),I={sortOrder:a.sortOrder||m.MSG_SORT_ORDER_DOWN},N={query:l,sortOrder:a.sortOrder||m.MSG_SORT_ORDER_DOWN},k=v.get("neo.pref.searchSortBy"),R=l.suggestion,D=S.getValue(a,"query.typeTag",""),O="srp_msglist_search_by_subject"===D||l.keyword&&/subject:/.test(l.keyword),U=/smartview_/.test(D),V=S.getValue(l,["smartviews"],[]),F=a.query.keyword,M=l.folders||[],P=E.getCurrentAccountEmail(l);u.map(V,function(e){F=[].concat(F,e.keyword).join(" "),R=u.merge({},e.suggestion,R),M=M.concat(e.folders)}),w||(w=_,b.enabled("stickySearchSort")&&k&&k===m.MSG_SORT_TYPE_RELEVANCE&&(w=k)),I.sortType=N.sortType=w,n=E.generateSearchID(a.query,w,a.sortOrder||m.MSG_SORT_ORDER_DOWN),o=y.getSearchType(R),N.searchId=n,N.searchType=o,N.typeTag=D,p.timerStart("doSearch"),p.timerStart("doSearchRender"),(x?s():r()).search({reqId:yui.common.net.Session.genReqID(),query:F,serviceId:S.getValue(R,"serviceId"),emailAddresses:S.getValue(R,"emailAddresses"),name:S.getValue(R,"name"),defaultFilter:T?"to":A,sortInfo:I,refinements:a.query.refinements,folders:u.chain(u.pluck(M,"folderIds")).compact().flatten().uniq().value(),accountIds:c(M),limit:d.customLimit||50,isSubjectSearch:O,isSmartSearch:U,currentEmail:P}).then(function(e){t.dispatch(g.SEARCH_UPDATE,{data:e.data,metaData:e.metaData,error:e.error,searchId:n,sortInfo:I,searchType:o,query:l}),t.dispatch(g.SEARCH_SUCCESS,{data:e.data,metaData:e.metaData,error:e.error,searchId:n,searchType:o,sortInfo:I,query:l})},function(e){return t.dispatch(g.SEARCH_FAILURE,{data:e.data,metaData:e.metaData,error:e.error,searchId:n,searchType:o,sortInfo:I,query:l}),e.data},function(e){return t.dispatch(g.SEARCH_UPDATE,{data:e.data,metaData:e.metaData,error:e.error,searchId:n,searchType:o,sortInfo:I,query:l}),e.data}),b.enabled("stickySearchSort")&&w!==k&&v.set("neo.pref.searchSortBy",w),(i=!!f.loadPromisesMap["tictac-searchresults"])||p.timerStart("loadSearchResultsTictac"),f.loadTictac("tictac-searchresults").then(function(){i||(p.stat({name:"search_results_tictac_notloaded"}),p.featureLatency("srp_load_tictac",p.timerComplete("loadSearchResultsTictac"))),t.dispatch(g.SEARCH_START,N)}),l.isKeywordOnly()&&!l.view&&d.addRecentSearch(t,l.keyword),l.suggestion?p.stat("do_search_with_people_token"):l.refinements&&l.refinements.length>0?h.filter(function(e){return 0===e.lastIndexOf("in:",0)}).length&&p.stat({name:"do_search_with_folder_token"}):p.stat({name:"do_search_with_keywords",tags:{count:l.keyword.length}})},fetchSuggestions:function(){var e=0,t=-1;return function(a,n){var o,i,c,l,d=n.query,h=n.searchId,m=e++,S=d.keyword&&d.keyword.trim(),y="";!d.suggestion&&d.keyword&&((i=u.chain(u.pluck(d.folders,"acctIds")).compact().flatten().uniq().value())&&i.length>0&&(o=n.accounts[i[0]])&&(y=o.email),l=(x?s():r()).getSuggestions({reqId:yui.common.net.Session.genReqID(),query:S,accountemail:y,fechnpsy:n.fechnpsy,suggestionsCache:C}),(c=!!f.loadPromisesMap["tictac-searchresults"])||p.timerStart("loadSearchResultsTictac"),f.loadTictac("tictac-searchresults").then(function(){c||p.featureLatency("srp_load_tictac",p.timerComplete("loadSearchResultsTictac"))}),l&&l.then(function(e){m>t&&(a.dispatch(g.BOOTCAMP_SUGGESTIONS_RECEIVED,{data:e.data,metaData:e.metaData,error:e.error,searchId:h,query:d}),t=m)},function(e){m>t&&a.dispatch(g.BOOTCAMP_SUGGESTIONS_FAILURE,{data:e.data,metaData:e.metaData,error:e.error,searchId:h,query:d})}))}}(),fetchWebSuggestions:function(){var e=0,t=-1;return function(a,r){var s,n=r.query,o=I.addUrlParameters(yui.common.Utils.settings.value("searchWebSuggestionsUrl"),{command:n.keyword,nresults:3,output:"sd1",appid:"YahooMailNeo"}),i=e++,c=N.get(o);c&&c.then(function(e){if(i>t){if(200===e.status)try{s=JSON.parse(e.text)}catch(e){}a.dispatch(g.WEB_SUGGESTIONS_RECEIVED,{data:s,query:n}),t=i}},function(e){i>t&&(a.dispatch(g.WEB_SUGGESTIONS_FAILURE,{data:e.text,query:n}),p.stat({name:"search_web_suggestion_api_failure",tags:{code:e&&e.status}}))})}}(),setSelectedItems:function(e,t){e.dispatch(g.SET_SELECTED_ITEMS,t)},fetchMoreSearchResults:function(e,t){var a={},r={SUCCESS:g.FETCH_MORE_SUCCESS,FAILURE:g.FETCH_MORE_FAILURE};e.dispatch(g.FETCH_MORE,{searchId:t.searchId,filter:t.filter,contentType:t.contentType,searchType:t.searchType}),t.limit&&(a.limit=t.limit),yui.common.Utils.features.enabled("useTripodIndex")&&(a.useTripod=!0),x?(a.cursor=t.offset?t.offset:50,d.customLimit=+a.cursor+(a.limit||50)):(a.offset=t.offset?t.offset:50,d.customLimit=+a.offset+(a.limit||50)),t.url=n(t.url,a),o(e,r,t)},fillPageWithResults:function(e,t){var a={},r={SUCCESS:g.FILL_SCREEN_SUCCESS,FAILURE:g.FILL_SCREEN_FAILURE};e.dispatch(g.FILL_SCREEN,{searchId:t.searchId,filter:t.filter,contentType:t.contentType,searchType:t.searchType}),t.limit&&(a.limit=t.limit),x?a.cursor=t.offset?t.offset:50:a.offset=t.offset?t.offset:50,t.url=n(t.url,a),o(e,r,t)},doCalendarSearch:function(e,t){yui.fire("fireSearch",t.query.keyword),p.stat({name:"search_sugg_search_cal"})},doContactsSearch:function(e,t){yui.fire("fireSearch",t.query.keyword),p.stat({name:"search_sugg_search_contacts"})},doNotepadSearch:function(e,t){yui.fire("fireSearch",t.query.keyword),p.stat({name:"search_sugg_search_notepad"})},loadRecentSearches:function(e){yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting?(s().getRecentSearches().then(function(t){e.dispatch(g.LOAD_RECENT_SEARCHES,{data:t})}),p.stat({name:"search_sugg_fetch_recent"})):w.get().then(function(t){e.dispatch(g.LOAD_RECENT_SEARCHES,{data:t})})},addRecentSearch:function(e,t){yui.common.Utils.features.enabled("isMetaDataMigrated")||NeoConfig.forceToV3UserSetting?e.dispatch(g.ADD_RECENT_SEARCH,{data:t}):w.add(t).then(function(t){e.dispatch(g.ADD_RECENT_SEARCH,{data:t})})},removeRecentSearch:function(e,t){w.remove(t).then(function(t){e.dispatch(g.REMOVE_RECENT_SEARCH,{data:t})})},searchAdsSuccess:function(e,t){e.dispatch(g.SEARCH_ADS_SUCCESS,{searchId:t.searchId,data:t.data})},cleanUpSearchResults:function(e,t){e.dispatch(g.CLEAN_UP_SEARCH_RESULTS,{searchId:t.searchId})},closeCurrentTab:function(e,t){e.dispatch(g.CLOSE_CURRENT_TAB,{searchId:t.searchId,query:{}})},addContact:function(e,t){e.dispatch(g.CONTACT_ADD,t)},photoSource:function(e,t){e.dispatch(g.CONTACT_PHOTO_SOURCE,t)},getPhotoSource:function(e,t){e.dispatch(g.GET_CONTACT_PHOTO_SOURCE,t)}},t.exports=d},{"../services/RecentSearchService":13,BootcampAPIUtilsV2:"BootcampAPIUtilsV2",BootcampAPIUtilsV3:"BootcampAPIUtilsV3",FolderStore:"FolderStore",IO:"IO",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",SearchUtils:"SearchUtils",StatService:"StatService",StringUtils:"StringUtils",UserSettingsConstants:"UserSettingsConstants",Utils:"Utils",lodash:"lodash"}],SearchQuery:[function(e,t,a){"use strict";function r(){return h.enabled("attachmentQueryTokens")}function s(e){var t,a;for(t=0;t<m.SMARTVIEW_CATEGORIES.length;t++)if((a=m.SMARTVIEW_CATEGORIES[t])===e.toLowerCase()||u["str_"+a]===e)return a;return""}function n(e,t){var a,r,s,n,o,i,c,d=[];for(e=(e=e.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2")).trim(),a=0;a<t.length;a++)s=(r=t[a]).folderInfo.fid,n=r.id||r.folderInfo.index.toString(),o=p.normalizeFid(s),i=u["str_folder_"+r.folderInfo.name.toLowerCase()]||"",r.isSystem?o!==e.toLowerCase()&&r.folderInfo.name.toLowerCase()!==e.toLowerCase()&&i.toLowerCase()!==e.toLowerCase()||(d.push(n),c=c||i||e):r.folderInfo.name===e&&(d.push(n),c=c||e);return l.isEmpty(d)?null:{folderIds:d,displayName:c}}function o(e,t){var a,r=[];return e=e.replace(new RegExp("^(['\"])(.*?)\\1$","g"),"$2"),l.forEach(t,function(t){e.toLowerCase()===t.description.toLowerCase()&&(r.push(t.id),a=a||t.description)}),!l.isEmpty(r)&&{acctIds:r,displayName:a}}function i(e,t,a){var i,c=e.keyword,l=e.refinements||[],d=e.folders||[],u=e.typeTag||"";return f.test(c)?{keyword:c.trim(),refinements:l,folders:d,typeTag:u}:((i=c.match(m.REGEX_HAS_IS_IN_ACCOUNT))&&i.forEach(function(e){var i,u,h,p,g=e.trim(),m=g.split(":"),f=!1;"in"===m[0]?(i=n(m[1],t))&&(d.push(i),f=!0):"account"===m[0]?(u=o(m[1],a))&&(d.push(u),f=!0):"is"===m[0]?(p="is:"+(h=s(m[1])),f=!0,l.indexOf(p)<0&&h&&l.push(p)):"has"===m[0]&&r()&&(l.push(g),f=!0),f&&(c=c.replace(e,""))}),{keyword:c.trim(),refinements:l,folders:d,typeTag:u})}function c(e,t,a){e=e||{},this.suggestion=e.suggestion,this.displayName=e.displayName,this.isSavedSearch=e.isSavedSearch,e.shouldParseKeyword?l.assign(this,i(e,t||[],a||[])):(this.keyword=e.keyword||"",this.refinements=e.refinements||[],this.folders=e.folders||[],this.smartviews=e.smartviews||[],this.typeTag=e.typeTag||"")}var l=e("lodash"),d=e("ObjectUtils"),u=e("../../../artifacts/lang"),h=yui.common.Utils.features,p=e("FolderStore"),g=e("AppDispatcher"),m=e("SearchConstants"),f=/\bOR\b|\bAND\b|\([^()]+\b[^()]+\)|\s\-|^\-|\s\+|^\+/i;c.prototype={getSuggestionQueryFragment:function(){var e,t=this;return t.suggestion?((e=t.suggestion.displayStr).indexOf(" ")>-1&&(e='"'+e+'"'),"(from:"+e+" recipient:"+e+")"):""},getRefinementsQueryFragments:function(){return this.refinements.map(function(e){var t=e.split(":");return t[1].indexOf(" ")>-1&&!/^\".*\"$/.test(t[1])&&(t[1]='"'+t[1].replace(/\"/g,'\\"')+'"'),t.join(":")})},getHumanReadableSuggestionString:function(){var e=this.suggestion;return e&&e.displayStr?e.displayStr:""},isEmpty:function(){var e=this;return!e.keyword&&!e.suggestion&&e.folders&&0===e.folders.length&&e.smartviews&&0===e.smartviews.length&&e.refinements&&0===e.refinements.length},isKeywordOnly:function(){var e=this;return!e.suggestion&&e.folders&&0===e.folders.length&&e.refinements&&0===e.refinements.length},toString:function(){var e=this,t=[],a=this.getFolderScope();return t.push(e.getHumanReadableSuggestionString()),(t=t.concat(e.getRefinementsQueryFragments())).push(e.keyword),t.push(a),this.smartviews&&this.smartviews.length&&t.push(this.smartviews[0].displayName),t.join(" ").trim()||u.str_all},toQueryString:function(){var e=this,t=[],a=this.getFolderScope();return t.push(e.getSuggestionQueryFragment()),t.push.apply(t,e.getRefinementsQueryFragments()),t.push(e.keyword),t.push(a),t.join(" ").trim()},toHumanReadableString:function(){var e=this,t=[];return e.displayName?e.displayName:(t.push(e.getHumanReadableFoldersString()),t.push(e.getHumanReadableSmartViewString()),t.push(e.getHumanReadableRefinementsString()),t.push(e.getHumanReadableSuggestionString()),t.push(e.keyword),l.compact(t).join(" ").trim()||e.toString())},getHumanReadableAccountsString:function(e){var t=this,a=[],r=l.filter(t.folders,function(e){return e.acctIds&&e.acctIds.length});return r.length&&(a=l.map(e,function(e){return e.id===d.getValue(r,"0.acctIds.0")?e.description:""})||[]),l.compact(a).join(" ")},getHumanReadableFoldersString:function(){var e=this;return(l.filter(e.folders,function(e){return e.folderIds}).map(function(e){return e.displayName})||[]).join(" ")},getHumanReadableSmartViewString:function(){return(this.smartviews.map(function(e){return u["str_"+l.escape(e.displayName)]||e.displayName})||[]).join(" ")},getHumanReadableRefinementsString:function(){var e,t=this.getRefinementsQueryFragments();return l.chain(t).map(function(t){if(t)return e=t.split(":"),u["str_"+e[1].toLowerCase()]||e[1]}).value().join(" ")},getFolderScope:function(){var e=g.context.getStore(p);return l.chain(this.folders).map(function(e){return e.folderIds}).compact().flatten().map(function(t){var a=e.findByIndex(t),r=a&&(a.isSystem?p.normalizeFid(a.folderInfo.fid):a.folderInfo.name);return r?"in:"+(r.indexOf(" ")>-1?'"'+r+'"':r):""}).join(" ").value()}},t.exports=c},{"../../../artifacts/lang":2,AppDispatcher:"AppDispatcher",FolderStore:"FolderStore",ObjectUtils:"ObjectUtils",SearchConstants:"SearchConstants",lodash:"lodash"}],SearchUtils:[function(e,t,a){"use strict";var r,s=e("ObjectUtils"),n=e("lodash");r={generateSmartViewId:function(e){var t=s.getValue;return JSON.stringify({keyword:t(e,"keyword",""),refinements:t(e,"refinements",[]),folders:t(e,"folders",[]),smartviews:t(e,"smartviews",[]),emailAddresses:t(e,["suggestion","emailAddresses",0])})},generateSearchID:function(e,t,a){var r=s.getValue;return JSON.stringify({keyword:r(e,"keyword"),refinements:r(e,"refinements"),folders:r(e,"folders"),smartviews:r(e,"smartviews"),serviceId:r(e,"suggestion.serviceId"),emailAddresses:r(e,"suggestion.emailAddresses"),sortType:t,sortOrder:a})},getCurrentAccountEmail:function(e){var t,a,r,s;return e.folders&&e.folders.length?(t=n.chain(n.pluck(e.folders,"acctIds")).compact().flatten().uniq().value(),a=t[0],r=NeoConfig.accounts.ALL,(s=n.find(r,function(e){return e.id===a}))&&s.email):NeoConfig.emailAddress}},t.exports=r},{ObjectUtils:"ObjectUtils",lodash:"lodash"}]},{},[12]);