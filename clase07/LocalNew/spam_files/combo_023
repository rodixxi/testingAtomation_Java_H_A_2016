YUI.add("mail-ui-onboarding-pensive",function(e){function f(){var e=require("BootcampAPIUtilsV2");return r||(r=new e({bucketId:NeoConfig.expBucketId,wssid:NeoConfig.wssid,mailboxId:NeoConfig.V3MailboxId,isForceUser:NeoConfig.forceDS,hasMultipleAccounts:NeoConfig.multipleAccounts,searchResultsLinksEnabled:!1,lmv3Enabled:n.enabled("LMV3"),clientId:o,bcHost:s})),r}var t=e.common.Utils,n=t.features,r=null,i,s=t.getBootcampURL(),o="YahooMailNeoPensive",u=function(){},a=n.enabled("attachMenuInOldToolbar",!1);e.mix(u.prototype,{openCompose:function(){e.once("newMessage",function(){e.mail.ui.Onboarding.closeDefaultOnboarding("pensiveCalloutOnLaunch")}),e.once("FullCompose:fullComposeReady",function(e){var t=e.context,n;t.pensiveLaunchCalloutFlow=!0,t.on("composeAssist:ready-to-open",function(){n={mimeType:"images",clickSource:"pensiveCalloutOnLaunch"},t.editor.fire("invoke:richcompose",n)})}),a&&e.on("PensiveBlockReady",function(){e.mail.ui.Onboarding.registerDefaultOnboarding({name:"pensiveCalloutOnComposeAssist",parent:e.one("#main"),node:e.one(".ca-photo-item"),pointer:"right",closeOnExternalClick:!0,offset:[-310,0],fireInit:!0,hdText:strings.str_pensive_onboarding_photolist_bd,autoFocus:!1},!0),e.fire("scout:resume")}),e.on(["composeAssistinsertToDraft","composeAssistRootClicked","composeAssistPhotoPreview"],function(){e.mail.ui.Onboarding.closeDefaultOnboarding("pensiveCalloutOnComposeAssist")}),e.fire("scout:suspend"),e.fire("newMessage",{cbfn:function(e){var t={},n;return n="",t.subject="",e.setHeader(t),e.setBody(null,n),!0}})},handlePensiveCallOut:function(){t.isCalloutShown("pensiveCalloutOnLaunch")||e.mail.ui.Onboarding.registerDefaultOnboarding({name:"pensiveCalloutOnLaunch",node:e.one("#Compose"),hdText:strings.str_pensive_onboarding_compose_hdr,pointer:"left",offset:[125,-50],bdText:strings.str_pensive_onboarding_compose_bd,btnPrimaryText:strings.str_pensive_onboarding_compose_linktext,onSuccess:i.openCompose},!0)},handleItems:function(e){if(e.length<=0)return;i.handlePensiveCallOut(),NeoGV.isPensiveUser=1},checkTripodConnectionStatus:function(){f(),r.getExternalAccounts("tripod").then(function(e){var t=e&&e.data;if(t&&t.isConnected){i.getCameraRollPhoto();return}})},getCameraRollPhoto:function(){f(),r.searchItems({url:s+"/v2/items?src=camera&mimeTypes=images&limit=1"+(n.enabled("useTripodIndex")?"&useTripod=true":"")}).then(function(e){e.data&&e.data.items&&i.handleItems(e.data.items)})},init:function(){i.checkTripodConnectionStatus()}},!0),i=new u,e.namespace("mail.ui.onboarding").pensive=i},"1.0.0",{requires:["tictac-lib","common-utils","mail-ui-onboarding"]});
